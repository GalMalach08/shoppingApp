(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{318:function(e,t,a){},423:function(e,t,a){},424:function(e,t,a){},425:function(e,t,a){},431:function(e,t,a){},463:function(e,t,a){},464:function(e,t,a){},465:function(e,t,a){},490:function(e,t,a){},493:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(16),c=a.n(r),s=a(9),i=a(25),o=a(26),l=a(7),u=a(11),d=a.n(u),j=a(21),p=a(2),h=function(e,t){return function(a){var r=Object(o.g)(),c=Object(n.useState)(!1),i=Object(s.a)(c,2),u=i[0],h=i[1],b=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:JSON.parse(localStorage.getItem("user"))?(t(!0),h(!0)):(t(!1),h(!1),console.log("not auth"),r.push("/signin"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){b()}),[]),Object(p.jsx)(p.Fragment,{children:u?Object(p.jsx)(e,Object(l.a)({},a)):null})}},b=a(17),m=function(e){return{type:"SET_PRODUCTS",payload:e}},O=function(e){return{type:"SET_CART_PRODUCTS",payload:e}},f=function(e){return{type:"ADD_CART_PRODUCTS",payload:e}},x=function(e){return{type:"UPDATE_TOTAL_PRICE",payload:e}},g=function(e){return{type:"SET_IS_ADMIN",payload:e}},v=function(e){return{type:"SET_PRODUCT_TO_UPDATE",payload:e}},y=function(e){return{type:"SET_NO_PRODUTS",payload:e}},S=function(e){return{type:"SET_DRAWER_STATE",payload:e}},w=a(127),N=a(521),C=a(267),k=a.n(C),T=(a(318),function(e){var t=e.setStepsEnabled,a=JSON.parse(localStorage.getItem("user")),r=Object(n.useState)(!0),c=Object(s.a)(r,2),i=c[0],o=c[1],l=function(){return o(!1)},u=function(){t(!0)};return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(w.a,{show:i,onHide:l,centered:!0,backdrop:"static",keyboard:!1,children:[Object(p.jsx)(w.a.Header,{closeButton:!0,children:Object(p.jsxs)(w.a.Title,{className:"modal_title",children:[Object(p.jsxs)("div",{className:"modal_title_content",children:[" Hello ",a.firstname," "]})," "]})}),Object(p.jsx)(w.a.Body,{children:"Welcome to the shoppingApp! the most popular shopping website in the world with more than 100 million users!"}),Object(p.jsx)(w.a.Footer,{children:Object(p.jsxs)(N.a,{variant:"outlined",color:"primary",onClick:function(){return l(),void u()},style:{margin:"auto"},children:["Let's get started! ",Object(p.jsx)(k.a,{style:{margin:"10px 10px 12"}})]})})]})})}),P=a(523),_=a(268),I=a.n(_),D=a(165),E=a.n(D),q=a(54),A=(a(177),a(108)),F=(a(423),Object(P.a)((function(){return{icon:{cursor:"pointer",margin:"0px 5px","&:hover":{backgroundColor:"#F5F3F3",borderRadius:"100px"}}}}))),R=function(e){var t=e.product,a=JSON.parse(localStorage.getItem("availableCart")),n=Object(b.c)((function(e){return e.products.data})),r=Object(b.c)((function(e){return e.products.cartProducts})),c=Object(b.c)((function(e){return e.users.isAdmin})),s=F(),i=Object(b.b)(),o=function(e){Object(q.c)(e,{draggable:!0,position:q.c.POSITION.BOTTOM_RIGHT,transition:q.b,autoClose:2e3})},l=function(){var e=Object(j.a)(d.a.mark((function e(t,c,s){var l,u,j,p,h,b,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com/cart_item",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:c,price:s*c,ProductId:t,CartId:a.id})});case 2:return l=e.sent,e.next=5,l.json();case 5:u=e.sent,j=u.cartItem,console.log(j),j&&((h=(p=r).find((function(e){return e.id===j.ProductId})))?(i(x((c-h.amount)*s)),h.amount=c,h.totalPrice=s*c,i(O(p)),o("Product updated in cart! \ud83d\ude00")):(b={id:j.ProductId,name:j.Product.name,singlePrice:j.Product.price,amount:j.amount,totalPrice:j.price,image:j.Product.image},(g=n).find((function(e){return e.id===t})).isInCart=!0,i(m(g)),i(f(b)),i(x(b.totalPrice)),o("Product added to cart! \ud83d\ude00")));case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:t.image&&Object(p.jsxs)("div",{class:"contain",children:[Object(p.jsx)(A.a,{cloudName:"malachcloud",src:t.image,width:"250",height:"200",crop:"scale"}),Object(p.jsx)("h3",{children:t.name}),Object(p.jsxs)("div",{class:"properties",children:[!c&&Object(p.jsxs)("div",{class:"qty",children:[Object(p.jsx)("h4",{children:"Quantity"}),t.quantity>1&&Object(p.jsx)(I.a,{className:s.icon,fontSize:"small",color:"action",onClick:function(){return function(e){var t=n;t.find((function(t){return t.id===e})).quantity-=1,i(m(t))}(t.id)}}),Object(p.jsx)("span",{class:"number",children:t.quantity}),Object(p.jsx)(E.a,{className:s.icon,fontSize:"small",color:"action",onClick:function(){return function(e){var t=n;t.find((function(t){return t.id===e})).quantity+=1,i(m(t))}(t.id)},id:"stepTwo"})]}),Object(p.jsxs)("div",{class:"price",children:[Object(p.jsx)("h4",{children:"Price"}),Object(p.jsxs)("span",{class:"price-inr",children:[Object(p.jsx)("i",{class:"fa fa-inr"}),Object(p.jsxs)("span",{class:"amount",children:["$",t.price]})]})]}),!c&&Object(p.jsxs)("div",{class:"price",children:[Object(p.jsx)("h4",{children:"Total"}),Object(p.jsxs)("span",{class:"price-inr",children:[Object(p.jsx)("i",{class:"fa fa-inr"}),Object(p.jsxs)("span",{class:"amount",children:["$",+t.price*+t.quantity]})]})]})]}),!c&&Object(p.jsx)("input",{class:"ip-add-cart",type:"button",value:t.isInCart?"Update":"Add to cart",onClick:function(){return l(t.id,t.quantity,t.price)},id:"stepOne"}),c&&Object(p.jsx)("input",{class:"ip-add-cart",type:"button",value:"Update product",onClick:function(){return function(e){var t=n.find((function(t){return t.id===e}));i(v(t)),i(S(!0))}(t.id)}})]})})},U=a(524),W=(a(424),function(){return Object(p.jsxs)(U.a,{className:"not_found_div",children:[Object(p.jsx)("h1",{children:"Were sorry!"}),Object(p.jsxs)("p",{children:["But there are no results matching your search... Please search again or return to ",Object(p.jsx)(i.b,{className:"home_page_link",to:"/products/1",children:" home page"})]})]})}),J=a(269),L=a.n(J),B=(a(425),function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"overlay"}),Object(p.jsxs)("div",{className:"loaders",children:[" ",Object(p.jsx)(L.a,{fontSize:"large",style:{fill:"grey"}})," "]})]})}),H=a(525),M=a(497),z=a(135),G=a(270),V=(a(430),a(431),Object(P.a)((function(){return{root:{display:"flex",justifyContent:"center",margin:"30px"}}}))),Y=function(e){var t=V(),a=JSON.parse(localStorage.getItem("user")),r=JSON.parse(localStorage.getItem("availableCart")),c=Object(b.b)(),i=Object(b.c)((function(e){return e.products.data})),o=Object(b.c)((function(e){return e.products.noProducts})),u=Object(n.useState)(!1),h=Object(s.a)(u,2),O=h[0],f=h[1],x=Object(n.useState)(!1),v=Object(s.a)(x,2),w=v[0],N=v[1],C=Object(n.useState)(0),k=Object(s.a)(C,2),P=k[0],_=(k[1],Object(n.useState)([{element:"#stepOne",intro:"Here you can add new products to the cart \ud83e\udd73",position:"left",tooltipClass:"myTooltipClass"},{element:"#stepTwo",intro:"Increase the quantity in order to reach the desired quantity\ud83e\udd73",position:"left",tooltipClass:"myTooltipClass"},{element:"#stepThree",intro:"Here is your cart, threre you will find all the products you added \ud83d\ude0e",position:"left",tooltipClass:"myTooltipClass"},{element:"#stepFour",intro:"Try to serach for your desired product \ud83d\udd0d",position:"left",tooltipClass:"myTooltipClass"},{element:"#stepFive",intro:"navigate between the categories",position:"left",tooltipClass:"myTooltipClass"},{element:"#stepSix",intro:"and when you finish click here to move to the payment page",position:"left",tooltipClass:"myTooltipClass"}])),I=Object(s.a)(_,2),D=I[0],E=(I[1],function(){var t=Object(j.a)(d.a.mark((function t(){var a,n,s,i,o,u,j;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"search"===(a=e.match.params.id)){t.next=20;break}return c(y(!1)),t.next=6,fetch("https://shoppingappmalach.herokuapp.com/product/".concat(a));case 6:return n=t.sent,t.next=9,n.json();case 9:return s=t.sent,i=s.products,t.next=13,fetch("https://shoppingappmalach.herokuapp.com//cart/".concat(r.id));case 13:return o=t.sent,t.next=16,o.json();case 16:u=t.sent,j=[],i.forEach((function(e){var t=Object(l.a)({},e),a=u.cart.CartItems.find((function(t){return t.ProductId===e.id}));a?(t.quantity=a.amount,t.isInCart=!0):t.quantity=1,j.push(t)})),c(m(j));case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(){return t.apply(this,arguments)}}());return Object(n.useEffect)((function(){E()}),[e.match.params.id]),Object(n.useEffect)((function(){E(),a.admin?c(g(!0)):c(g(!1)),a.newUser&&(f(!0),c(S(!0)),delete a.newUser,localStorage.setItem("user",JSON.stringify(a)))}),[]),Object(p.jsxs)(p.Fragment,{children:[O?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T,{stepsEnabled:w,setStepsEnabled:N}),Object(p.jsx)(G.Steps,{enabled:w,steps:D,initialStep:P,onExit:function(){N(!1),f(!1)}})]}):null,Object(p.jsx)(z.b,{injectFirst:!0,children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)(H.a,{container:!0,children:[!o&&i?0!==i.length?i.map((function(e){return Object(p.jsx)(M.a,{in:!0,timeout:700,children:Object(p.jsx)(H.a,{item:!0,xs:11,lg:5,className:t.root,children:Object(p.jsx)(R,{product:e})})},e.id)})):Object(p.jsx)(B,{}):Object(p.jsx)(W,{}),Object(p.jsx)(q.a,{})]})})})]})},$=function(e){var t=e.setIsAuth,a=Object(b.b)(),r=Object(o.g)(),c=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!1),a({type:"RESET_TOTAL_PRICE",payload:0}),a(v({})),a(m([])),localStorage.removeItem("user"),localStorage.removeItem("availableCart"),r.push("/signin");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){c()}),[]),null},X=a(36),Z=a(169),Q=a(551),K=a(529),ee=a(260),te=a(530),ae=a(531),ne=a(528),re=a(498),ce=a(532),se=a(556),ie=a(549),oe=a(283),le=a.n(oe),ue=a(281),de=a.n(ue),je=a(282),pe=a.n(je),he=a(79),be=a.n(he),me=a(125),Oe=a.n(me),fe=a(124),xe=a.n(fe),ge=a(277),ve=a.n(ge),ye=a(278),Se=a.n(ye),we=a(279),Ne=a.n(we),Ce=a(280),ke=a.n(Ce),Te=a(82),Pe=a(24),_e=a(276),Ie=a.n(_e),De=(a(463),Object(P.a)((function(e){return{root:{marginTop:"20px"},formGrid:{margin:"70px 15px "},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},longMessage:{marginTop:"50px",fontWeight:"600"},submit:{margin:e.spacing(3,0,2)},header:{textAlign:"center",margin:e.spacing(2),fontFamily:"Chilanka"}}}))),Ee=function(e){var t=e.setIsAuth,a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],u=r[1],h=Object(n.useState)(!1),b=Object(s.a)(h,2),m=b[0],O=b[1],f=Object(n.useState)(!1),x=Object(s.a)(f,2),g=x[0],v=x[1],y=Object(n.useState)(!1),S=Object(s.a)(y,2),w=S[0],C=S[1],k=Object(n.useState)(!1),T=Object(s.a)(k,2),P=T[0],_=T[1],I=Object(n.useState)(!1),D=Object(s.a)(I,2),E=D[0],q=D[1],A=Object(n.useState)(null),F=Object(s.a)(A,2),R=F[0],U=F[1],W=Object(n.useState)(null),J=Object(s.a)(W,2),L=J[0],B=J[1],M=Object(n.useState)(null),z=Object(s.a)(M,2),G=z[0],V=z[1],Y=Object(n.useState)(null),$=Object(s.a)(Y,2),oe=$[0],ue=$[1],je=Object(n.useState)(null),he=Object(s.a)(je,2),me=he[0],fe=he[1],ge=Object(n.useState)(null),ye=Object(s.a)(ge,2),we=ye[0],Ce=ye[1],_e=Object(n.useState)([]),Ee=Object(s.a)(_e,2),qe=Ee[0],Ae=Ee[1],Fe=Object(n.useState)(!1),Re=Object(s.a)(Fe,2),Ue=Re[0],We=Re[1],Je=Object(n.useState)(!1),Le=Object(s.a)(Je,2),Be=Le[0],He=(Le[1],Object(n.useState)(!1)),Me=Object(s.a)(He,2),ze=(Me[0],Me[1]),Ge=Object(o.g)(),Ve=De(),Ye=Object(Te.b)({initialValues:{username:"",password:""},validationSchema:Pe.a({username:Pe.c().required("sorry username is required"),password:Pe.c().required("password is required").min(6,"password have to be at least 6 characters long")}),onSubmit:function(e,t){t.resetForm;Qe(e)}}),$e=function(e,t){return{error:!(!e.errors[t]||!e.touched[t]),helperText:e.errors[t]&&e.touched[t]?e.errors[t]:null}},Xe=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com/product");case 2:return t=e.sent,e.next=5,t.json();case 5:for(a=e.sent,n=a.products,r=0;r<2;r++)Ae([].concat(Object(X.a)(qe),[n[r].image]));U(n.length-1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com/order");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.orders,B(n.length-1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V(null),fe(null),Ce(null),q(!1),We(!1),C(!0),e.next=9,fetch("https://shoppingappmalach.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 9:return a=e.sent,e.next=12,a.json();case 12:n=e.sent,C(!1),n.success?(We(!0),delete n.user.password,localStorage.setItem("user",JSON.stringify(n.user)),n.user.admin?q(!0):(r=n.user.Carts.find((function(e){return!1===e.completed})))?(r.date=et(r.date),c=0,V(r),r.CartItems.forEach((function(e){return c+=e.price})),ue(c)):0!==n.ordersOfUser.length?(n.ordersOfUser[n.ordersOfUser.length-1].order_date=et(new Date(n.ordersOfUser[n.ordersOfUser.length-1].order_date).toLocaleDateString()),fe(n.ordersOfUser[n.ordersOfUser.length-1])):Ce(n.user.firstname)):(u(n.error),O(!0),C(!1)),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(j.a)(d.a.mark((function e(){var a,n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!0),!G){e.next=7;break}ze(!0),localStorage.setItem("availableCart",JSON.stringify(G)),Ge.push("/products/1"),e.next=17;break;case 7:return a=JSON.parse(localStorage.getItem("user")),e.next=10,fetch("https://shoppingappmalach.herokuapp.com/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:(new Date).toLocaleDateString(),completed:!1,UserId:a.id})});case 10:return n=e.sent,e.next=13,n.json();case 13:r=e.sent,c=r.cart,localStorage.setItem("availableCart",JSON.stringify(c)),setTimeout((function(){t(!0),Ge.push("/products/1"),_(!1),We(!1)}),100);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(e){console.log(e);var t=e.split("/"),a=t[0];return t[0]=t[1],t[1]=a,t.join("/")};return Object(n.useEffect)((function(){Xe(),Ze()}),[]),Object(p.jsxs)(H.a,{container:!0,className:Ve.root,children:[Object(p.jsx)(H.a,{item:!0,xs:12,sm:5,md:4,component:Z.a,square:!0,className:Ve.formGrid,children:Object(p.jsxs)(Ie.a,{isFlipped:Ue,flipDirection:"horizontal",children:[Object(p.jsxs)("div",{className:Ve.paper,children:[Object(p.jsx)("img",{src:"https://thumbs.dreamstime.com/b/vegetables-shopping-cart-trolley-grocery-logo-icon-design-vector-171090350.jpg",width:"100",height:"100",crop:"scale",alt:"cart"}),Object(p.jsxs)("form",{className:Ve.form,noValidate:!0,onSubmit:Ye.handleSubmit,children:[Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)({variant:"outlined",margin:"normal",fullWidth:!0,label:"user name",name:"email",autoFocus:!0},Ye.getFieldProps("username")),$e(Ye,"username"))),Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)({InputProps:{endAdornment:Object(p.jsx)(K.a,{position:"end",children:Object(p.jsxs)(ee.a,{onClick:function(){v(!g)},children:[" ",g?Object(p.jsx)(xe.a,{}):Object(p.jsx)(Oe.a,{}),"  "]})})},variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:g?"text":"password"},Ye.getFieldProps("password")),$e(Ye,"password"))),Object(p.jsx)(te.a,{in:m,children:Object(p.jsx)(ie.a,{severity:"error",action:Object(p.jsxs)(ee.a,{color:"inherit",size:"small",onClick:function(){return O(!1)},children:[" ",Object(p.jsx)(be.a,{fontSize:"inherit"})," "]}),children:c})}),Object(p.jsx)(N.a,{disabled:!(!w&&Ye.values.username&&Ye.values.password&&!Ye.errors.password),className:"my-3",variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:" Log In "}),Object(p.jsx)(H.a,{container:!0,children:Object(p.jsx)(H.a,{item:!0,children:Object(p.jsx)(i.b,{to:"/signup",variant:"body2",children:" Don't have an account? Sign Up "})})})]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"second_flip_header",children:Object(p.jsxs)("h3",{children:[" Hello ",JSON.parse(localStorage.getItem("user"))&&JSON.parse(localStorage.getItem("user")).firstname]})}),!G&&!me&&!we&&!E&&Object(p.jsx)(ae.a,{children:"Please log in to continue"}),G&&Object(p.jsxs)(ae.a,{className:Ve.longMessage,children:[" ",Object(p.jsxs)("p",{className:"loggedin_paragraph",children:[" You have a shopping cart in process. The cart was created on ",G.date,", includes  ",G.CartItems.length," products and has a total amount of ",oe," Dollar. "]})]}),me&&Object(p.jsx)(ae.a,{className:Ve.longMessage,children:Object(p.jsxs)("p",{className:"loggedin_paragraph",children:[" You do not have an open cart. Your previous order was placed on ",me.order_date," and cost ",me.price," Dollar. We invite you to open a new cart and start buying from us in the store"]})}),we&&Object(p.jsxs)(ae.a,{children:[" ",Object(p.jsxs)("p",{className:"loggedin_paragraph",children:["  Welcome to your first purchase ",we," \ud83c\udf89"]})]}),E&&Object(p.jsxs)("div",{className:"admin_div",children:[" ",Object(p.jsx)("p",{className:"admin_paragraph",children:"  Hello mister admin "})," "]}),Object(p.jsxs)("div",{className:"btn_div",children:[Object(p.jsxs)(N.a,{className:"m-3",variant:"contained",color:"primary",onClick:Ke,disabled:P,children:[G?"Continue purchase":me?"Start new purchase":"Click here to start","  "]}),Object(p.jsxs)(N.a,{className:"m-3",variant:"contained",color:"secondary",onClick:function(){return We(!1),localStorage.removeItem("user"),V(null),fe(null),Ce(null),q(!1),void We(!1)},children:["Log in with another user","  "]})]}),Object(p.jsx)("div",{className:"second_flip_image",children:Object(p.jsx)("img",{src:"https://wallpaperaccess.com/full/2338280.jpg",alt:"",width:"400px",height:"300px"})})]})]})}),Object(p.jsxs)(H.a,{item:!0,xs:12,sm:5,md:4,component:Z.a,square:!0,className:Ve.formGrid,children:[Object(p.jsx)("div",{className:Ve.header,children:Object(p.jsx)("h1",{children:" Why us ? "})}),Object(p.jsxs)(ne.a,{dense:Be,children:[Object(p.jsxs)(re.a,{children:[Object(p.jsxs)(ce.a,{children:[" ",Object(p.jsxs)(se.a,{children:[" ",Object(p.jsx)(ve.a,{color:"action"})," "]})," "]}),Object(p.jsx)(ae.a,{primary:"We guarantee the cheapest prices"})]}),Object(p.jsxs)(re.a,{children:[Object(p.jsxs)(ce.a,{children:[" ",Object(p.jsxs)(se.a,{children:[" ",Object(p.jsx)(Se.a,{color:"action"})," "]})," "]}),Object(p.jsx)(ae.a,{primary:"Security payment"})]}),Object(p.jsxs)(re.a,{children:[Object(p.jsxs)(ce.a,{children:[" ",Object(p.jsxs)(se.a,{children:[" ",Object(p.jsx)(Ne.a,{color:"action"})," "]})," "]}),Object(p.jsx)(ae.a,{primary:"No need to leave the house"})]}),Object(p.jsxs)(re.a,{children:[Object(p.jsxs)(ce.a,{children:[" ",Object(p.jsxs)(se.a,{children:[" ",Object(p.jsx)(ke.a,{color:"action"})," "]})," "]}),Object(p.jsx)(ae.a,{primary:"Delivery arrives to the customer's home within 24 hours"})]})]}),Object(p.jsx)("div",{className:"cart_image",children:Object(p.jsx)("img",{src:"https://www.pngitem.com/pimgs/m/127-1271967_food-cart-indian-street-food-cart-hd-png.png",width:"200px",height:"200px",alt:"cart"})})]}),Object(p.jsxs)(H.a,{item:!0,xs:12,sm:6,md:3,component:Z.a,square:!0,className:Ve.formGrid,children:[Object(p.jsx)("div",{className:Ve.header,children:Object(p.jsx)("h1",{children:" Our data "})}),Object(p.jsxs)(ne.a,{dense:Be,children:[Object(p.jsxs)(re.a,{children:[Object(p.jsxs)(ce.a,{children:[" ",Object(p.jsxs)(se.a,{children:[" ",Object(p.jsx)(de.a,{color:"action"})," "]})," "]}),Object(p.jsx)(ae.a,{primary:"We have more than ".concat(R," products")})]}),Object(p.jsxs)("div",{className:"gallery",children:[Object(p.jsx)("img",{className:"gallery_image",src:"https://www.interwealthgroup.com/wp-content/uploads/2019/09/Dont-keep-all-your-eggs-in-one-basket-3.png",alt:"product1"}),Object(p.jsx)("img",{className:"gallery_image",src:"https://www.cookingclassy.com/wp-content/uploads/2019/07/steak-marinade-12.jpg",alt:"product1"}),Object(p.jsx)("img",{className:"gallery_image",src:"https://www.tnuva.co.il/uploads/f_6023fa62abbff_1612970594.jpg",alt:"product2"})]}),Object(p.jsxs)(re.a,{children:[Object(p.jsxs)(ce.a,{children:[" ",Object(p.jsxs)(se.a,{children:[" ",Object(p.jsx)(pe.a,{color:"action"})," "]})," "]}),Object(p.jsx)(ae.a,{primary:"We have more than ".concat(L," orders")})]}),G||me||we||E?null:Object(p.jsxs)(re.a,{children:[Object(p.jsxs)(ce.a,{children:[" ",Object(p.jsxs)(se.a,{children:[" ",Object(p.jsx)(le.a,{color:"action"})," "]})," "]}),Object(p.jsx)(ae.a,{children:" Please log in to continue "})]})]})]})]})},qe=a(128),Ae=Object(P.a)((function(e){return{slider:{width:"54%",margin:"99px 0 0 151px",position:"relative",left:"-3px",bottom:"3px"}}})),Fe=function(){var e=Ae();return Object(p.jsxs)(qe.a,{fade:!0,className:e.slider,interval:2e3,children:[Object(p.jsx)(qe.a.Item,{children:Object(p.jsx)("img",{src:"https://images.unsplash.com/photo-1482049016688-2d3e1b311543?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1906&q=80",height:"435",width:"245",crop:"scale",alt:"slider1"})}),Object(p.jsx)(qe.a.Item,{children:Object(p.jsx)("img",{src:"https://images.unsplash.com/photo-1484723091739-30a097e8f929?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxleHBsb3JlLWZlZWR8NXx8fGVufDB8fHx8&auto=format&fit=crop&w=500&q=60",height:"435",width:"245",crop:"scale",alt:"slider2"})}),Object(p.jsx)(qe.a.Item,{children:Object(p.jsx)("img",{src:"https://images.unsplash.com/photo-1467003909585-2f8a72700288?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxleHBsb3JlLWZlZWR8OXx8fGVufDB8fHx8&auto=format&fit=crop&w=500&q=60",height:"435",width:"245",crop:"scale",alt:"slider3"})})]})},Re=a.p+"static/media/signPhoto.16e90d9a.png",Ue=a(552),We=a(557),Je=a(533),Le=a(553),Be=a(548),He=a(534),Me=(a(464),Object(P.a)((function(e){return{root:{marginTop:"20px"},image:{position:"relative",backgroundImage:"url(".concat(Re,")"),backgroundRepeat:"no-repeat",alignSelf:"center",backgroundPosition:"0 0",backgroundSize:"454px 618px",flexBasis:"454px",height:"618px"},formGrid:{margin:"70px 15px"},paper:{margin:e.spacing(3,4),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)}}}))),ze=function(e){var t=e.setIsAuth,a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],u=r[1],h=Object(n.useState)(!1),b=Object(s.a)(h,2),m=b[0],O=b[1],f=Object(n.useState)(!1),x=Object(s.a)(f,2),g=x[0],v=x[1],y=Object(n.useState)(!1),S=Object(s.a)(y,2),w=S[0],C=S[1],k=Object(n.useState)(""),T=Object(s.a)(k,2),P=T[0],_=T[1],I=Object(n.useState)(!1),D=Object(s.a)(I,2),E=D[0],q=D[1],A=Object(n.useState)(0),F=Object(s.a)(A,2),R=F[0],U=F[1],W=["Ashdod","Beer Sheva","Beni Brak","Heifa","Holon","Netaniya","Petah Tikva","Ramat Gan","Rishon Lezion","Tel Aviv"],J=Me(),L=Object(o.g)(),B=Pe.a().shape({firstname:Pe.c().required("first name is required!"),lastname:Pe.c().required("last name is required!"),username:Pe.c().required("user name is required!").email(),password:Pe.c().required("password is required!").min(6,"password have to be at least 6 characters long"),confirmPassword:Pe.c().required("confirm your password!").oneOf([Pe.b("password"),null],"Passwords must match"),city:Pe.c().required("city is required!"),street:Pe.c().required("street is required!")}),M=function(e,t){return{error:!(!e.errors[t]||!e.touched[t]),helperText:e.errors[t]&&e.touched[t]?e.errors[t]:null}},z=function(){return v(!g)},G=function(){return C(!w)},V=function(){return U((function(e){return e-1}))},Y=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com/auth/username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,r=n.success,c=n.error,r?U((function(e){return e+1})):(u(c),O(!0));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(j.a)(d.a.mark((function e(a){var n,r,c,s,i,o,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(!0),e.next=4,fetch("https://shoppingappmalach.herokuapp.com/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(l.a)({},a))});case 4:return n=e.sent,e.next=7,n.json();case 7:if(r=e.sent,c=r.user,s=r.error,!c){e.next=24;break}return delete c.password,localStorage.setItem("user",JSON.stringify(Object(l.a)(Object(l.a)({},c),{},{newUser:!0}))),e.next=15,fetch("https://shoppingappmalach.herokuapp.com/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:(new Date).toLocaleDateString(),completed:!1,UserId:c.id})});case 15:return i=e.sent,e.next=18,i.json();case 18:o=e.sent,j=o.cart,localStorage.setItem("availableCart",JSON.stringify(j)),setTimeout((function(){q(!1),t(!0),L.push("/products/1")}),100),e.next=27;break;case 24:u(s),O(!0),q(!1);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),console.error(e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(H.a,{container:!0,className:J.root,children:[Object(p.jsxs)(Ue.a,{mdDown:!0,children:[Object(p.jsx)(H.a,{item:!0,xs:1,md:2}),Object(p.jsx)(H.a,{item:!0,xs:2,lg:4,className:J.image,children:Object(p.jsx)(Fe,{})})]}),Object(p.jsx)(H.a,{item:!0,xs:12,lg:6,component:Z.a,elevation:6,square:!0,className:J.formGrid,children:Object(p.jsxs)("div",{className:J.paper,children:[Object(p.jsx)("img",{src:"https://thumbs.dreamstime.com/b/vegetables-shopping-cart-trolley-grocery-logo-icon-design-vector-171090350.jpg",width:"100",height:"100",crop:"scale",alt:"cart"}),Object(p.jsx)(We.a,{activeStep:R,children:["Basic authentication details","Advanced authentication details"].map((function(e){return Object(p.jsxs)(Je.a,{children:[" ",Object(p.jsx)(Le.a,{children:e})]},e)}))}),Object(p.jsx)(Te.a,{initialValues:{username:"",password:"",confirmPassword:"",firstname:"",lastname:"",street:"",city:""},onSubmit:function(e){return $(e)},validationSchema:B,enableReinitialize:!0,children:function(e){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("form",{style:{textAlign:"center"},onSubmit:e.handleSubmit,autoComplete:"off",children:[0===R&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)({name:"username",margin:"normal",label:"Email",variant:"outlined",fullWidth:!0},e.getFieldProps("username")),M(e,"username"))),Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)(Object(l.a)({type:g?"text":"password",variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password"},e.getFieldProps("password")),M(e,"password")),{},{InputProps:{endAdornment:Object(p.jsx)(K.a,{position:"end",children:Object(p.jsxs)(ee.a,{onClick:z,children:[" ",g?Object(p.jsx)(xe.a,{}):Object(p.jsx)(Oe.a,{}),"  "]})})}})),Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)(Object(l.a)({type:w?"text":"password",variant:"outlined",margin:"normal",fullWidth:!0,name:"confirmPassword",label:"Confirm Password"},e.getFieldProps("confirmPassword")),M(e,"confirmPassword")),{},{InputProps:{endAdornment:Object(p.jsx)(K.a,{position:"end",children:Object(p.jsxs)(ee.a,{onClick:G,children:[" ",w?Object(p.jsx)(xe.a,{}):Object(p.jsx)(Oe.a,{}),"  "]})})}})),Object(p.jsx)(te.a,{in:m,children:Object(p.jsx)(ie.a,{severity:"error",action:Object(p.jsxs)(ee.a,{color:"inherit",size:"small",onClick:function(){return O(!1)},children:[" ",Object(p.jsx)(be.a,{fontSize:"inherit"})," "]}),children:c})}),Object(p.jsx)(N.a,{disabled:!(e.values.username&&!e.errors.username&&e.values.password&&!e.errors.password&&e.values.confirmPassword&&!e.errors.confirmPassword&&!E),className:"my-3",variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:function(){return Y(e.values.username)},children:" Next "})]}),1===R&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)({name:"firstname",margin:"normal",label:"First name",variant:"outlined",fullWidth:!0},e.getFieldProps("firstname")),M(e,"firstname"))),Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)({name:"lastname",margin:"normal",label:"Last name",variant:"outlined",fullWidth:!0},e.getFieldProps("lastname")),M(e,"lastname"))),Object(p.jsx)(Be.a,Object(l.a)(Object(l.a)(Object(l.a)({value:P,onChange:function(e){return _(e.target.value)},name:"city",fullWidth:!0},e.getFieldProps("city")),M(e,"city")),{},{children:W.map((function(e){return Object(p.jsx)(He.a,{value:e,children:e},e)}))})),Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)({name:"street",margin:"normal",label:"Street",variant:"outlined",fullWidth:!0},e.getFieldProps("street")),M(e,"street"))),Object(p.jsx)(N.a,{disabled:!(e.values.firstname&&e.values.lastname&&e.values.city&&e.values.street),className:"my-3",variant:"contained",color:"primary",size:"large",fullWidth:!0,type:"submit",children:" Sign up "}),Object(p.jsx)(N.a,{className:"my-3",variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:V,children:" Back "})]}),Object(p.jsx)(H.a,{container:!0,children:Object(p.jsx)(H.a,{item:!0,children:Object(p.jsx)(i.b,{to:"/signin",variant:"body2",children:" Already have an account? Sign In "})})})]})})}})]})}),Object(p.jsx)(H.a,{item:!0,xs:2})]})},Ge=(a(465),function(e){var t=e.modalOpen,a=e.setModalOpen,n=e.orderId,r=Object(b.c)((function(e){return e.products})),c=Object(o.g)(),s=JSON.parse(localStorage.getItem("user"));return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(w.a,{size:"md",centered:!0,show:t,onHide:function(){return a(!1)},style:{margin:"70px auto 30px",textAlign:"center"},children:[Object(p.jsx)(w.a.Header,{children:Object(p.jsxs)(w.a.Title,{style:{fontWeight:"700"},children:[Object(p.jsxs)("p",{children:["Thank you ",s.firstname,"!"]}),Object(p.jsxs)("h5",{children:["Your order has been successfully placed! The order number is ",n]})]})}),Object(p.jsxs)(w.a.Body,{children:[Object(p.jsxs)("p",{children:["To download a receipt ",Object(p.jsx)("span",{className:"recipe_download_btn",onClick:function(){var e=["Your receipt:"],t=document.createElement("a");r.cartProducts.forEach((function(t,a){return e.push("".concat(a+1,". ").concat(t.amount," ").concat(t.name," cost $").concat(t.totalPrice))})),e.push("your order's total price is: $".concat(r.totalPrice," "));var a=new Blob([e.join("\n")],{type:"text/plain"});t.href=URL.createObjectURL(a),t.download="myFile.txt",t.click()},children:" click here "})]}),Object(p.jsx)(N.a,{className:"my-3",variant:"contained",color:"primary",size:"large",onClick:function(){return c.push("logout")},children:" Finish order "})]})]})})}),Ve=a(536),Ye=a(537),$e=a(538),Xe=a(539),Ze=a(540),Qe=a(541),Ke=a(284),et=a.n(Ke),tt=a(289),at=a(41),nt=a(546),rt=Object(P.a)((function(e){return{root:{padding:"0px"},formGrid:{margin:"20px 40px "},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)}}})),ct=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),o=Object(s.a)(c,2),u=o[0],h=o[1],m=Object(n.useState)(""),O=Object(s.a)(m,2),f=O[0],x=(O[1],Object(n.useState)([])),g=Object(s.a)(x,2),v=g[0],y=g[1],S=Object(n.useState)(!1),w=Object(s.a)(S,2),C=w[0],k=w[1],T=Object(n.useState)(""),P=Object(s.a)(T,2),_=P[0],I=(P[1],Object(n.useState)([])),D=Object(s.a)(I,2),E=D[0],q=D[1],F=Object(n.useState)(new Date),R=Object(s.a)(F,2),U=R[0],W=R[1],J=Object(b.c)((function(e){return e.products.cartProducts})),L=Object(b.c)((function(e){return e.products.totalPrice})),B=JSON.parse(localStorage.getItem("user")),M=JSON.parse(localStorage.getItem("availableCart")),z=rt(),G=Object(Te.b)({initialValues:{street:" ",city:"",creditNumber:""},validationSchema:Pe.a({city:Pe.c().required("city is required"),street:Pe.c().required("street is required"),creditNumber:Pe.c().required("credit card is required")}),onSubmit:function(e,t){t.resetForm;Y(e)}}),V=function(e,t){return{error:!(!e.errors[t]||!e.touched[t]),helperText:e.errors[t]&&e.touched[t]?e.errors[t]:null}},Y=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(l.a)(Object(l.a)({},t),{},{price:L,order_date:new Date,shipment_date:U,CartId:M.id,UserId:B.id}),e.next=3,fetch("https://shoppingappmalach.herokuapp.com/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,s=c.order,h(s.id),r(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=[];J.forEach((function(t){e.push(t)})),q(e)},X=function(e){G.setFieldValue(e,B[e])},K=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com//order");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.orders,r=[],n.forEach((function(e){return r.push({month:new Date(e.shipment_date).getMonth(),day:new Date(e.shipment_date).getDate()})})),console.log(r),y(r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){$(),K()}),[]),Object(p.jsxs)(H.a,{container:!0,className:z.root,children:[Object(p.jsxs)(H.a,{item:!0,xs:12,sm:5,component:Z.a,square:!0,className:z.formGrid,children:[Object(p.jsxs)(Ve.a,{component:Z.a,children:[Object(p.jsx)(et.a,{value:_,onChange:function(e){return function(e){if(""===e)$();else{var t=J.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}));q(t)}}(e)},onCancelSearch:function(){$()}}),Object(p.jsxs)(Ye.a,{className:z.table,"aria-label":"simple table",children:[Object(p.jsx)($e.a,{children:Object(p.jsxs)(Xe.a,{children:[Object(p.jsx)(Ze.a,{children:"Product"}),Object(p.jsx)(Ze.a,{children:"quantity"}),Object(p.jsx)(Ze.a,{children:"total price"})]})}),Object(p.jsxs)(Qe.a,{children:[E.map((function(e){return Object(p.jsxs)(Xe.a,{children:[Object(p.jsxs)(Ze.a,{children:[Object(p.jsx)(A.a,{className:"product_img",cloudName:"malachcloud",src:e.image,width:"70",height:"40",crop:"scale"}),e.name]}),Object(p.jsx)(Ze.a,{children:e.amount}),Object(p.jsxs)(Ze.a,{children:["$",e.totalPrice]})]},e.id)})),Object(p.jsx)(Xe.a,{children:Object(p.jsx)(Ze.a,{children:Object(p.jsxs)("p",{className:"total_price_p",children:["Total price: $",L]})})})]})]})]}),Object(p.jsx)(i.b,{to:"/products/1",style:{textDecoration:"none"},children:Object(p.jsx)(N.a,{variant:"outlined",color:"primary",className:"m-3",children:" Continue shopping "})})]}),Object(p.jsx)(H.a,{item:!0,xs:12,sm:5,component:Z.a,square:!0,className:z.formGrid,children:Object(p.jsxs)("div",{className:z.paper,children:[Object(p.jsx)("img",{src:"https://thumbs.dreamstime.com/b/vegetables-shopping-cart-trolley-grocery-logo-icon-design-vector-171090350.jpg",width:"100",height:"100",crop:"scale",alt:"cart"}),Object(p.jsxs)("form",{className:z.form,noValidate:!0,onSubmit:G.handleSubmit,children:[Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)(Object(l.a)({variant:"outlined",margin:"normal",fullWidth:!0,label:"city",name:"city"},G.getFieldProps("city")),V(G,"city")),{},{onDoubleClick:function(){return X("city")},helperText:"Double click on the field to get the defualts values"})),Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)(Object(l.a)({variant:"outlined",margin:"normal",fullWidth:!0,label:"street",name:"street"},G.getFieldProps("street")),V(G,"street")),{},{onDoubleClick:function(){return X("street")},helperText:"Double click on the field to get the defualts values"})),Object(p.jsx)(at.a,{utils:tt.a,children:Object(p.jsx)(nt.a,{disablePast:!0,label:"order date",format:"dd/MM/yyyy",value:U,onChange:function(e){return W(e)},shouldDisableDate:function(e){return v.filter((function(t){return t.month===e.getMonth()&&t.day===e.getDate()})).length>2},helperText:"Dates that exceed the maximum order quantity will be marked in gray and you will not be able to select them"})}),Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)({variant:"outlined",margin:"normal",fullWidth:!0,label:"credit card",name:"creditNumber"},G.getFieldProps("creditNumber")),V(G,"creditNumber"))),Object(p.jsx)(te.a,{in:C,children:Object(p.jsx)(ie.a,{severity:"error",action:Object(p.jsxs)(ee.a,{color:"inherit",size:"small",onClick:function(){return k(!1)},children:[" ",Object(p.jsx)(be.a,{fontSize:"inherit"})," "]}),children:f})}),Object(p.jsx)(N.a,{disabled:!(G.values.city&&G.values.street&&G.values.creditNumber&&!G.errors.creditNumber),className:"my-3",variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:" Send order "})]})]})}),Object(p.jsx)(Ge,{modalOpen:a,setModalOpen:r,orderId:u})]})},st=a(83),it=a(294),ot=a(197),lt=a.n(ot),ut=a(196),dt=a.n(ut),jt=Object(P.a)((function(e){return{search:Object(st.a)({display:"flex",position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:"whitesmoke",marginRight:e.spacing(2),marginLeft:e.spacing(2),width:"348px !important",color:"black",margin:"10px 0px"},e.breakpoints.up("lg"),{width:"auto !important"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"right"},inputRoot:{color:"inherit",fontSize:"13px"},inputInput:Object(st.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sortBtn:{padding:"0px 8px 8px"}}})),pt=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(b.c)((function(e){return e.products.cartProducts})),i=Object(b.b)(),l=Object(o.g)(),u=jt(),h=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com/product/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:a})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,(r=n.products).length>0?(i(y(!1)),r.forEach((function(e){var t=c.find((function(t){return t.id===e.id}));t?(e.quantity=t.amount,e.isInCart=!0):e.quantity=1}))):i(y(!0)),l.push("/products/search"),i(m(r));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:u.search,id:"stepFour",children:[Object(p.jsxs)("div",{className:u.searchIcon,children:["  ",Object(p.jsx)(lt.a,{}),"  "]}),Object(p.jsx)(it.a,{type:"text",value:a,onChange:function(e){return r(e.target.value)},placeholder:"Search\u2026",classes:{root:u.inputRoot,input:u.inputInput}}),Object(p.jsx)(N.a,{onClick:h,children:"Search"}),Object(p.jsxs)(ee.a,{onClick:function(){r("")},children:[" ",Object(p.jsx)(dt.a,{fontSize:"small"})," "]})]})})},ht=a(544),bt=a(543),mt=a(129),Ot=a(558),ft=a(545),xt=a(259),gt=a(5),vt=a(286),yt=a.n(vt),St=a(285),wt=a.n(St),Nt=a(202),Ct=a.n(Nt),kt=a(287),Tt=a.n(kt),Pt=a(550),_t=a(547),It=(a(490),300),Dt=Object(P.a)((function(e){return{root:{display:"flex",fontFamily:"roboto"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"white",color:"black"},appBarShift:{width:"calc(100% - ".concat(It,"px)"),marginLeft:It,marginBottom:"20px",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},title:{color:"black",display:"inline"},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:It,flexShrink:0},drawerPaper:{width:It},drawerHeader:{display:"flex",justifyContent:"space-around",marginTop:"10px"},content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-300},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})),Et=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),u=Object(s.a)(c,2),h=u[0],f=u[1],g=Object(n.useState)(""),y=Object(s.a)(g,2),w=y[0],C=y[1],k=Object(n.useState)(!1),T=Object(s.a)(k,2),P=T[0],_=T[1],I=Object(n.useState)([]),D=Object(s.a)(I,2),F=D[0],R=D[1],U=Object(n.useState)({name:"",price:"",image:"",category:""}),W=Object(s.a)(U,2),J=W[0],L=W[1],B=Object(b.c)((function(e){return e.products.cartProducts})),H=Object(b.c)((function(e){return e.products.totalPrice})),M=Object(b.c)((function(e){return e.users.isAdmin})),z=Object(b.c)((function(e){return e.products.productToUpdate})),G=Object(b.c)((function(e){return e.products.data})),V=Object(b.c)((function(e){return e.drawer.isOpen})),Y=JSON.parse(localStorage.getItem("availableCart")),$=Dt(),X=Object(b.b)(),Z=Object(o.h)(),K=Pe.a().shape({name:Pe.c().required("name is required!"),price:Pe.c().required("price is required!"),image:Pe.c().required("image is required!"),category:Pe.c().required("category is required!")}),te=function(e,t){return{error:!(!e.errors[t]||!e.touched[t]),helperText:e.errors[t]&&e.touched[t]?e.errors[t]:null}},ae=function(){return X(S(!1))},ne=function(e){Object(q.c)(e,{draggable:!0,position:q.c.POSITION.BOTTOM_RIGHT,transition:q.b,autoClose:2e3})},re=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com/cart_item/cart",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Y.id})});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,a.success&&(G.forEach((function(e){e.quantity=1,e.isInCart=!1})),X(O([])),X({type:"RESET_TOTAL_PRICE",payload:0}),ne("Cart cleared! \ud83d\ude00"));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,r,c,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com/cart_item",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({CartId:Y.id,ProductId:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,n.success&&((c=(r=G).find((function(e){return e.id===t})))&&(c.isInCart=!1,c.quantity=1,X(m(r))),s=B.find((function(e){return e.id===t})),i=B.filter((function(e){return e.id!==t})),X(O(i)),X(x(-s.totalPrice)),ne("Product removed! \ud83d\ude00"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com/cart/".concat(Y.id));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=[],r=0,a.cart.CartItems.forEach((function(e){var t={id:e.ProductId,name:e.Product.name,singlePrice:e.Product.price,totalPrice:e.amount*e.Product.price,amount:e.amount,image:e.Product.image};r+=t.totalPrice,n.push(t)})),r!==H&&X(x(r)),X(O(n));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoppingappmalach.herokuapp.com/category");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.categories,r=[],n.forEach((function(e){return r.push({name:e.name,id:e.id})})),R(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,r,c,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),a=F.find((function(e){return e.name===t.category})).id,e.next=4,fetch("https://shoppingappmalach.herokuapp.com/product",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(l.a)(Object(l.a)({},t),{},{imageName:h,CategoryId:a,id:z.id}))});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,c=r.product,i=(s=G).findIndex((function(e){return e.id===c.id})),s[i]=c,X(m(s)),ne("Product Updated! \ud83d\ude00"),_(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,r,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),a=F.find((function(e){return e.name===t.category})).id,e.next=4,fetch("https://shoppingappmalach.herokuapp.com/product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(l.a)(Object(l.a)({},t),{},{imageName:h,CategoryId:a}))});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,c=r.product,console.log(c),"/products/".concat(a)===Z.pathname&&((s=G).push(Object(l.a)(Object(l.a)({},c),{},{quanity:1})),X(m(s)),ne("Product Added! \ud83d\ude00"),_(!1));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(z.name){var e=z.name,t=z.price,a=z.image,n=z.Category,r=z.imageName;L({name:e,price:t,image:a,category:n.name}),f(r),C(n.name)}}),[z]),Object(n.useEffect)((function(){M?ie():se()}),[M]),Object(n.useEffect)((function(){"/payment"===Z.pathname?r(!1):r(!0)}),[Z.pathname]),Object(p.jsxs)("div",{className:$.root,children:[Object(p.jsx)(ht.a,{position:"fixed",className:Object(gt.a)($.appBar,Object(st.a)({},$.appBarShift,V)),children:Object(p.jsx)(bt.a,{children:Object(p.jsxs)(Pt.a,{bg:"white",expand:"xl",className:"navbar",children:[Object(p.jsxs)(Pt.a.Brand,{className:"navbar_brand",children:[Object(p.jsx)(ee.a,{color:"inherit",onClick:function(){return X(S(!0))},edge:"start",className:Object(gt.a)($.menuButton,V&&$.hide),children:Object(p.jsx)(wt.a,{})}),Object(p.jsx)(i.b,{to:"/products/1",style:{textDecoration:"none"},children:Object(p.jsx)(mt.a,{className:$.title,variant:"h6",noWrap:!0,children:" ShoppingApp "})})]}),Object(p.jsx)(Pt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsx)(Pt.a.Collapse,{className:"navbar_collapse",children:Object(p.jsxs)(_t.a,{className:"mr-auto w-100 d-flex justify-content-around",children:[Object(p.jsx)(i.c,{to:"/products/1",className:"nav_link",activeClassName:"selected",children:Object(p.jsx)(ee.a,{color:"inherit",className:$.iconButton,children:Object(p.jsx)("span",{className:V?"link_desc_small":"link_desc",children:"Dairy and eggs"})})}),Object(p.jsx)(i.c,{to:"/products/2",className:"nav_link",activeClassName:"selected",id:"stepFive",children:Object(p.jsx)(ee.a,{color:"inherit",children:Object(p.jsx)("span",{className:V?"link_desc_small":"link_desc",children:"Meat"})})}),Object(p.jsx)(i.c,{to:"/products/3",className:"nav_link",activeClassName:"selected",children:Object(p.jsx)(ee.a,{color:"inherit",children:Object(p.jsx)("span",{className:V?"link_desc_small":"link_desc",children:"Fruits And Vegetables"})})}),Object(p.jsx)(i.c,{to:"/products/4",className:"nav_link",activeClassName:"selected",children:Object(p.jsx)(ee.a,{color:"inherit",children:Object(p.jsx)("span",{className:V?"link_desc_small":"link_desc",children:"Drinks and alcohol"})})}),Object(p.jsxs)("div",{className:$.searchLink,children:[" ",Object(p.jsx)(pt,{})," "]}),Object(p.jsx)(i.c,{to:"/logout",className:"nav_link",activeClassName:"selected",children:Object(p.jsxs)(ee.a,{color:"inherit",children:[Object(p.jsx)(yt.a,{})," ",Object(p.jsx)("span",{className:V?"link_desc_small":"link_desc",children:"Logout"})]})})]})})]})})}),Object(p.jsx)(Ot.a,{className:$.drawer,variant:"persistent",anchor:"left",open:V,classes:{paper:$.drawerPaper},children:M?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"admin_panel_header",children:[Object(p.jsx)("h4",{className:"admin_panel_h1",children:"Admin panel"}),Object(p.jsxs)("div",{children:[Object(p.jsxs)(ee.a,{title:"add product",onClick:function(){return X(v({})),L({name:"",price:"",image:"",category:""}),void f("")},children:["  ",Object(p.jsx)(E.a,{})," "]}),Object(p.jsx)(ee.a,{title:"close sidebar",onClick:ae,children:Object(p.jsx)(Ct.a,{})})]})]}),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h5",{className:"action_header",children:z.name?"Update product":"Add product"}),Object(p.jsx)(Te.a,{initialValues:J,validationSchema:K,enableReinitialize:!0,children:function(e){return Object(p.jsxs)("form",{style:{textAlign:"center",margin:"10px"},onSubmit:e.handleSubmit,autoComplete:"off",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)({name:"name",margin:"normal",label:"name",variant:"outlined",fullWidth:!0},e.getFieldProps("name")),te(e,"name"))),Object(p.jsx)(Q.a,Object(l.a)(Object(l.a)({name:"price",margin:"normal",label:"price",variant:"outlined",fullWidth:!0},e.getFieldProps("price")),te(e,"price"))),Object(p.jsx)(Be.a,Object(l.a)(Object(l.a)(Object(l.a)({defaultValue:"",value:w,onChange:function(e){return C(e.target.value)},name:"category",fullWidth:!0},e.getFieldProps("category")),te(e,"category")),{},{children:F.map((function(e){return Object(p.jsx)(He.a,{value:e.name,children:e.name},e.id)}))})),Object(p.jsx)(xt.a,{id:"file",type:"file",name:"image",onChange:function(t){return function(e,t){var a=new FileReader;t("image",e.target.files[0]),0===e.target.files.length?(f(""),t("image","")):(a.readAsDataURL(e.target.files[0]),a.onloadend=function(){t("image",a.result)},f(e.target.files[0].name))}(t,e.setFieldValue)},hidden:!0}),Object(p.jsxs)(N.a,{style:{display:"block",margin:"10px 0px"},color:"primary",variant:"outlined",children:[Object(p.jsx)(Tt.a,{className:""}),Object(p.jsxs)("label",{htmlFor:"file",children:[h?"".concat(h," UPLOADED"):" Product image"," "]})]}),e.errors.image&&e.touched.image?Object(p.jsx)("div",{className:"error",children:e.errors.image}):null]}),Object(p.jsxs)(N.a,{disabled:!(e.values.name&&e.values.price&&e.values.image&&e.values.category&&!P),className:"my-3",variant:"contained",color:"primary",onClick:z.name?function(){return oe(e.values)}:function(){return le(e.values)},size:"large",fullWidth:!0,children:[" ",z.name?"Update product":"Add product"," "]})]})}})]})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:$.drawerHeader,children:[Object(p.jsx)("h3",{className:"cart_header",id:"stepThree",children:"Your Cart"}),Object(p.jsx)("div",{children:Object(p.jsx)(ee.a,{title:"close sidebar",onClick:ae,children:Object(p.jsx)(Ct.a,{})})})]}),Object(p.jsx)(ft.a,{}),Object(p.jsx)("div",{className:"summary_card",children:B.map((function(e){return Object(p.jsxs)("div",{className:"card_item",children:[Object(p.jsx)("div",{children:Object(p.jsx)(A.a,{className:"product_img",cloudName:"malachcloud",src:e.image,width:"70",height:"40",crop:"scale"})}),Object(p.jsxs)("div",{className:"product_info",children:[Object(p.jsx)("h6",{children:e.name}),Object(p.jsxs)("h6",{children:["quanity: ",e.amount]}),Object(p.jsxs)("h6",{children:["total price: ",e.totalPrice,"$"]})]}),Object(p.jsx)("div",{children:a&&Object(p.jsxs)(ee.a,{onClick:function(){return ce(e.id)},children:[" ",Object(p.jsx)(be.a,{})," "]})})]},e.id)}))}),0===H?Object(p.jsx)("h5",{className:"m-2",children:"Your cart is empty"}):Object(p.jsxs)("h5",{className:"ml-2",children:[Object(p.jsx)("span",{className:"total_price_span",children:" Total price: "})," $",H]}),Object(p.jsxs)("div",{className:"btn-group",children:[Object(p.jsx)(i.b,{to:"/payment",style:{textDecoration:"none",pointerEvents:0!==H&&a?"":"none"},children:Object(p.jsx)(N.a,{variant:"outlined",color:"primary",className:"m-2",disabled:0===H||!a,id:"stepSix",onClick:function(){return X(m([]))},children:" Payment page "})}),Object(p.jsx)(N.a,{variant:"outlined",color:"secondary",onClick:re,className:"m-2",disabled:0===H||!a,children:" Clear cart "})]})]})}),Object(p.jsx)("main",{className:Object(gt.a)($.content,Object(st.a)({},$.contentShift,V)),children:Object(p.jsx)("div",{className:$.drawerHeader})}),Object(p.jsx)(q.a,{draggable:!1})]})},qt=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(i.a,{children:[a&&Object(p.jsx)(Et,{}),Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{path:"/signin",render:function(){return Object(p.jsx)(Ee,{setIsAuth:r})}}),Object(p.jsx)(o.b,{path:"/signup",render:function(){return Object(p.jsx)(ze,{setIsAuth:r})}}),Object(p.jsx)(o.b,{path:"/logout",render:function(){return Object(p.jsx)($,{setIsAuth:r})}}),Object(p.jsx)(o.b,{path:"/payment",component:h(ct,r)}),Object(p.jsx)(o.b,{path:"/products/:id",component:h(Y,r)}),Object(p.jsx)(o.a,{from:"*",to:"/products/1"})]})]})})},At=a(84),Ft=a(288);var Rt=Object(At.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAdmin:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_ADMIN":return Object(l.a)(Object(l.a)({},e),{},{isAdmin:t.payload});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],cartProducts:[],productToUpdate:{},totalPrice:0,noProducts:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRODUCTS":return Object(l.a)(Object(l.a)({},e),{},{data:Object(X.a)(t.payload)});case"SET_CART_PRODUCTS":return Object(l.a)(Object(l.a)({},e),{},{cartProducts:Object(X.a)(t.payload)});case"SET_ALL_PRODUCTS":return Object(l.a)(Object(l.a)({},e),{},{allProducts:Object(X.a)(t.payload)});case"ADD_CART_PRODUCTS":return Object(l.a)(Object(l.a)({},e),{},{cartProducts:[].concat(Object(X.a)(e.cartProducts),[t.payload])});case"UPDATE_TOTAL_PRICE":return Object(l.a)(Object(l.a)({},e),{},{totalPrice:e.totalPrice+t.payload});case"RESET_TOTAL_PRICE":return Object(l.a)(Object(l.a)({},e),{},{totalPrice:0});case"SET_PRODUCT_TO_UPDATE":return Object(l.a)(Object(l.a)({},e),{},{productToUpdate:t.payload});case"SET_NO_PRODUTS":return Object(l.a)(Object(l.a)({},e),{},{noProducts:t.payload});default:return e}},drawer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DRAWER_STATE":return Object(l.a)(Object(l.a)({},e),{},{isOpen:t.payload});default:return e}}}),Ut=function(){var e="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||At.d;return Object(At.e)(Rt,e(Object(At.a)(Ft.a)))};c.a.render(Object(p.jsx)(b.a,{store:Ut(),children:Object(p.jsx)(qt,{})}),document.getElementById("root"))}},[[493,1,2]]]);
//# sourceMappingURL=main.36889ab6.chunk.js.map