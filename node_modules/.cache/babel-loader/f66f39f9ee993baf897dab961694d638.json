{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC\\\\Desktop\\\\ShoppingProject\\\\client\\\\src\\\\components\\\\search\\\\Search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom'; // Redux\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setProductsState } from '../../store/actions'; // Material ui\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, InputBase, IconButton } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  search: {\n    display: 'flex',\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: 'whitesmoke',\n    marginRight: theme.spacing(2),\n    marginLeft: theme.spacing(2),\n    width: '348px !important',\n    // width: 'auto',\n    color: 'black',\n    margin: '10px 0px',\n    [theme.breakpoints.down('lg')]: {// width: 'auto !important',\n    } // [theme.breakpoints.down('sm')]: {\n    //   display:'none'\n    // },\n\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'right'\n  },\n  inputRoot: {\n    color: 'inherit',\n    fontSize: '13px'\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('md')]: {\n      width: '20ch'\n    }\n  },\n  sortBtn: {\n    padding: '0px 8px 8px'\n  }\n}));\n\nconst Search = () => {\n  _s();\n\n  const [searchValue, setSearchValue] = useState('');\n  const [noProducts, setNoProducts] = useState(false);\n  const cartProducts = useSelector(state => state.products.cartProducts);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const clearInput = () => {\n    setSearchValue('');\n  };\n\n  const findProducts = async () => {\n    const res = await fetch(`http://localhost:3001/product/search`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        value: searchValue\n      })\n    });\n    const {\n      products\n    } = await res.json();\n\n    if (products.length > 0) {\n      products.forEach(product => {\n        const isInCart = cartProducts.find(item => item.id === product.id);\n\n        if (isInCart) {\n          product.quantity = isInCart.amount;\n          product.isInCart = true;\n        } else {\n          product.quantity = 1;\n        }\n      });\n    } else {\n      setNoProducts(true);\n    }\n\n    history.push('/products/search');\n    dispatch(setProductsState(products));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.search,\n      id: \"stepFour\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.searchIcon,\n        children: [\"  \", /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 51\n        }, this), \"  \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(InputBase, {\n        type: \"text\",\n        value: searchValue,\n        onChange: e => setSearchValue(e.target.value),\n        placeholder: \"Search\\u2026\",\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: findProducts,\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: () => clearInput(),\n        children: [\" \", /*#__PURE__*/_jsxDEV(ClearIcon, {\n          fontSize: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 55\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 12\n    }, this)\n  }, void 0, false);\n};\n\n_s(Search, \"FtSIOTwyScifNfdK4vceegOCRnw=\", false, function () {\n  return [useSelector, useDispatch, useHistory, useStyles];\n});\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["C:/Users/מלאך גל/Desktop/ShoppingProject/client/src/components/search/Search.js"],"names":["React","useState","useHistory","useDispatch","useSelector","setProductsState","makeStyles","Button","InputBase","IconButton","SearchIcon","ClearIcon","useStyles","theme","search","display","position","borderRadius","shape","backgroundColor","marginRight","spacing","marginLeft","width","color","margin","breakpoints","down","searchIcon","padding","height","alignItems","justifyContent","inputRoot","fontSize","inputInput","paddingLeft","transition","transitions","create","up","sortBtn","Search","searchValue","setSearchValue","noProducts","setNoProducts","cartProducts","state","products","dispatch","history","classes","clearInput","findProducts","res","fetch","method","headers","body","JSON","stringify","value","json","length","forEach","product","isInCart","find","item","id","quantity","amount","push","e","target","root","input"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\n// Redux\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setProductsState } from '../../store/actions'\r\n// Material ui\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { Button, InputBase, IconButton } from '@material-ui/core'\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport ClearIcon from '@material-ui/icons/Clear'\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    search: {\r\n      display: 'flex',\r\n      position: 'relative',\r\n      borderRadius: theme.shape.borderRadius,\r\n      backgroundColor: 'whitesmoke',\r\n      marginRight: theme.spacing(2),\r\n      marginLeft: theme.spacing(2),\r\n      width: '348px !important',\r\n      // width: 'auto',\r\n      color:'black',\r\n      margin: '10px 0px',\r\n      [theme.breakpoints.down('lg')]: {\r\n        // width: 'auto !important',\r\n      },\r\n      // [theme.breakpoints.down('sm')]: {\r\n      //   display:'none'\r\n      // },\r\n    },\r\n    searchIcon: {\r\n      padding: theme.spacing(0, 2),\r\n      height: '100%',\r\n      position: 'absolute',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'right',\r\n    },\r\n    inputRoot: {\r\n      color: 'inherit',\r\n      fontSize: '13px'\r\n    },\r\n    inputInput: {\r\n      padding: theme.spacing(1, 1, 1, 0),\r\n      paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n      transition: theme.transitions.create('width'),\r\n      width: '100%',\r\n      [theme.breakpoints.up('md')]: {\r\n        width: '20ch',\r\n      },\r\n    },\r\n    sortBtn: {\r\n      padding:'0px 8px 8px'\r\n    }\r\n   \r\n    \r\n  }))\r\n\r\nconst Search = () => {\r\n    const [searchValue, setSearchValue] = useState('')\r\n    const [noProducts, setNoProducts] = useState(false)\r\n    const cartProducts = useSelector(state => state.products.cartProducts)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const classes = useStyles()\r\n  \r\n  \r\n    \r\n    const clearInput = () => {\r\n      setSearchValue('') \r\n    }\r\n  \r\n\r\n \r\n\r\n    const findProducts = async () => {\r\n      const res = await fetch(`http://localhost:3001/product/search`, { method: 'POST',\r\n      headers: {\r\n          'Content-Type':'application/json'\r\n      },\r\n      body: JSON.stringify({ value: searchValue })\r\n    })\r\n    const { products } = await res.json()\r\n    if(products.length > 0) {\r\n      products.forEach(product => {\r\n        const isInCart = cartProducts.find(item => item.id === product.id)\r\n        if(isInCart) {\r\n         product.quantity = isInCart.amount\r\n         product.isInCart = true\r\n        } else {\r\n         product.quantity = 1\r\n        }\r\n      })\r\n    } else {\r\n      setNoProducts(true)\r\n    }\r\n    history.push('/products/search')\r\n    dispatch(setProductsState(products))\r\n    }\r\n\r\n    return (\r\n        <>\r\n           <div className={classes.search} id='stepFour'>\r\n            <div className={classes.searchIcon}>  <SearchIcon />  </div>\r\n        \r\n            <InputBase\r\n              type='text'\r\n              value={searchValue}\r\n              onChange={e =>  setSearchValue(e.target.value)}\r\n              placeholder=\"Search…\"\r\n              classes={{\r\n                root: classes.inputRoot,\r\n                input: classes.inputInput,\r\n              }}\r\n            />\r\n            <Button onClick={findProducts}>Search</Button>\r\n           <IconButton onClick={() => clearInput() }> <ClearIcon fontSize=\"small\"/> </IconButton> \r\n           \r\n          </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Search\r\n"]},"metadata":{},"sourceType":"module"}