{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC\\\\Desktop\\\\ShoppingProject\\\\client\\\\src\\\\components\\\\home\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react'; // Redux\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setVacationsState } from '../../store/actions'; // Components\n\nimport NewUserModal from './newUserModal/NewUserModal';\nimport EditModal from './editModal/EditModal';\nimport AddVacationModal from './addVacationModal/AddVacationModal';\nimport DeleteVacationModal from './deletevacation/DeleteVacationModal';\nimport VacationCard from '../vacationCard/VacationCard'; // Material ui components\n\nimport { Grid, Fab, Grow, InputBase } from '@material-ui/core';\nimport { makeStyles, StylesProvider } from '@material-ui/core/styles'; // Material ui icons\n\nimport AddIcon from '@material-ui/icons/Add'; // React toastify \n\nimport { ToastContainer, toast, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css'; // Intro js\n\nimport { Steps } from 'intro.js-react';\nimport 'intro.js/introjs.css'; // Css\n\nimport './style.css'; // material ui style\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n    margin: '30px'\n  },\n  previewcard: {\n    width: '300px',\n    height: '340px',\n    margin: 'auto'\n  },\n  media: {\n    height: '400px',\n    width: '550px',\n    paddingTop: '56.25%'\n  },\n  previewmedia: {\n    width: '300px',\n    height: '200px'\n  },\n  fab: {\n    position: 'fixed',\n    bottom: '10px',\n    left: '75%',\n    whiteSpace: 'nowrap',\n    zIndex: '50px',\n    borderRadius: '20px',\n    backgroundColor: 'lightblue'\n  },\n  follow: {\n    textAlign: 'right'\n  },\n  card: {\n    backgroundImage: 'linear-gradient(#e6ecff, #99b3ff, #ffcccc)'\n  },\n  title: {\n    fontWeight: '600',\n    fontSize: '16px'\n  },\n  divider: {\n    margin: '15px 0px'\n  }\n}));\n\nconst Home = () => {\n  _s();\n\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('user'));\n  const dispatch = useDispatch();\n  const vacations = useSelector(state => state.vacations.data);\n  const [isAdmin, setIsAdmin] = useState(user ? user.admin : null);\n  const [followSets, setfollowSets] = useState(false);\n  const [editModalOpen, setEditModalOpen] = useState(false);\n  const [vacationToEdit, setVacationToEdit] = useState('');\n  const [addVacationModalOpen, setAddVacationModalOpen] = useState(false);\n  const [deleteVacationModalOpen, setDeleteVacationModalOpen] = useState(false);\n  const [vacationToDelete, setVacationToDelete] = useState('');\n  const [vacationToDeleteId, setVacationToDeleteId] = useState(''); // Intro js states\n\n  const [firstEntry, setFirstEntry] = useState(false);\n  const [stepsEnabled, setStepsEnabled] = useState(false);\n  const [initialStep, setInitialStep] = useState(0);\n  const [steps, setSteps] = useState([{\n    element: '#stepOne',\n    intro: 'Take a look on the vacation we offer ðŸ¥³',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: '#stepTwo',\n    intro: 'In each card you are able to see all the details about the vacation ðŸ¥³',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: '#stepThree',\n    intro: 'Start following vacations to get them on top of your page ðŸ˜Ž',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: '#stepFour',\n    intro: 'Try to serach for your dreamy vacation, use the \"search by\" tab to take more specific search ðŸ”',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }]);\n\n  const successToast = message => {\n    toast(message, {\n      draggable: true,\n      position: toast.POSITION.BOTTOM_RIGHT,\n      transition: Zoom,\n      autoClose: 2000\n    });\n  }; // Delete vacation \n\n\n  const deleteVacation = async (id, destination) => {\n    try {\n      setVacationToDeleteId(id);\n      setVacationToDelete(destination);\n      setDeleteVacationModalOpen(true);\n    } catch (error) {\n      console.log(error);\n    }\n  }; // Get all the vacations\n\n\n  const getVacations = async () => {\n    try {\n      const res = await fetch('https://vacationweb.herokuapp.com/vacation');\n      const {\n        vacations\n      } = await res.json();\n      vacations.forEach(vacation => Boolean(vacation.Follows.find(follow => Number(follow.UserId) === Number(user.id))) ? vacation.isFollow = true : vacation.isFollow = false);\n      vacations.sort((x, y) => {\n        if (x.isFollow === y.isFollow) return 0;\n        if (x.isFollow) return -1;\n        if (y.isFollow) return 1;\n        return 0;\n      });\n      dispatch(setVacationsState(vacations));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const sortVacations = () => {\n    vacations.forEach(vacation => Boolean(vacation.Follows.find(follow => Number(follow.UserId) === Number(user.id))) ? vacation.isFollow = true : vacation.isFollow = false);\n    vacations.sort((x, y) => {\n      if (x.isFollow === y.isFollow) return 0;\n      if (x.isFollow) return -1;\n      if (y.isFollow) return 1;\n      return 0;\n    });\n  }; // Set follow state\n\n\n  const setFollow = async (VacationId, isFollow) => {\n    try {\n      console.log(vacations);\n\n      if (!isFollow) {\n        // if the user not following - make follow\n        const response = await fetch('https://vacationweb.herokuapp.com/follow', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            VacationId,\n            UserId: user.id\n          })\n        });\n        const {\n          follow\n        } = await response.json();\n\n        if (follow) {\n          const vacation = vacations.find(vacation => vacation.id === VacationId);\n          vacation.isFollow = true;\n          vacation.Follows.push({\n            UserId: user.id,\n            VacationId\n          });\n          sortVacations();\n          dispatch(setVacationsState(vacations));\n          successToast('Follow Added! ');\n        }\n      } else {\n        const response = await fetch('https://vacationweb.herokuapp.com/follow/unfollow', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            VacationId,\n            UserId: user.id\n          })\n        });\n        const {\n          follow\n        } = await response.json();\n\n        if (follow) {\n          const vacation = vacations.find(vacation => vacation.id === VacationId);\n          vacation.isFollow = false;\n          vacation.Follows = vacation.Follows.filter(follow => !(follow.UserId === user.id && follow.VacationId === VacationId));\n          sortVacations();\n          dispatch(setVacationsState(vacations));\n          successToast('Follow Removed! ');\n        }\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }; // Edit vacation\n\n\n  const editVacation = id => {\n    setVacationToEdit(id);\n    setEditModalOpen(true);\n  }; // intro js functions\n\n\n  const onExit = () => {\n    setStepsEnabled(false);\n    setFirstEntry(false);\n  }; // Trigger on component load\n\n\n  useEffect(() => {\n    getVacations();\n\n    if (user.newUser) {\n      setFirstEntry(true);\n      delete user['newUser'];\n      localStorage.setItem('user', JSON.stringify(user));\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [firstEntry ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(NewUserModal, {\n        stepsEnabled: stepsEnabled,\n        setStepsEnabled: setStepsEnabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Steps, {\n        enabled: stepsEnabled,\n        steps: steps,\n        initialStep: initialStep,\n        onExit: onExit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true) : null, /*#__PURE__*/_jsxDEV(StylesProvider, {\n      injectFirst: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [vacations ? vacations.length !== 0 ? vacations.map(vacation => /*#__PURE__*/_jsxDEV(Grow, {\n            in: true,\n            timeout: 700,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 11,\n              lg: 5,\n              className: classes.root,\n              children: /*#__PURE__*/_jsxDEV(VacationCard, {\n                vacation: vacation,\n                editVacation: editVacation,\n                deleteVacation: deleteVacation,\n                setFollow: setFollow,\n                isAdmin: isAdmin\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)\n          }, vacation.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 17\n          }, this)) : null : null, user.admin && /*#__PURE__*/_jsxDEV(Fab, {\n            color: \"primary\",\n            className: classes.fab,\n            onClick: () => setAddVacationModalOpen(true),\n            title: \"Add new vacation\",\n            children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 28\n          }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), addVacationModalOpen && /*#__PURE__*/_jsxDEV(AddVacationModal, {\n            addVacationModalOpen: addVacationModalOpen,\n            setAddVacationModalOpen: setAddVacationModalOpen\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 39\n          }, this), vacationToEdit && /*#__PURE__*/_jsxDEV(EditModal, {\n            setEditModalOpen: setEditModalOpen,\n            editModalOpen: editModalOpen,\n            vacationToEdit: vacationToEdit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 33\n          }, this), deleteVacationModalOpen && /*#__PURE__*/_jsxDEV(DeleteVacationModal, {\n            deleteVacationModalOpen: deleteVacationModalOpen,\n            setDeleteVacationModalOpen: setDeleteVacationModalOpen,\n            vacationName: vacationToDelete,\n            id: vacationToDeleteId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 42\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Home, \"5bbOVr61bvN7HVI2ZAAQxtRXs5U=\", false, function () {\n  return [useStyles, useDispatch, useSelector];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/×ž×œ××š ×’×œ/Desktop/ShoppingProject/client/src/components/home/Home.js"],"names":["React","useEffect","useState","useDispatch","useSelector","setVacationsState","NewUserModal","EditModal","AddVacationModal","DeleteVacationModal","VacationCard","Grid","Fab","Grow","InputBase","makeStyles","StylesProvider","AddIcon","ToastContainer","toast","Zoom","Steps","useStyles","theme","root","display","justifyContent","margin","previewcard","width","height","media","paddingTop","previewmedia","fab","position","bottom","left","whiteSpace","zIndex","borderRadius","backgroundColor","follow","textAlign","card","backgroundImage","title","fontWeight","fontSize","divider","Home","classes","user","JSON","parse","localStorage","getItem","dispatch","vacations","state","data","isAdmin","setIsAdmin","admin","followSets","setfollowSets","editModalOpen","setEditModalOpen","vacationToEdit","setVacationToEdit","addVacationModalOpen","setAddVacationModalOpen","deleteVacationModalOpen","setDeleteVacationModalOpen","vacationToDelete","setVacationToDelete","vacationToDeleteId","setVacationToDeleteId","firstEntry","setFirstEntry","stepsEnabled","setStepsEnabled","initialStep","setInitialStep","steps","setSteps","element","intro","tooltipClass","successToast","message","draggable","POSITION","BOTTOM_RIGHT","transition","autoClose","deleteVacation","id","destination","error","console","log","getVacations","res","fetch","json","forEach","vacation","Boolean","Follows","find","Number","UserId","isFollow","sort","x","y","err","sortVacations","setFollow","VacationId","response","method","headers","body","stringify","push","filter","editVacation","onExit","newUser","setItem","length","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\n// Redux\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setVacationsState } from '../../store/actions'\r\n// Components\r\nimport NewUserModal from './newUserModal/NewUserModal'\r\nimport EditModal from './editModal/EditModal'\r\nimport AddVacationModal from './addVacationModal/AddVacationModal'\r\nimport DeleteVacationModal from './deletevacation/DeleteVacationModal'\r\nimport VacationCard from '../vacationCard/VacationCard'\r\n// Material ui components\r\nimport { Grid, Fab, Grow, InputBase } from '@material-ui/core'\r\nimport { makeStyles, StylesProvider } from '@material-ui/core/styles'\r\n// Material ui icons\r\nimport AddIcon  from '@material-ui/icons/Add'\r\n// React toastify \r\nimport { ToastContainer, toast, Zoom } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n// Intro js\r\nimport { Steps } from 'intro.js-react'\r\nimport 'intro.js/introjs.css'\r\n// Css\r\nimport './style.css'\r\n\r\n// material ui style\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display:'flex',\r\n    justifyContent:'center',\r\n    margin:'30px'\r\n  },\r\n  previewcard:{\r\n    width:'300px',\r\n    height:'340px',\r\n    margin:'auto'\r\n  },\r\n  media: {\r\n    height: '400px',\r\n    width:'550px',\r\n    paddingTop: '56.25%',\r\n  },\r\n  previewmedia: {\r\n    width:'300px',\r\n    height:'200px'\r\n  },\r\n  fab: {\r\n    position:'fixed',\r\n    bottom: '10px',\r\n    left: '75%',\r\n    whiteSpace: 'nowrap',\r\n    zIndex: '50px',\r\n    borderRadius:'20px',\r\n    backgroundColor:'lightblue'\r\n  },\r\n  follow:{\r\n    textAlign:'right'\r\n  },\r\n  card: {\r\n    backgroundImage:'linear-gradient(#e6ecff, #99b3ff, #ffcccc)'\r\n  },\r\n  title: { \r\n    fontWeight:'600',\r\n    fontSize:'16px'\r\n  },\r\n  divider: {\r\n    margin:'15px 0px'\r\n  },\r\n}))\r\n\r\n const Home = () => {\r\n  const classes = useStyles()\r\n  const user = JSON.parse(localStorage.getItem('user'))\r\n  const dispatch = useDispatch()\r\n  const vacations = useSelector(state => state.vacations.data)\r\n  const [isAdmin, setIsAdmin] = useState(user ? user.admin : null)\r\n  const [followSets, setfollowSets] = useState(false)\r\n  const [editModalOpen, setEditModalOpen] = useState(false)\r\n  const [vacationToEdit, setVacationToEdit] = useState('')\r\n  const [addVacationModalOpen, setAddVacationModalOpen] = useState(false)\r\n  const [deleteVacationModalOpen, setDeleteVacationModalOpen] = useState(false)\r\n  const [vacationToDelete, setVacationToDelete] = useState('')\r\n  const [vacationToDeleteId, setVacationToDeleteId] = useState('')\r\n  // Intro js states\r\n  const [firstEntry, setFirstEntry] = useState(false)\r\n  const [stepsEnabled, setStepsEnabled] = useState(false)\r\n  const [initialStep, setInitialStep] = useState(0)\r\n  const [steps, setSteps] = useState([\r\n      { element:'#stepOne', intro: 'Take a look on the vacation we offer ðŸ¥³', position: 'left', tooltipClass: 'myTooltipClass' },\r\n      { element:'#stepTwo', intro: 'In each card you are able to see all the details about the vacation ðŸ¥³', position: 'left', tooltipClass: 'myTooltipClass' },\r\n      { element:'#stepThree', intro:'Start following vacations to get them on top of your page ðŸ˜Ž', position: 'left', tooltipClass: 'myTooltipClass' },\r\n      { element:'#stepFour', intro: 'Try to serach for your dreamy vacation, use the \"search by\" tab to take more specific search ðŸ”', position: 'left', tooltipClass: 'myTooltipClass' },\r\n  ])\r\n\r\n\r\n\r\n const successToast = (message) => {\r\n   toast(message, { \r\n    draggable: true, \r\n    position: toast.POSITION.BOTTOM_RIGHT,\r\n    transition: Zoom,\r\n    autoClose: 2000\r\n   })\r\n }\r\n  // Delete vacation \r\n  const deleteVacation = async (id,destination) => {\r\n    try {\r\n      setVacationToDeleteId(id)\r\n      setVacationToDelete(destination)\r\n      setDeleteVacationModalOpen(true)\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n \r\n  // Get all the vacations\r\n  const getVacations = async () => {\r\n    try {\r\n      const res = await fetch('https://vacationweb.herokuapp.com/vacation')\r\n      const { vacations } = await res.json()\r\n      vacations.forEach(vacation => Boolean(vacation.Follows.find(follow => Number(follow.UserId) === Number(user.id))) ? vacation.isFollow = true : vacation.isFollow = false)\r\n      vacations.sort((x, y) => {\r\n        if (x.isFollow === y.isFollow) return 0\r\n        if (x.isFollow)  return -1\r\n        if (y.isFollow) return 1\r\n        return 0\r\n      })\r\n      dispatch(setVacationsState(vacations))\r\n    } catch(err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  const sortVacations = () => {\r\n    vacations.forEach(vacation => Boolean(vacation.Follows.find(follow => Number(follow.UserId) === Number(user.id))) ? vacation.isFollow = true : vacation.isFollow = false)\r\n    vacations.sort((x, y) => {\r\n      if (x.isFollow === y.isFollow) return 0\r\n      if (x.isFollow)  return -1\r\n      if (y.isFollow) return 1\r\n      return 0\r\n    })\r\n  }\r\n\r\n  // Set follow state\r\n  const setFollow = async (VacationId, isFollow) => {\r\n    try {\r\n      console.log(vacations)\r\n        if(!isFollow) { // if the user not following - make follow\r\n          const response = await fetch('https://vacationweb.herokuapp.com/follow', { \r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type':'application/json'\r\n            },\r\n            body: JSON.stringify({ VacationId, UserId:user.id })\r\n            })\r\n            const { follow } = await response.json()\r\n            if(follow) {\r\n              const vacation = vacations.find(vacation => vacation.id === VacationId)\r\n              vacation.isFollow = true\r\n              vacation.Follows.push({ UserId: user.id, VacationId })\r\n              sortVacations()\r\n              dispatch(setVacationsState(vacations))\r\n              successToast('Follow Added! ')\r\n             \r\n            }\r\n        } else {\r\n          const response = await fetch('https://vacationweb.herokuapp.com/follow/unfollow', { \r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type':'application/json'\r\n            },\r\n            body: JSON.stringify({ VacationId, UserId:user.id })\r\n            })\r\n            const { follow } = await response.json()\r\n            if(follow) {\r\n              const vacation = vacations.find(vacation => vacation.id === VacationId)\r\n              vacation.isFollow = false\r\n              vacation.Follows = vacation.Follows.filter(follow => !(follow.UserId ===  user.id && follow.VacationId === VacationId))\r\n              sortVacations()\r\n              dispatch(setVacationsState(vacations))\r\n              successToast('Follow Removed! ')\r\n            \r\n            }\r\n        }\r\n      } catch(err) {\r\n        console.log(err)\r\n      }\r\n  }\r\n\r\n  // Edit vacation\r\n  const editVacation = (id) => {\r\n    setVacationToEdit(id)\r\n    setEditModalOpen(true)\r\n  }\r\n \r\n  // intro js functions\r\n  const onExit = () => {\r\n    setStepsEnabled(false)\r\n    setFirstEntry(false)\r\n  }\r\n\r\n  // Trigger on component load\r\n  useEffect(() => {\r\n   getVacations()\r\n   if (user.newUser) {\r\n    setFirstEntry(true)\r\n    delete user['newUser']\r\n    localStorage.setItem('user', JSON.stringify(user))\r\n   }\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n \r\n      {firstEntry ? \r\n      <>\r\n      <NewUserModal stepsEnabled={stepsEnabled} setStepsEnabled={setStepsEnabled}/>\r\n      <Steps enabled={stepsEnabled} steps={steps} initialStep={initialStep} onExit={onExit}/>\r\n     </>\r\n      : null}\r\n      <StylesProvider injectFirst>\r\n        <div className=\"container\">\r\n          <Grid container>\r\n              {vacations ? \r\n              vacations.length !== 0 ?  vacations.map(vacation => (\r\n                <Grow in={true}  timeout={700} key={vacation.id}>\r\n                <Grid item xs={11} lg={5}  className={classes.root}  >\r\n                  <VacationCard vacation={vacation} editVacation={editVacation} \r\n                  deleteVacation={deleteVacation} setFollow={setFollow} isAdmin={isAdmin} />\r\n                </Grid> \r\n                </Grow>\r\n              )): null :  null  }\r\n            \r\n          \r\n            {/* Fab */}\r\n            {user.admin && <Fab color=\"primary\"  className={classes.fab} onClick={() => setAddVacationModalOpen(true)} title=\"Add new vacation\"> \r\n                <AddIcon />\r\n              </Fab> } \r\n            {/* ToastContainer */}\r\n            <ToastContainer /> \r\n            {/* Modals */}\r\n            { addVacationModalOpen && <AddVacationModal addVacationModalOpen={addVacationModalOpen} setAddVacationModalOpen={setAddVacationModalOpen} />}\r\n            { vacationToEdit && <EditModal setEditModalOpen={setEditModalOpen} editModalOpen={editModalOpen} vacationToEdit={vacationToEdit}/> }\r\n            { deleteVacationModalOpen && <DeleteVacationModal deleteVacationModalOpen={deleteVacationModalOpen} setDeleteVacationModalOpen={setDeleteVacationModalOpen} vacationName={vacationToDelete} id={vacationToDeleteId}/> }\r\n          </Grid>\r\n        </div>\r\n    </StylesProvider>\r\n  </>\r\n  )\r\n}\r\nexport default Home\r\n"]},"metadata":{},"sourceType":"module"}