{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC\\\\Desktop\\\\ShoppingProject\\\\client\\\\src\\\\components\\\\sideBarCart\\\\SideBarCart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useLocation, Link } from 'react-router-dom'; // Redux\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setCartProducts, updateTotalPrice, resetTotalPrice, setProductsState, setDrawerState, setProductToUpdate } from '../../store/actions'; // Formik\n\nimport { Formik } from 'formik';\nimport * as Yup from 'yup'; // Cloudinary\n\nimport { Image } from 'cloudinary-react'; // Components\n\nimport Search from '../search/Search'; // Material ui\n\nimport { TextField, Button, Divider, Select, MenuItem, IconButton, Drawer, AppBar, Input, Toolbar, Typography, useMediaQuery } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ImageIcon from '@material-ui/icons/Image';\nimport AddIcon from '@material-ui/icons/Add'; // React toastify \n\nimport { ToastContainer, toast, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css'; // Bootstrap\n\nimport { Nav, Navbar } from 'react-bootstrap'; // Css\n\nimport './style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst drawerWidth = 300;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    fontFamily: 'roboto'\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    backgroundColor: 'white',\n    color: 'black'\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    marginBottom: '20px',\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  title: {\n    color: 'black',\n    display: 'inline'\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  hide: {\n    display: 'none'\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    width: drawerWidth\n  },\n  drawerHeader: {\n    display: 'flex',\n    justifyContent: 'space-around',\n    marginTop: '10px'\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    marginLeft: -drawerWidth\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginLeft: 0\n  }\n}));\n\nconst SideBarCart = () => {\n  _s();\n\n  const [isDelete, setIsDelete] = useState(true);\n  const [imageName, setImageName] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [disableButton, setDisableButton] = useState(false);\n  const [categoryArr, setCategoryArr] = useState([]);\n  const [initialValues, setInitialValues] = useState({\n    name: '',\n    price: '',\n    image: '',\n    category: ''\n  });\n  const [mobileView, setMobileView] = useState(false);\n  const cartProducts = useSelector(state => state.products.cartProducts);\n  const totalPrice = useSelector(state => state.products.totalPrice);\n  const isAdmin = useSelector(state => state.users.isAdmin);\n  const productToUpdate = useSelector(state => state.products.productToUpdate);\n  const products = useSelector(state => state.products.data);\n  const isOpen = useSelector(state => state.drawer.isOpen);\n  const cart = JSON.parse(localStorage.getItem('availableCart'));\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const location = useLocation(); // Form validation\n\n  const validationSchema = Yup.object().shape({\n    name: Yup.string().required('name is required!'),\n    price: Yup.string().required('price is required!'),\n    image: Yup.string().required('image is required!'),\n    category: Yup.string().required('category is required!')\n  });\n\n  const errorHelper = (formik, values) => ({\n    error: formik.errors[values] && formik.touched[values] ? true : false,\n    helperText: formik.errors[values] && formik.touched[values] ? formik.errors[values] : null\n  }); // Handle image change  \n\n\n  const handleChangeImage = (e, setFieldValue) => {\n    const reader = new FileReader();\n    setFieldValue('image', e.target.files[0]);\n\n    if (e.target.files.length === 0) {\n      setImageName('');\n      setFieldValue('image', '');\n    } else {\n      reader.readAsDataURL(e.target.files[0]);\n\n      reader.onloadend = () => {\n        setFieldValue('image', reader.result);\n      };\n\n      setImageName(e.target.files[0].name);\n    }\n  }; // Handle drawer state\n\n\n  const handleDrawerOpen = () => dispatch(setDrawerState(true));\n\n  const handleDrawerClose = () => dispatch(setDrawerState(false)); // Toastify\n\n\n  const successToast = message => {\n    toast(message, {\n      draggable: true,\n      position: toast.POSITION.BOTTOM_RIGHT,\n      transition: Zoom,\n      autoClose: 2000\n    });\n  }; // Clear the cart\n\n\n  const clearCart = async () => {\n    const res = await fetch('/cart_item/cart', {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: cart.id\n      })\n    });\n    const {\n      success\n    } = await res.json();\n\n    if (success) {\n      const productsArr = products;\n      productsArr.forEach(product => {\n        product.quantity = 1;\n        product.isInCart = false;\n      });\n      dispatch(setCartProducts([]));\n      dispatch(resetTotalPrice());\n      successToast('Cart cleared! 😀');\n    }\n  }; // Remove specific item from the cart\n\n\n  const removeFromCart = async id => {\n    const res = await fetch('/cart_item', {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        CartId: cart.id,\n        ProductId: id\n      })\n    });\n    const {\n      success\n    } = await res.json();\n\n    if (success) {\n      const productsArr = products;\n      const deletedItemInProducts = productsArr.find(item => item.id === id);\n\n      if (deletedItemInProducts) {\n        deletedItemInProducts.isInCart = false;\n        deletedItemInProducts.quantity = 1;\n        dispatch(setProductsState(productsArr));\n      }\n\n      const deletedItemInCart = cartProducts.find(item => item.id === id);\n      const cartProductsArr = cartProducts.filter(item => item.id !== id);\n      dispatch(setCartProducts(cartProductsArr));\n      dispatch(updateTotalPrice(-deletedItemInCart.totalPrice));\n      successToast('Product removed! 😀');\n    }\n  }; // Get all the products in  the cart and set them to the cart products\n\n\n  const getProducts = async () => {\n    const res = await fetch(`/cart/${cart.id}`);\n    const data = await res.json();\n    const itemsArr = [];\n    let count = 0;\n    data.cart.CartItems.forEach(item => {\n      const cartItem = {\n        id: item.ProductId,\n        name: item.Product.name,\n        singlePrice: item.Product.price,\n        totalPrice: item.amount * item.Product.price,\n        amount: item.amount,\n        image: item.Product.image\n      };\n      count += cartItem.totalPrice;\n      itemsArr.push(cartItem);\n    });\n\n    if (count !== totalPrice) {\n      dispatch(updateTotalPrice(count));\n    }\n\n    dispatch(setCartProducts(itemsArr));\n  }; // Get all the categories \n\n\n  const getCategories = async () => {\n    const res = await fetch('/category');\n    const {\n      categories\n    } = await res.json();\n    const categoryArr = [];\n    categories.forEach(category => categoryArr.push({\n      name: category.name,\n      id: category.id\n    }));\n    setCategoryArr(categoryArr);\n  }; // Admin functions\n  // Update product\n\n\n  const updateProduct = async values => {\n    setDisableButton(true);\n    const CategoryId = categoryArr.find(category => category.name === values.category).id;\n    const res = await fetch('/product', {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ ...values,\n        imageName,\n        CategoryId,\n        id: productToUpdate.id\n      })\n    });\n    const {\n      product\n    } = await res.json();\n    const productsArr = products;\n    const findIndex = productsArr.findIndex(item => item.id === product.id);\n    productsArr[findIndex] = product;\n    dispatch(setProductsState(productsArr));\n    successToast('Product Updated! 😀');\n    setDisableButton(false);\n  }; // Add product\n\n\n  const addProduct = async values => {\n    setDisableButton(true);\n    const CategoryId = categoryArr.find(category => category.name === values.category).id;\n    const res = await fetch('/product', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ ...values,\n        imageName,\n        CategoryId\n      })\n    });\n    const {\n      product\n    } = await res.json();\n    console.log(product);\n\n    if (`/products/${CategoryId}` === location.pathname) {\n      const cartProductsArr = products;\n      cartProductsArr.push({ ...product,\n        quanity: 1\n      });\n      dispatch(setProductsState(cartProductsArr));\n      successToast('Product Added! 😀');\n      setDisableButton(false);\n    }\n  }; // Change the form from update to add\n\n\n  const changeStatetoAdd = () => {\n    dispatch(setProductToUpdate({}));\n    setInitialValues({\n      name: '',\n      price: '',\n      image: '',\n      category: ''\n    });\n    setImageName('');\n  }; // Set the initial values to the update form\n\n\n  useEffect(() => {\n    if (productToUpdate.name) {\n      const {\n        name,\n        price,\n        image,\n        Category,\n        imageName\n      } = productToUpdate;\n      setInitialValues({\n        name,\n        price,\n        image,\n        category: Category.name\n      });\n      setImageName(imageName);\n      setSelectedCategory(Category.name);\n    }\n  }, [productToUpdate]);\n  useEffect(() => {\n    if (isAdmin) {\n      getCategories();\n    } else {\n      getProducts();\n    }\n  }, [isAdmin]); // Breakpoints\n  // useEffect(() => {\n  //   const setResponsiveness = () => window.innerWidth < 900 ? setMobileView(true) : setMobileView(false)\n  //   setResponsiveness();\n  //   window.addEventListener(\"resize\", () => setResponsiveness());\n  // }, []);\n  // disable the delete product option on the payment page\n\n  useEffect(() => {\n    location.pathname === '/payment' ? setIsDelete(false) : setIsDelete(true);\n  }, [location.pathname]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"fixed\",\n      className: clsx(classes.appBar, {\n        [classes.appBarShift]: isOpen\n      }),\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: /*#__PURE__*/_jsxDEV(Navbar, {\n          bg: \"white\",\n          expand: \"xl\",\n          className: \"navbar\",\n          children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n            className: \"navbar_brand\",\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              color: \"inherit\",\n              onClick: handleDrawerOpen,\n              edge: \"start\",\n              className: clsx(classes.menuButton, isOpen && classes.hide),\n              children: /*#__PURE__*/_jsxDEV(ShoppingCartIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/products/1\",\n              style: {\n                textDecoration: 'none'\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.title,\n                variant: \"h6\",\n                noWrap: true,\n                children: \" ShoppingApp \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Navbar.Toggle, {\n            \"aria-controls\": \"basic-navbar-nav\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n            className: \"navbar_collapse\",\n            children: /*#__PURE__*/_jsxDEV(Nav, {\n              className: \"mr-auto w-100 d-flex justify-content-around\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products/1\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: isOpen ? \"link_desc_small\" : \"link_desc\",\n                    children: \"Dairy and eggs\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 31\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products/2\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                id: \"stepFive\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: isOpen ? \"link_desc_small\" : \"link_desc\",\n                    children: \"Meat\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 31\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products/3\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: isOpen ? \"link_desc_small\" : \"link_desc\",\n                    children: \"Fruits And Vegetables\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 31\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products/4\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: isOpen ? \"link_desc_small\" : \"link_desc\",\n                    children: \"Drinks and alcohol\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 370,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 31\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 29\n              }, this), !isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.searchLink,\n                children: [\" \", /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 73\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 36\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/logout\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: [/*#__PURE__*/_jsxDEV(ExitToAppIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 33\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: isOpen ? \"link_desc_small\" : \"link_desc\",\n                    children: \"Logout\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 50\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 31\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n      className: classes.drawer,\n      variant: \"persistent\",\n      anchor: \"left\",\n      open: isOpen,\n      classes: {\n        paper: classes.drawerPaper\n      },\n      children: !isAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.drawerHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"cart_header\",\n            id: \"stepThree\",\n            children: \"Your Cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              title: \"close sidebar\",\n              onClick: handleDrawerClose,\n              children: /*#__PURE__*/_jsxDEV(ChevronLeftIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary_card\",\n          children: cartProducts.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card_item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Image, {\n                className: \"product_img\",\n                cloudName: \"malachcloud\",\n                src: product.image,\n                width: \"70\",\n                height: \"40\",\n                crop: \"scale\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product_info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: [\"quanity: \", product.amount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: [\"total price: \", product.totalPrice, \"$\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: isDelete && /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: () => removeFromCart(product.id),\n                children: [\" \", /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 87\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 31\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this)]\n          }, product.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 9\n        }, this), totalPrice === 0 ? /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"m-2\",\n          children: \"Your cart is empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"ml-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"total_price_span\",\n            children: \" Total price: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 34\n          }, this), \" $\", totalPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-group\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/payment\",\n            style: {\n              textDecoration: 'none',\n              pointerEvents: totalPrice === 0 || !isDelete ? 'none' : ''\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"primary\",\n              className: \"m-2\",\n              disabled: totalPrice === 0 || !isDelete,\n              id: \"stepSix\",\n              children: \" Payment page \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"secondary\",\n            onClick: clearCart,\n            className: \"m-2\",\n            disabled: totalPrice === 0 || !isDelete,\n            children: \" Clear cart \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin_panel_header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"admin_panel_h1\",\n            children: \"Admin panel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              title: \"add product\",\n              onClick: () => changeStatetoAdd(),\n              children: [\"  \", /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 81\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              title: \"close sidebar\",\n              onClick: handleDrawerClose,\n              children: /*#__PURE__*/_jsxDEV(ChevronLeftIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"action_header\",\n            children: productToUpdate.name ? 'Update product' : 'Add product'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Formik, {\n            initialValues: initialValues,\n            validationSchema: validationSchema,\n            enableReinitialize: true,\n            children: props => /*#__PURE__*/_jsxDEV(\"form\", {\n              style: {\n                textAlign: 'center',\n                margin: '10px'\n              },\n              onSubmit: props.handleSubmit,\n              autoComplete: \"off\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(TextField, {\n                  name: \"name\",\n                  margin: \"normal\",\n                  label: \"name\",\n                  variant: \"outlined\",\n                  fullWidth: true,\n                  ...props.getFieldProps('name'),\n                  ...errorHelper(props, 'name')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  name: \"price\",\n                  margin: \"normal\",\n                  label: \"price\",\n                  variant: \"outlined\",\n                  fullWidth: true,\n                  ...props.getFieldProps('price'),\n                  ...errorHelper(props, 'price')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  defaultValue: \"\",\n                  value: selectedCategory,\n                  onChange: e => setSelectedCategory(e.target.value),\n                  name: \"category\",\n                  fullWidth: true,\n                  ...props.getFieldProps('category'),\n                  ...errorHelper(props, 'category'),\n                  children: categoryArr.map(category => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: category.name,\n                    children: category.name\n                  }, category.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 462,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  id: \"file\",\n                  type: \"file\",\n                  name: \"image\",\n                  onChange: e => handleChangeImage(e, props.setFieldValue),\n                  hidden: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 466,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  style: {\n                    display: 'block',\n                    margin: '10px 0px'\n                  },\n                  color: \"primary\",\n                  variant: \"outlined\",\n                  children: [/*#__PURE__*/_jsxDEV(ImageIcon, {\n                    className: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 467,\n                    columnNumber: 110\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"file\",\n                    children: [imageName ? `${imageName} UPLOADED` : ' Product image', \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 467,\n                    columnNumber: 135\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 21\n                }, this), props.errors.image && props.touched.image ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"error\",\n                  children: props.errors.image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 66\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                disabled: props.values.name && props.values.price && props.values.image && props.values.category && !disableButton ? false : true,\n                className: \"my-3\",\n                variant: \"contained\",\n                color: \"primary\",\n                onClick: productToUpdate.name ? () => updateProduct(props.values) : () => addProduct(props.values),\n                size: \"large\",\n                fullWidth: true,\n                children: [\" \", productToUpdate.name ? 'Update product' : 'Add product', \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: clsx(classes.content, {\n        [classes.contentShift]: isOpen\n      }),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.drawerHeader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      draggable: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 332,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SideBarCart, \"wzhUQWzAd2453Ugd1Vkhae14b3c=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useStyles, useDispatch, useLocation];\n});\n\n_c = SideBarCart;\nexport default SideBarCart;\n\nvar _c;\n\n$RefreshReg$(_c, \"SideBarCart\");","map":{"version":3,"sources":["C:/Users/מלאך גל/Desktop/ShoppingProject/client/src/components/sideBarCart/SideBarCart.js"],"names":["React","useState","useEffect","useLocation","Link","useDispatch","useSelector","setCartProducts","updateTotalPrice","resetTotalPrice","setProductsState","setDrawerState","setProductToUpdate","Formik","Yup","Image","Search","TextField","Button","Divider","Select","MenuItem","IconButton","Drawer","AppBar","Input","Toolbar","Typography","useMediaQuery","clsx","makeStyles","useTheme","ExitToAppIcon","CloseIcon","ShoppingCartIcon","ChevronLeftIcon","ImageIcon","AddIcon","ToastContainer","toast","Zoom","Nav","Navbar","drawerWidth","useStyles","theme","root","display","fontFamily","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","backgroundColor","color","appBarShift","width","marginLeft","marginBottom","easeOut","enteringScreen","title","menuButton","marginRight","spacing","hide","drawer","flexShrink","drawerPaper","drawerHeader","justifyContent","marginTop","content","flexGrow","padding","contentShift","SideBarCart","isDelete","setIsDelete","imageName","setImageName","selectedCategory","setSelectedCategory","disableButton","setDisableButton","categoryArr","setCategoryArr","initialValues","setInitialValues","name","price","image","category","mobileView","setMobileView","cartProducts","state","products","totalPrice","isAdmin","users","productToUpdate","data","isOpen","cart","JSON","parse","localStorage","getItem","classes","dispatch","location","validationSchema","object","shape","string","required","errorHelper","formik","values","error","errors","touched","helperText","handleChangeImage","e","setFieldValue","reader","FileReader","target","files","length","readAsDataURL","onloadend","result","handleDrawerOpen","handleDrawerClose","successToast","message","draggable","position","POSITION","BOTTOM_RIGHT","autoClose","clearCart","res","fetch","method","headers","body","stringify","id","success","json","productsArr","forEach","product","quantity","isInCart","removeFromCart","CartId","ProductId","deletedItemInProducts","find","item","deletedItemInCart","cartProductsArr","filter","getProducts","itemsArr","count","CartItems","cartItem","Product","singlePrice","amount","push","getCategories","categories","updateProduct","CategoryId","findIndex","addProduct","console","log","pathname","quanity","changeStatetoAdd","Category","textDecoration","searchLink","paper","map","pointerEvents","props","textAlign","margin","handleSubmit","getFieldProps","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,IAAtB,QAAkC,kBAAlC,C,CACA;;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,eAAT,EAA0BC,gBAA1B,EAA4CC,eAA5C,EAA6DC,gBAA7D,EAA+EC,cAA/E,EAA+FC,kBAA/F,QAAyH,qBAAzH,C,CACA;;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB,C,CACA;;AACA,SAASC,KAAT,QAAsB,kBAAtB,C,CACA;;AACA,OAAOC,MAAP,MAAmB,kBAAnB,C,CACA;;AACA,SAASC,SAAT,EAAoBC,MAApB,EAA4BC,OAA5B,EAAqCC,MAArC,EAA6CC,QAA7C,EAAuDC,UAAvD,EAAmEC,MAAnE,EAA2EC,MAA3E,EAAmFC,KAAnF,EAA0FC,OAA1F,EAAmGC,UAAnG,EAA+GC,aAA/G,QAAoI,mBAApI;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,0BAArC;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,OAAP,MAAoB,wBAApB,C,CACA;;AACA,SAASC,cAAT,EAAyBC,KAAzB,EAAgCC,IAAhC,QAA4C,gBAA5C;AACA,OAAO,uCAAP,C,CACA;;AACA,SAASC,GAAT,EAAcC,MAAd,QAA4B,iBAA5B,C,CACA;;AACA,OAAO,aAAP;;;AAEA,MAAMC,WAAW,GAAG,GAApB;AAEA,MAAMC,SAAS,GAAGd,UAAU,CAAEe,KAAD,KAAY;AACvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,OAAO,EAAE,MADL;AAEJC,IAAAA,UAAU,EAAC;AAFP,GADiC;AAKvCC,EAAAA,MAAM,EAAE;AACNC,IAAAA,UAAU,EAAEL,KAAK,CAACM,WAAN,CAAkBC,MAAlB,CAAyB,CAAC,QAAD,EAAW,OAAX,CAAzB,EAA8C;AACxDC,MAAAA,MAAM,EAAER,KAAK,CAACM,WAAN,CAAkBE,MAAlB,CAAyBC,KADuB;AAExDC,MAAAA,QAAQ,EAAEV,KAAK,CAACM,WAAN,CAAkBI,QAAlB,CAA2BC;AAFmB,KAA9C,CADN;AAKNC,IAAAA,eAAe,EAAE,OALX;AAMNC,IAAAA,KAAK,EAAC;AANA,GAL+B;AAavCC,EAAAA,WAAW,EAAE;AACXC,IAAAA,KAAK,EAAG,eAAcjB,WAAY,KADvB;AAEXkB,IAAAA,UAAU,EAAElB,WAFD;AAGXmB,IAAAA,YAAY,EAAC,MAHF;AAIXZ,IAAAA,UAAU,EAAEL,KAAK,CAACM,WAAN,CAAkBC,MAAlB,CAAyB,CAAC,QAAD,EAAW,OAAX,CAAzB,EAA8C;AACxDC,MAAAA,MAAM,EAAER,KAAK,CAACM,WAAN,CAAkBE,MAAlB,CAAyBU,OADuB;AAExDR,MAAAA,QAAQ,EAAEV,KAAK,CAACM,WAAN,CAAkBI,QAAlB,CAA2BS;AAFmB,KAA9C;AAJD,GAb0B;AAuBvCC,EAAAA,KAAK,EAAE;AACHP,IAAAA,KAAK,EAAC,OADH;AAEHX,IAAAA,OAAO,EAAC;AAFL,GAvBgC;AA2BvCmB,EAAAA,UAAU,EAAE;AACVC,IAAAA,WAAW,EAAEtB,KAAK,CAACuB,OAAN,CAAc,CAAd;AADH,GA3B2B;AA8BvCC,EAAAA,IAAI,EAAE;AACJtB,IAAAA,OAAO,EAAE;AADL,GA9BiC;AAiCvCuB,EAAAA,MAAM,EAAE;AACNV,IAAAA,KAAK,EAAEjB,WADD;AAEN4B,IAAAA,UAAU,EAAE;AAFN,GAjC+B;AAqCvCC,EAAAA,WAAW,EAAE;AACXZ,IAAAA,KAAK,EAAEjB;AADI,GArC0B;AAwCvC8B,EAAAA,YAAY,EAAE;AACZ1B,IAAAA,OAAO,EAAE,MADG;AAEZ2B,IAAAA,cAAc,EAAE,cAFJ;AAGZC,IAAAA,SAAS,EAAC;AAHE,GAxCyB;AA6CvCC,EAAAA,OAAO,EAAE;AACPC,IAAAA,QAAQ,EAAE,CADH;AAEPC,IAAAA,OAAO,EAAEjC,KAAK,CAACuB,OAAN,CAAc,CAAd,CAFF;AAGPlB,IAAAA,UAAU,EAAEL,KAAK,CAACM,WAAN,CAAkBC,MAAlB,CAAyB,QAAzB,EAAmC;AAC7CC,MAAAA,MAAM,EAAER,KAAK,CAACM,WAAN,CAAkBE,MAAlB,CAAyBC,KADY;AAE7CC,MAAAA,QAAQ,EAAEV,KAAK,CAACM,WAAN,CAAkBI,QAAlB,CAA2BC;AAFQ,KAAnC,CAHL;AAOPK,IAAAA,UAAU,EAAE,CAAClB;AAPN,GA7C8B;AAsDvCoC,EAAAA,YAAY,EAAE;AACZ7B,IAAAA,UAAU,EAAEL,KAAK,CAACM,WAAN,CAAkBC,MAAlB,CAAyB,QAAzB,EAAmC;AAC7CC,MAAAA,MAAM,EAAER,KAAK,CAACM,WAAN,CAAkBE,MAAlB,CAAyBU,OADY;AAE7CR,MAAAA,QAAQ,EAAEV,KAAK,CAACM,WAAN,CAAkBI,QAAlB,CAA2BS;AAFQ,KAAnC,CADA;AAKZH,IAAAA,UAAU,EAAE;AALA;AAtDyB,CAAZ,CAAD,CAA5B;;AA+DA,MAAMmB,WAAW,GAAG,MAAM;AAAA;;AACxB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BjF,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM,CAACkF,SAAD,EAAYC,YAAZ,IAA4BnF,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACoF,gBAAD,EAAmBC,mBAAnB,IAA0CrF,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAACsF,aAAD,EAAgBC,gBAAhB,IAAoCvF,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAACwF,WAAD,EAAcC,cAAd,IAAgCzF,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAAC0F,aAAD,EAAgBC,gBAAhB,IAAoC3F,QAAQ,CAAC;AAAC4F,IAAAA,IAAI,EAAC,EAAN;AAAUC,IAAAA,KAAK,EAAE,EAAjB;AAAqBC,IAAAA,KAAK,EAAE,EAA5B;AAAgCC,IAAAA,QAAQ,EAAE;AAA1C,GAAD,CAAlD;AACA,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BjG,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAMkG,YAAY,GAAG7F,WAAW,CAAC8F,KAAK,IAAIA,KAAK,CAACC,QAAN,CAAeF,YAAzB,CAAhC;AACA,QAAMG,UAAU,GAAGhG,WAAW,CAAC8F,KAAK,IAAIA,KAAK,CAACC,QAAN,CAAeC,UAAzB,CAA9B;AACA,QAAMC,OAAO,GAAGjG,WAAW,CAAC8F,KAAK,IAAIA,KAAK,CAACI,KAAN,CAAYD,OAAtB,CAA3B;AACA,QAAME,eAAe,GAAGnG,WAAW,CAAC8F,KAAK,IAAIA,KAAK,CAACC,QAAN,CAAeI,eAAzB,CAAnC;AACA,QAAMJ,QAAQ,GAAG/F,WAAW,CAAC8F,KAAK,IAAIA,KAAK,CAACC,QAAN,CAAeK,IAAzB,CAA5B;AACA,QAAMC,MAAM,GAAGrG,WAAW,CAAC8F,KAAK,IAAIA,KAAK,CAAC9B,MAAN,CAAaqC,MAAvB,CAA1B;AACA,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAb;AACA,QAAMC,OAAO,GAAGrE,SAAS,EAAzB;AACA,QAAMsE,QAAQ,GAAG7G,WAAW,EAA5B;AACA,QAAM8G,QAAQ,GAAGhH,WAAW,EAA5B,CAjBwB,CAoBxB;;AACA,QAAMiH,gBAAgB,GAAGtG,GAAG,CAACuG,MAAJ,GAAaC,KAAb,CAAmB;AAC1CzB,IAAAA,IAAI,EAAC/E,GAAG,CAACyG,MAAJ,GACJC,QADI,CACK,mBADL,CADqC;AAG1C1B,IAAAA,KAAK,EAAChF,GAAG,CAACyG,MAAJ,GACLC,QADK,CACI,oBADJ,CAHoC;AAK1CzB,IAAAA,KAAK,EAACjF,GAAG,CAACyG,MAAJ,GACLC,QADK,CACI,oBADJ,CALoC;AAO1CxB,IAAAA,QAAQ,EAAElF,GAAG,CAACyG,MAAJ,GACTC,QADS,CACA,uBADA;AAPgC,GAAnB,CAAzB;;AAWA,QAAMC,WAAW,GAAG,CAACC,MAAD,EAAQC,MAAR,MAAoB;AACpCC,IAAAA,KAAK,EAAEF,MAAM,CAACG,MAAP,CAAcF,MAAd,KAAyBD,MAAM,CAACI,OAAP,CAAeH,MAAf,CAAzB,GAAkD,IAAlD,GAAyD,KAD5B;AAEpCI,IAAAA,UAAU,EAAEL,MAAM,CAACG,MAAP,CAAcF,MAAd,KAAyBD,MAAM,CAACI,OAAP,CAAeH,MAAf,CAAzB,GAAkDD,MAAM,CAACG,MAAP,CAAcF,MAAd,CAAlD,GAAwE;AAFhD,GAApB,CAApB,CAhCwB,CAsCxB;;;AACA,QAAMK,iBAAiB,GAAG,CAACC,CAAD,EAAGC,aAAH,KAAqB;AAC7C,UAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAF,IAAAA,aAAa,CAAC,OAAD,EAAUD,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAAV,CAAb;;AACA,QAAGL,CAAC,CAACI,MAAF,CAASC,KAAT,CAAeC,MAAf,KAA0B,CAA7B,EAAgC;AAChCnD,MAAAA,YAAY,CAAC,EAAD,CAAZ;AACA8C,MAAAA,aAAa,CAAC,OAAD,EAAS,EAAT,CAAb;AACC,KAHD,MAIK;AACHC,MAAAA,MAAM,CAACK,aAAP,CAAqBP,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAArB;;AACAH,MAAAA,MAAM,CAACM,SAAP,GAAmB,MAAM;AACzBP,QAAAA,aAAa,CAAC,OAAD,EAASC,MAAM,CAACO,MAAhB,CAAb;AACC,OAFD;;AAGAtD,MAAAA,YAAY,CAAC6C,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,EAAkBzC,IAAnB,CAAZ;AACD;AACJ,GAdC,CAvCwB,CAuDxB;;;AACA,QAAM8C,gBAAgB,GAAG,MAAMzB,QAAQ,CAACvG,cAAc,CAAC,IAAD,CAAf,CAAvC;;AACA,QAAMiI,iBAAiB,GAAG,MAAM1B,QAAQ,CAACvG,cAAc,CAAC,KAAD,CAAf,CAAxC,CAzDwB,CA2DxB;;;AACA,QAAMkI,YAAY,GAAIC,OAAD,IAAa;AAChCvG,IAAAA,KAAK,CAACuG,OAAD,EAAU;AACdC,MAAAA,SAAS,EAAE,IADG;AAEdC,MAAAA,QAAQ,EAAEzG,KAAK,CAAC0G,QAAN,CAAeC,YAFX;AAGdhG,MAAAA,UAAU,EAAEV,IAHE;AAId2G,MAAAA,SAAS,EAAE;AAJG,KAAV,CAAL;AAMD,GAPD,CA5DwB,CAqExB;;;AACA,QAAMC,SAAS,GAAG,YAAY;AAC5B,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,iBAAD,EAAoB;AACzCC,MAAAA,MAAM,EAAE,QADiC;AAEzCC,MAAAA,OAAO,EAAE;AACP,wBAAe;AADR,OAFgC;AAKzCC,MAAAA,IAAI,EAAE5C,IAAI,CAAC6C,SAAL,CAAe;AAAEC,QAAAA,EAAE,EAAE/C,IAAI,CAAC+C;AAAX,OAAf;AALmC,KAApB,CAAvB;AAOA,UAAM;AAAEC,MAAAA;AAAF,QAAc,MAAMP,GAAG,CAACQ,IAAJ,EAA1B;;AACA,QAAGD,OAAH,EAAY;AACV,YAAME,WAAW,GAAGzD,QAApB;AACAyD,MAAAA,WAAW,CAACC,OAAZ,CAAoBC,OAAO,IAAI;AAC7BA,QAAAA,OAAO,CAACC,QAAR,GAAmB,CAAnB;AACAD,QAAAA,OAAO,CAACE,QAAR,GAAmB,KAAnB;AACD,OAHD;AAIDhD,MAAAA,QAAQ,CAAC3G,eAAe,CAAC,EAAD,CAAhB,CAAR;AACA2G,MAAAA,QAAQ,CAACzG,eAAe,EAAhB,CAAR;AACAoI,MAAAA,YAAY,CAAC,kBAAD,CAAZ;AACA;AACF,GAnBD,CAtEwB,CA2FxB;;;AACA,QAAMsB,cAAc,GAAG,MAAOR,EAAP,IAAc;AACnC,UAAMN,GAAG,GAAG,MAAMC,KAAK,CAAC,YAAD,EAAe;AACpCC,MAAAA,MAAM,EAAE,QAD4B;AAEpCC,MAAAA,OAAO,EAAE;AACP,wBAAe;AADR,OAF2B;AAKpCC,MAAAA,IAAI,EAAE5C,IAAI,CAAC6C,SAAL,CAAe;AAAEU,QAAAA,MAAM,EAAExD,IAAI,CAAC+C,EAAf;AAAmBU,QAAAA,SAAS,EAAEV;AAA9B,OAAf;AAL8B,KAAf,CAAvB;AAOA,UAAM;AAAEC,MAAAA;AAAF,QAAc,MAAMP,GAAG,CAACQ,IAAJ,EAA1B;;AACA,QAAGD,OAAH,EAAY;AACX,YAAME,WAAW,GAAGzD,QAApB;AACA,YAAMiE,qBAAqB,GAAGR,WAAW,CAACS,IAAZ,CAAiBC,IAAI,IAAIA,IAAI,CAACb,EAAL,KAAYA,EAArC,CAA9B;;AACA,UAAGW,qBAAH,EAA0B;AACzBA,QAAAA,qBAAqB,CAACJ,QAAtB,GAAiC,KAAjC;AACAI,QAAAA,qBAAqB,CAACL,QAAtB,GAAiC,CAAjC;AACA/C,QAAAA,QAAQ,CAACxG,gBAAgB,CAACoJ,WAAD,CAAjB,CAAR;AACA;;AAED,YAAMW,iBAAiB,GAAGtE,YAAY,CAACoE,IAAb,CAAkBC,IAAI,IAAIA,IAAI,CAACb,EAAL,KAAYA,EAAtC,CAA1B;AACA,YAAMe,eAAe,GAAGvE,YAAY,CAACwE,MAAb,CAAoBH,IAAI,IAAIA,IAAI,CAACb,EAAL,KAAYA,EAAxC,CAAxB;AACAzC,MAAAA,QAAQ,CAAC3G,eAAe,CAACmK,eAAD,CAAhB,CAAR;AACAxD,MAAAA,QAAQ,CAAC1G,gBAAgB,CAAC,CAACiK,iBAAiB,CAACnE,UAApB,CAAjB,CAAR;AACAuC,MAAAA,YAAY,CAAC,qBAAD,CAAZ;AACD;AACD,GAxBD,CA5FwB,CAsHxB;;;AACA,QAAM+B,WAAW,GAAI,YAAY;AAC/B,UAAMvB,GAAG,GAAG,MAAMC,KAAK,CAAE,SAAQ1C,IAAI,CAAC+C,EAAG,EAAlB,CAAvB;AACA,UAAMjD,IAAI,GAAI,MAAM2C,GAAG,CAACQ,IAAJ,EAApB;AACA,UAAMgB,QAAQ,GAAG,EAAjB;AACA,QAAIC,KAAK,GAAG,CAAZ;AACApE,IAAAA,IAAI,CAACE,IAAL,CAAUmE,SAAV,CAAoBhB,OAApB,CAA4BS,IAAI,IAAI;AAClC,YAAMQ,QAAQ,GAAG;AACfrB,QAAAA,EAAE,EAAEa,IAAI,CAACH,SADM;AAEfxE,QAAAA,IAAI,EAAE2E,IAAI,CAACS,OAAL,CAAapF,IAFJ;AAGfqF,QAAAA,WAAW,EAAEV,IAAI,CAACS,OAAL,CAAanF,KAHX;AAIfQ,QAAAA,UAAU,EAAEkE,IAAI,CAACW,MAAL,GAAcX,IAAI,CAACS,OAAL,CAAanF,KAJxB;AAKfqF,QAAAA,MAAM,EAAEX,IAAI,CAACW,MALE;AAMfpF,QAAAA,KAAK,EAAEyE,IAAI,CAACS,OAAL,CAAalF;AANL,OAAjB;AAQA+E,MAAAA,KAAK,IAAIE,QAAQ,CAAC1E,UAAlB;AACAuE,MAAAA,QAAQ,CAACO,IAAT,CAAcJ,QAAd;AACD,KAXD;;AAYA,QAAGF,KAAK,KAAKxE,UAAb,EAAyB;AACvBY,MAAAA,QAAQ,CAAC1G,gBAAgB,CAACsK,KAAD,CAAjB,CAAR;AACD;;AACD5D,IAAAA,QAAQ,CAAC3G,eAAe,CAACsK,QAAD,CAAhB,CAAR;AACD,GArBD,CAvHwB,CA8IxB;;;AACA,QAAMQ,aAAa,GAAG,YAAY;AAChC,UAAMhC,GAAG,GAAG,MAAMC,KAAK,CAAC,WAAD,CAAvB;AACA,UAAM;AAAEgC,MAAAA;AAAF,QAAiB,MAAMjC,GAAG,CAACQ,IAAJ,EAA7B;AACA,UAAMpE,WAAW,GAAG,EAApB;AACA6F,IAAAA,UAAU,CAACvB,OAAX,CAAmB/D,QAAQ,IAAIP,WAAW,CAAC2F,IAAZ,CAAiB;AAAEvF,MAAAA,IAAI,EAAEG,QAAQ,CAACH,IAAjB;AAAuB8D,MAAAA,EAAE,EAAE3D,QAAQ,CAAC2D;AAApC,KAAjB,CAA/B;AACAjE,IAAAA,cAAc,CAACD,WAAD,CAAd;AACD,GAND,CA/IwB,CAuJxB;AAEA;;;AACA,QAAM8F,aAAa,GAAG,MAAO5D,MAAP,IAAkB;AACtCnC,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA,UAAMgG,UAAU,GAAG/F,WAAW,CAAC8E,IAAZ,CAAiBvE,QAAQ,IAAIA,QAAQ,CAACH,IAAT,KAAkB8B,MAAM,CAAC3B,QAAtD,EAAgE2D,EAAnF;AACA,UAAMN,GAAG,GAAG,MAAMC,KAAK,CAAC,UAAD,EAAY;AAAEC,MAAAA,MAAM,EAAE,OAAV;AACnCC,MAAAA,OAAO,EAAE;AACL,wBAAe;AADV,OAD0B;AAInCC,MAAAA,IAAI,EAAE5C,IAAI,CAAC6C,SAAL,CAAe,EAAE,GAAG/B,MAAL;AAAaxC,QAAAA,SAAb;AAAwBqG,QAAAA,UAAxB;AAAoC7B,QAAAA,EAAE,EAAElD,eAAe,CAACkD;AAAxD,OAAf;AAJ6B,KAAZ,CAAvB;AAMA,UAAM;AAAEK,MAAAA;AAAF,QAAc,MAAMX,GAAG,CAACQ,IAAJ,EAA1B;AACA,UAAMC,WAAW,GAAGzD,QAApB;AACA,UAAMoF,SAAS,GAAG3B,WAAW,CAAC2B,SAAZ,CAAsBjB,IAAI,IAAIA,IAAI,CAACb,EAAL,KAAYK,OAAO,CAACL,EAAlD,CAAlB;AACAG,IAAAA,WAAW,CAAC2B,SAAD,CAAX,GAAyBzB,OAAzB;AACA9C,IAAAA,QAAQ,CAACxG,gBAAgB,CAACoJ,WAAD,CAAjB,CAAR;AACAjB,IAAAA,YAAY,CAAC,qBAAD,CAAZ;AACArD,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,GAhBD,CA1JwB,CA4KxB;;;AACA,QAAMkG,UAAU,GAAG,MAAO/D,MAAP,IAAkB;AACnCnC,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA,UAAMgG,UAAU,GAAG/F,WAAW,CAAC8E,IAAZ,CAAiBvE,QAAQ,IAAIA,QAAQ,CAACH,IAAT,KAAkB8B,MAAM,CAAC3B,QAAtD,EAAgE2D,EAAnF;AACA,UAAMN,GAAG,GAAG,MAAMC,KAAK,CAAC,UAAD,EAAY;AAAEC,MAAAA,MAAM,EAAE,MAAV;AACnCC,MAAAA,OAAO,EAAE;AACL,wBAAe;AADV,OAD0B;AAInCC,MAAAA,IAAI,EAAE5C,IAAI,CAAC6C,SAAL,CAAe,EAAE,GAAG/B,MAAL;AAAYxC,QAAAA,SAAZ;AAAuBqG,QAAAA;AAAvB,OAAf;AAJ6B,KAAZ,CAAvB;AAMA,UAAM;AAAExB,MAAAA;AAAF,QAAc,MAAMX,GAAG,CAACQ,IAAJ,EAA1B;AACD8B,IAAAA,OAAO,CAACC,GAAR,CAAY5B,OAAZ;;AACC,QAAI,aAAYwB,UAAW,EAAxB,KAA8BrE,QAAQ,CAAC0E,QAA1C,EAAoD;AAClD,YAAMnB,eAAe,GAAGrE,QAAxB;AACAqE,MAAAA,eAAe,CAACU,IAAhB,CAAqB,EAAE,GAAGpB,OAAL;AAAc8B,QAAAA,OAAO,EAAC;AAAtB,OAArB;AACA5E,MAAAA,QAAQ,CAACxG,gBAAgB,CAACgK,eAAD,CAAjB,CAAR;AACA7B,MAAAA,YAAY,CAAC,mBAAD,CAAZ;AACArD,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AAED;AACF,GAnBD,CA7KwB,CAkMxB;;;AACA,QAAMuG,gBAAgB,GAAG,MAAM;AAC7B7E,IAAAA,QAAQ,CAACtG,kBAAkB,CAAC,EAAD,CAAnB,CAAR;AACAgF,IAAAA,gBAAgB,CAAC;AAACC,MAAAA,IAAI,EAAC,EAAN;AAAUC,MAAAA,KAAK,EAAE,EAAjB;AAAqBC,MAAAA,KAAK,EAAE,EAA5B;AAAgCC,MAAAA,QAAQ,EAAE;AAA1C,KAAD,CAAhB;AACAZ,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACD,GAJD,CAnMwB,CAyMxB;;;AACAlF,EAAAA,SAAS,CAAC,MAAM;AACd,QAAGuG,eAAe,CAACZ,IAAnB,EAAyB;AACzB,YAAM;AAAEA,QAAAA,IAAF;AAAQC,QAAAA,KAAR;AAAeC,QAAAA,KAAf;AAAsBiG,QAAAA,QAAtB;AAAgC7G,QAAAA;AAAhC,UAA8CsB,eAApD;AACAb,MAAAA,gBAAgB,CAAC;AAAEC,QAAAA,IAAF;AAAQC,QAAAA,KAAR;AAAeC,QAAAA,KAAf;AAAsBC,QAAAA,QAAQ,EAAEgG,QAAQ,CAACnG;AAAzC,OAAD,CAAhB;AACAT,MAAAA,YAAY,CAACD,SAAD,CAAZ;AACAG,MAAAA,mBAAmB,CAAC0G,QAAQ,CAACnG,IAAV,CAAnB;AACC;AACF,GAPQ,EAON,CAACY,eAAD,CAPM,CAAT;AAUAvG,EAAAA,SAAS,CAAC,MAAM;AACd,QAAGqG,OAAH,EAAY;AACV8E,MAAAA,aAAa;AACd,KAFD,MAEO;AACLT,MAAAA,WAAW;AACZ;AACF,GANQ,EAMN,CAACrE,OAAD,CANM,CAAT,CApNwB,CA4NxB;AAEA;AACA;AAEA;AACA;AACA;AAGA;;AACArG,EAAAA,SAAS,CAAC,MAAM;AACdiH,IAAAA,QAAQ,CAAC0E,QAAT,KAAsB,UAAtB,GAAmC3G,WAAW,CAAC,KAAD,CAA9C,GAAwDA,WAAW,CAAC,IAAD,CAAnE;AACD,GAFQ,EAEN,CAACiC,QAAQ,CAAC0E,QAAV,CAFM,CAAT;AAIA,sBACE;AAAK,IAAA,SAAS,EAAE5E,OAAO,CAACnE,IAAxB;AAAA,4BAEE,QAAC,MAAD;AAAQ,MAAA,QAAQ,EAAC,OAAjB;AAAyB,MAAA,SAAS,EAAEjB,IAAI,CAACoF,OAAO,CAAChE,MAAT,EAAiB;AAAC,SAACgE,OAAO,CAACtD,WAAT,GAAuBgD;AAAxB,OAAjB,CAAxC;AAAA,6BACE,QAAC,OAAD;AAAA,+BAEE,QAAC,MAAD;AAAQ,UAAA,EAAE,EAAC,OAAX;AAAmB,UAAA,MAAM,EAAC,IAA1B;AAA+B,UAAA,SAAS,EAAC,QAAzC;AAAA,kCACI,QAAC,MAAD,CAAQ,KAAR;AAAc,YAAA,SAAS,EAAC,cAAxB;AAAA,oCACA,QAAC,UAAD;AAAY,cAAA,KAAK,EAAC,SAAlB;AAA4B,cAAA,OAAO,EAAEgC,gBAArC;AAAuD,cAAA,IAAI,EAAC,OAA5D;AAAoE,cAAA,SAAS,EAAE9G,IAAI,CAACoF,OAAO,CAAC/C,UAAT,EAAqByC,MAAM,IAAIM,OAAO,CAAC5C,IAAvC,CAAnF;AAAA,qCACF,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AADE;AAAA;AAAA;AAAA;AAAA,oBADA,eAIE,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,aAAT;AAAuB,cAAA,KAAK,EAAE;AAAE4H,gBAAAA,cAAc,EAAE;AAAlB,eAA9B;AAAA,qCACE,QAAC,UAAD;AAAY,gBAAA,SAAS,EAAEhF,OAAO,CAAChD,KAA/B;AAAsC,gBAAA,OAAO,EAAC,IAA9C;AAAmD,gBAAA,MAAM,MAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eASI,QAAC,MAAD,CAAQ,MAAR;AAAe,6BAAc;AAA7B;AAAA;AAAA;AAAA;AAAA,kBATJ,eAUI,QAAC,MAAD,CAAQ,QAAR;AAAiB,YAAA,SAAS,EAAC,iBAA3B;AAAA,mCACE,QAAC,GAAD;AAAK,cAAA,SAAS,EAAC,6CAAf;AAAA,sCAEY,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAC,aAAT;AAAuB,gBAAA,KAAK,EAAE;AAAEgI,kBAAAA,cAAc,EAAE,MAAlB;AAA0BvI,kBAAAA,KAAK,EAAC,OAAhC;AAAyCiB,kBAAAA,SAAS,EAAC;AAAnD,iBAA9B;AAAA,uCACE,QAAC,UAAD;AAAY,kBAAA,KAAK,EAAC,SAAlB;AAAA,yCACA;AAAM,oBAAA,SAAS,EAAGgC,MAAM,GAAG,iBAAH,GAAsB,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAFZ,eAQY,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAC,aAAT;AAAuB,gBAAA,KAAK,EAAE;AAAEsF,kBAAAA,cAAc,EAAE,MAAlB;AAA0BvI,kBAAAA,KAAK,EAAC,OAAhC;AAAyCiB,kBAAAA,SAAS,EAAC;AAAnD,iBAA9B;AAA0F,gBAAA,EAAE,EAAC,UAA7F;AAAA,uCACE,QAAC,UAAD;AAAY,kBAAA,KAAK,EAAC,SAAlB;AAAA,yCACA;AAAO,oBAAA,SAAS,EAAGgC,MAAM,GAAG,iBAAH,GAAsB,WAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBARZ,eAcY,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAC,aAAT;AAAuB,gBAAA,KAAK,EAAE;AAAEsF,kBAAAA,cAAc,EAAE,MAAlB;AAA0BvI,kBAAAA,KAAK,EAAC,OAAhC;AAAyCiB,kBAAAA,SAAS,EAAC;AAAnD,iBAA9B;AAAA,uCACE,QAAC,UAAD;AAAY,kBAAA,KAAK,EAAC,SAAlB;AAAA,yCACA;AAAM,oBAAA,SAAS,EAAGgC,MAAM,GAAG,iBAAH,GAAsB,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAdZ,eAoBY,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAC,aAAT;AAAuB,gBAAA,KAAK,EAAE;AAAEsF,kBAAAA,cAAc,EAAE,MAAlB;AAA0BvI,kBAAAA,KAAK,EAAC,OAAhC;AAAyCiB,kBAAAA,SAAS,EAAC;AAAnD,iBAA9B;AAAA,uCACE,QAAC,UAAD;AAAY,kBAAA,KAAK,EAAC,SAAlB;AAAA,yCACA;AAAM,oBAAA,SAAS,EAAGgC,MAAM,GAAG,iBAAH,GAAsB,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBApBZ,EA0BQ,CAACA,MAAD,iBAAW;AAAK,gBAAA,SAAS,EAAEM,OAAO,CAACiF,UAAxB;AAAA,6CAAqC,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,wBAArC;AAAA;AAAA;AAAA;AAAA;AAAA,sBA1BnB,eA4BU,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAC,SAAT;AAAmB,gBAAA,KAAK,EAAE;AAAED,kBAAAA,cAAc,EAAE,MAAlB;AAA0BvI,kBAAAA,KAAK,EAAC,OAAhC;AAAyCiB,kBAAAA,SAAS,EAAC;AAAnD,iBAA1B;AAAA,uCACI,QAAC,UAAD;AAAY,kBAAA,KAAK,EAAC,SAAlB;AAAA,0CACE,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA,0BADF,oBACmB;AAAM,oBAAA,SAAS,EAAGgC,MAAM,GAAG,iBAAH,GAAsB,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADnB;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBA5BV;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFF,eA0DE,QAAC,MAAD;AAAQ,MAAA,SAAS,EAAEM,OAAO,CAAC3C,MAA3B;AAAmC,MAAA,OAAO,EAAC,YAA3C;AAAwD,MAAA,MAAM,EAAC,MAA/D;AAAsE,MAAA,IAAI,EAAEqC,MAA5E;AAAqF,MAAA,OAAO,EAAE;AAAEwF,QAAAA,KAAK,EAAElF,OAAO,CAACzC;AAAjB,OAA9F;AAAA,gBACG,CAAC+B,OAAD,gBACD;AAAA,gCACA;AAAK,UAAA,SAAS,EAAEU,OAAO,CAACxC,YAAxB;AAAA,kCACE;AAAI,YAAA,SAAS,EAAC,aAAd;AAA4B,YAAA,EAAE,EAAC,WAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA,mCACE,QAAC,UAAD;AAAY,cAAA,KAAK,EAAC,eAAlB;AAAkC,cAAA,OAAO,EAAEmE,iBAA3C;AAAA,qCACE,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eASA,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,gBATA,eAUA;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,oBACGzC,YAAY,CAACiG,GAAb,CAAiBpC,OAAO,iBACvB;AAAK,YAAA,SAAS,EAAC,WAAf;AAAA,oCACE;AAAA,qCACE,QAAC,KAAD;AAAO,gBAAA,SAAS,EAAC,aAAjB;AAAgC,gBAAA,SAAS,EAAC,aAA1C;AAAwD,gBAAA,GAAG,EAAEA,OAAO,CAACjE,KAArE;AAA4E,gBAAA,KAAK,EAAC,IAAlF;AAAuF,gBAAA,MAAM,EAAC,IAA9F;AAAmG,gBAAA,IAAI,EAAC;AAAxG;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE;AAAK,cAAA,SAAS,EAAC,cAAf;AAAA,sCACE;AAAA,0BAAKiE,OAAO,CAACnE;AAAb;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA,wCAAcmE,OAAO,CAACmB,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF,eAGE;AAAA,4CAAkBnB,OAAO,CAAC1D,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF,eASE;AAAA,wBACIrB,QAAQ,iBAAI,QAAC,UAAD;AAAY,gBAAA,OAAO,EAAE,MAAMkF,cAAc,CAACH,OAAO,CAACL,EAAT,CAAzC;AAAA,6CAAwD,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA,wBAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AADhB;AAAA;AAAA;AAAA;AAAA,oBATF;AAAA,aAAgCK,OAAO,CAACL,EAAxC;AAAA;AAAA;AAAA;AAAA,kBADD;AADH;AAAA;AAAA;AAAA;AAAA,gBAVA,EA4BGrD,UAAU,KAAK,CAAf,gBACC;AAAI,UAAA,SAAS,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,gBAGC;AAAI,UAAA,SAAS,EAAC,MAAd;AAAA,kCAAqB;AAAM,YAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAArB,QAAgFA,UAAhF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/BJ,eAkCE;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,kCACA,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,UAAT;AAAoB,YAAA,KAAK,EAAE;AAAE2F,cAAAA,cAAc,EAAE,MAAlB;AAA0BI,cAAAA,aAAa,EAAE/F,UAAU,KAAK,CAAf,IAAoB,CAACrB,QAArB,GAAgC,MAAhC,GAAyC;AAAlF,aAA3B;AAAA,mCACE,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,UAAhB;AAA2B,cAAA,KAAK,EAAC,SAAjC;AAA2C,cAAA,SAAS,EAAC,KAArD;AAA2D,cAAA,QAAQ,EAAEqB,UAAU,KAAK,CAAf,IAAoB,CAACrB,QAA1F;AAAoG,cAAA,EAAE,EAAC,SAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADA,eAIE,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAC,UAAhB;AAA2B,YAAA,KAAK,EAAC,WAAjC;AAA6C,YAAA,OAAO,EAAEmE,SAAtD;AAAkE,YAAA,SAAS,EAAC,KAA5E;AAAkF,YAAA,QAAQ,EAAE9C,UAAU,KAAK,CAAf,IAAoB,CAACrB,QAAjH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlCF;AAAA,sBADC,gBA2CC;AAAA,gCACA;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACA;AAAI,YAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAEA;AAAA,oCACA,QAAC,UAAD;AAAY,cAAA,KAAK,EAAC,aAAlB;AAAgC,cAAA,OAAO,EAAE,MAAM8G,gBAAgB,EAA/D;AAAA,4CAAsE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,sBAAtE;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,eAED,QAAC,UAAD;AAAY,cAAA,KAAK,EAAC,eAAlB;AAAkC,cAAA,OAAO,EAAEnD,iBAA3C;AAAA,qCACK,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AADL;AAAA;AAAA;AAAA;AAAA,oBAFC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAUA;AAAA,kCACA;AAAI,YAAA,SAAS,EAAC,eAAd;AAAA,sBAAgCnC,eAAe,CAACZ,IAAhB,GAAuB,gBAAvB,GAA0C;AAA1E;AAAA;AAAA;AAAA;AAAA,kBADA,eAEE,QAAC,MAAD;AACA,YAAA,aAAa,EAAEF,aADf;AAEA,YAAA,gBAAgB,EAAEyB,gBAFlB;AAGE,YAAA,kBAAkB,EAAE,IAHtB;AAAA,sBAIIkF,KAAD,iBACC;AAAM,cAAA,KAAK,EAAE;AAACC,gBAAAA,SAAS,EAAC,QAAX;AAAqBC,gBAAAA,MAAM,EAAC;AAA5B,eAAb;AAAkD,cAAA,QAAQ,EAAEF,KAAK,CAACG,YAAlE;AAAgF,cAAA,YAAY,EAAC,KAA7F;AAAA,sCACE;AAAA,wCACE,QAAC,SAAD;AAAW,kBAAA,IAAI,EAAC,MAAhB;AAAuB,kBAAA,MAAM,EAAC,QAA9B;AAAuC,kBAAA,KAAK,EAAC,MAA7C;AAAoD,kBAAA,OAAO,EAAC,UAA5D;AAAuE,kBAAA,SAAS,MAAhF;AAAA,qBACIH,KAAK,CAACI,aAAN,CAAoB,MAApB,CADJ;AAAA,qBACqCjF,WAAW,CAAC6E,KAAD,EAAO,MAAP;AADhD;AAAA;AAAA;AAAA;AAAA,wBADF,eAIE,QAAC,SAAD;AAAW,kBAAA,IAAI,EAAC,OAAhB;AAAwB,kBAAA,MAAM,EAAC,QAA/B;AAAwC,kBAAA,KAAK,EAAC,OAA9C;AAAsD,kBAAA,OAAO,EAAC,UAA9D;AAAyE,kBAAA,SAAS,MAAlF;AAAA,qBACIA,KAAK,CAACI,aAAN,CAAoB,OAApB,CADJ;AAAA,qBACsCjF,WAAW,CAAC6E,KAAD,EAAO,OAAP;AADjD;AAAA;AAAA;AAAA;AAAA,wBAJF,eAOE,QAAC,MAAD;AAAQ,kBAAA,YAAY,EAAG,EAAvB;AAA0B,kBAAA,KAAK,EAAEjH,gBAAjC;AAAmD,kBAAA,QAAQ,EAAE4C,CAAC,IAAI3C,mBAAmB,CAAC2C,CAAC,CAACI,MAAF,CAASsE,KAAV,CAArF;AAAwG,kBAAA,IAAI,EAAC,UAA7G;AAAwH,kBAAA,SAAS,MAAjI;AAAA,qBAAuIL,KAAK,CAACI,aAAN,CAAoB,UAApB,CAAvI;AAAA,qBACIjF,WAAW,CAAC6E,KAAD,EAAO,UAAP,CADf;AAAA,4BAEG7G,WAAW,CAAC2G,GAAZ,CAAgBpG,QAAQ,iBACvB,QAAC,QAAD;AAA4B,oBAAA,KAAK,EAAEA,QAAQ,CAACH,IAA5C;AAAA,8BAAmDG,QAAQ,CAACH;AAA5D,qBAAeG,QAAQ,CAAC2D,EAAxB;AAAA;AAAA;AAAA;AAAA,0BADD;AAFH;AAAA;AAAA;AAAA;AAAA,wBAPF,eAcA,QAAC,KAAD;AAAO,kBAAA,EAAE,EAAC,MAAV;AAAiB,kBAAA,IAAI,EAAC,MAAtB;AAA6B,kBAAA,IAAI,EAAC,OAAlC;AAA0C,kBAAA,QAAQ,EAAG1B,CAAD,IAAOD,iBAAiB,CAACC,CAAD,EAAGqE,KAAK,CAACpE,aAAT,CAA5E;AAAsG,kBAAA,MAAM;AAA5G;AAAA;AAAA;AAAA;AAAA,wBAdA,eAeE,QAAC,MAAD;AAAQ,kBAAA,KAAK,EAAE;AAACnF,oBAAAA,OAAO,EAAC,OAAT;AAAkByJ,oBAAAA,MAAM,EAAC;AAAzB,mBAAf;AAAqD,kBAAA,KAAK,EAAC,SAA3D;AAAsE,kBAAA,OAAO,EAAC,UAA9E;AAAA,0CAAyF,QAAC,SAAD;AAAW,oBAAA,SAAS,EAAC;AAArB;AAAA;AAAA;AAAA;AAAA,0BAAzF,eAAkH;AAAO,oBAAA,OAAO,EAAC,MAAf;AAAA,+BAAuBrH,SAAS,GAAI,GAAEA,SAAU,WAAhB,GAA6B,gBAA7D;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAlH;AAAA;AAAA;AAAA;AAAA;AAAA,wBAfF,EAgBEmH,KAAK,CAACzE,MAAN,CAAa9B,KAAb,IAAsBuG,KAAK,CAACxE,OAAN,CAAc/B,KAApC,gBAA6C;AAAK,kBAAA,SAAS,EAAC,OAAf;AAAA,4BAAwBuG,KAAK,CAACzE,MAAN,CAAa9B;AAArC;AAAA;AAAA;AAAA;AAAA,wBAA7C,GAAkG,IAhBpG;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAoBE,QAAC,MAAD;AACA,gBAAA,QAAQ,EAAEuG,KAAK,CAAC3E,MAAN,CAAa9B,IAAb,IAAqByG,KAAK,CAAC3E,MAAN,CAAa7B,KAAlC,IAA2CwG,KAAK,CAAC3E,MAAN,CAAa5B,KAAxD,IAAiEuG,KAAK,CAAC3E,MAAN,CAAa3B,QAA9E,IAA0F,CAACT,aAA3F,GAA2G,KAA3G,GAAmH,IAD7H;AAEA,gBAAA,SAAS,EAAC,MAFV;AAEiB,gBAAA,OAAO,EAAC,WAFzB;AAEqC,gBAAA,KAAK,EAAC,SAF3C;AAGA,gBAAA,OAAO,EAAEkB,eAAe,CAACZ,IAAhB,GAAuB,MAAM0F,aAAa,CAACe,KAAK,CAAC3E,MAAP,CAA1C,GAA2D,MAAM+D,UAAU,CAACY,KAAK,CAAC3E,MAAP,CAHpF;AAIA,gBAAA,IAAI,EAAC,OAJL;AAIa,gBAAA,SAAS,MAJtB;AAAA,gCAI0BlB,eAAe,CAACZ,IAAhB,GAAuB,gBAAvB,GAA0C,aAJpE;AAAA;AAAA;AAAA;AAAA;AAAA,sBApBF;AAAA;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA,wBAVA;AAAA;AA5CJ;AAAA;AAAA;AAAA;AAAA,YA1DF,eAsJE;AACE,MAAA,SAAS,EAAEhE,IAAI,CAACoF,OAAO,CAACrC,OAAT,EAAkB;AAC/B,SAACqC,OAAO,CAAClC,YAAT,GAAwB4B;AADO,OAAlB,CADjB;AAAA,6BAKE;AAAK,QAAA,SAAS,EAAEM,OAAO,CAACxC;AAAxB;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,YAtJF,eA+JG,QAAC,cAAD;AAAiB,MAAA,SAAS,EAAE;AAA5B;AAAA;AAAA;AAAA;AAAA,YA/JH;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAqKD,CAhZD;;GAAMO,W;UAQiB1E,W,EACFA,W,EACHA,W,EACQA,W,EACPA,W,EACFA,W,EAECsC,S,EACCvC,W,EACAF,W;;;KAjBb6E,W;AAkZN,eAAeA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useLocation, Link } from 'react-router-dom'\r\n// Redux\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setCartProducts, updateTotalPrice, resetTotalPrice, setProductsState, setDrawerState, setProductToUpdate } from '../../store/actions'\r\n// Formik\r\nimport { Formik } from 'formik'\r\nimport * as Yup from 'yup'\r\n// Cloudinary\r\nimport { Image } from 'cloudinary-react'\r\n// Components\r\nimport Search from '../search/Search'\r\n// Material ui\r\nimport { TextField, Button, Divider, Select, MenuItem, IconButton, Drawer, AppBar, Input, Toolbar, Typography, useMediaQuery } from '@material-ui/core'\r\nimport clsx from 'clsx'\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft'\r\nimport ImageIcon from '@material-ui/icons/Image'\r\nimport AddIcon from '@material-ui/icons/Add'\r\n// React toastify \r\nimport { ToastContainer, toast, Zoom } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n// Bootstrap\r\nimport { Nav, Navbar } from 'react-bootstrap'\r\n// Css\r\nimport './style.css'\r\n\r\nconst drawerWidth = 300\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    fontFamily:'roboto'\r\n  },\r\n  appBar: {\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    backgroundColor: 'white',\r\n    color:'black'\r\n  },\r\n  appBarShift: {\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    marginLeft: drawerWidth,\r\n    marginBottom:'20px',\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n\r\n  },\r\n  title: {\r\n      color:'black', \r\n      display:'inline'\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  drawerHeader: {\r\n    display: 'flex',\r\n    justifyContent: 'space-around',\r\n    marginTop:'10px'\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    marginLeft: -drawerWidth,\r\n  },\r\n  contentShift: {\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginLeft: 0,\r\n  },\r\n}));\r\n\r\nconst SideBarCart = () => {\r\n  const [isDelete, setIsDelete] = useState(true)\r\n  const [imageName, setImageName] = useState('')\r\n  const [selectedCategory, setSelectedCategory] = useState('')\r\n  const [disableButton, setDisableButton] = useState(false)\r\n  const [categoryArr, setCategoryArr] = useState([])\r\n  const [initialValues, setInitialValues] = useState({name:'', price: '', image: '', category: ''})\r\n  const [mobileView, setMobileView] = useState(false)\r\n  const cartProducts = useSelector(state => state.products.cartProducts)\r\n  const totalPrice = useSelector(state => state.products.totalPrice)\r\n  const isAdmin = useSelector(state => state.users.isAdmin)\r\n  const productToUpdate = useSelector(state => state.products.productToUpdate)\r\n  const products = useSelector(state => state.products.data)\r\n  const isOpen = useSelector(state => state.drawer.isOpen)\r\n  const cart = JSON.parse(localStorage.getItem('availableCart'))\r\n  const classes = useStyles()\r\n  const dispatch = useDispatch()\r\n  const location = useLocation()\r\n \r\n  \r\n  // Form validation\r\n  const validationSchema = Yup.object().shape({\r\n    name:Yup.string()\r\n    .required('name is required!'),\r\n    price:Yup.string()\r\n    .required('price is required!'),\r\n    image:Yup.string()\r\n    .required('image is required!'),\r\n    category: Yup.string()\r\n    .required('category is required!'),\r\n    })\r\n\r\n  const errorHelper = (formik,values) => ({\r\n      error: formik.errors[values] && formik.touched[values] ? true : false,\r\n      helperText: formik.errors[values] && formik.touched[values] ? formik.errors[values]:null\r\n  })\r\n\r\n         \r\n  // Handle image change  \r\n  const handleChangeImage = (e,setFieldValue) => {\r\n    const reader = new FileReader()\r\n    setFieldValue('image', e.target.files[0])\r\n    if(e.target.files.length === 0) {\r\n    setImageName('')\r\n    setFieldValue('image','')\r\n    } \r\n    else {\r\n      reader.readAsDataURL(e.target.files[0])\r\n      reader.onloadend = () => {\r\n      setFieldValue('image',reader.result)\r\n      }\r\n      setImageName(e.target.files[0].name)\r\n    }\r\n}\r\n\r\n  // Handle drawer state\r\n  const handleDrawerOpen = () => dispatch(setDrawerState(true))\r\n  const handleDrawerClose = () => dispatch(setDrawerState(false))\r\n  \r\n  // Toastify\r\n  const successToast = (message) => {\r\n    toast(message, { \r\n     draggable: true, \r\n     position: toast.POSITION.BOTTOM_RIGHT,\r\n     transition: Zoom,\r\n     autoClose: 2000\r\n    })\r\n  }\r\n\r\n  // Clear the cart\r\n  const clearCart = async () => {\r\n    const res = await fetch('/cart_item/cart', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type':'application/json'\r\n      },\r\n      body: JSON.stringify({ id: cart.id })\r\n      })\r\n    const { success } = await res.json()\r\n    if(success) {\r\n      const productsArr = products\r\n      productsArr.forEach(product => {\r\n        product.quantity = 1\r\n        product.isInCart = false\r\n      })\r\n     dispatch(setCartProducts([]))\r\n     dispatch(resetTotalPrice())\r\n     successToast('Cart cleared! 😀')\r\n    }\r\n  }\r\n\r\n  // Remove specific item from the cart\r\n  const removeFromCart = async (id) => {\r\n    const res = await fetch('/cart_item', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type':'application/json'\r\n      },\r\n      body: JSON.stringify({ CartId: cart.id, ProductId: id })\r\n      })\r\n    const { success } = await res.json()\r\n    if(success) {\r\n     const productsArr = products\r\n     const deletedItemInProducts = productsArr.find(item => item.id === id)\r\n     if(deletedItemInProducts) {\r\n      deletedItemInProducts.isInCart = false\r\n      deletedItemInProducts.quantity = 1\r\n      dispatch(setProductsState(productsArr))\r\n     }\r\n  \r\n     const deletedItemInCart = cartProducts.find(item => item.id === id)\r\n     const cartProductsArr = cartProducts.filter(item => item.id !== id)\r\n     dispatch(setCartProducts(cartProductsArr))\r\n     dispatch(updateTotalPrice(-deletedItemInCart.totalPrice))\r\n     successToast('Product removed! 😀')\r\n   }\r\n  }\r\n\r\n  // Get all the products in  the cart and set them to the cart products\r\n  const getProducts =  async () => {\r\n    const res = await fetch(`/cart/${cart.id}`)\r\n    const data  = await res.json()\r\n    const itemsArr = []\r\n    let count = 0\r\n    data.cart.CartItems.forEach(item => {\r\n      const cartItem = {\r\n        id: item.ProductId,\r\n        name: item.Product.name,\r\n        singlePrice: item.Product.price,\r\n        totalPrice: item.amount * item.Product.price,\r\n        amount: item.amount,\r\n        image: item.Product.image\r\n      }\r\n      count += cartItem.totalPrice\r\n      itemsArr.push(cartItem)\r\n    })\r\n    if(count !== totalPrice) {\r\n      dispatch(updateTotalPrice(count))\r\n    }\r\n    dispatch(setCartProducts(itemsArr))   \r\n  }\r\n\r\n  // Get all the categories \r\n  const getCategories = async () => {\r\n    const res = await fetch('/category')\r\n    const { categories } = await res.json()\r\n    const categoryArr = []\r\n    categories.forEach(category => categoryArr.push({ name: category.name, id: category.id }))\r\n    setCategoryArr(categoryArr)\r\n  }\r\n\r\n  // Admin functions\r\n\r\n  // Update product\r\n  const updateProduct = async (values) => {\r\n    setDisableButton(true)\r\n    const CategoryId = categoryArr.find(category => category.name === values.category).id\r\n    const res = await fetch('/product',{ method: 'PATCH',\r\n    headers: {\r\n        'Content-Type':'application/json'\r\n    },\r\n    body: JSON.stringify({ ...values, imageName, CategoryId, id: productToUpdate.id })\r\n    })\r\n    const { product } = await res.json()\r\n    const productsArr = products\r\n    const findIndex = productsArr.findIndex(item => item.id === product.id) \r\n    productsArr[findIndex] = product \r\n    dispatch(setProductsState(productsArr))\r\n    successToast('Product Updated! 😀')\r\n    setDisableButton(false) \r\n  }\r\n\r\n  // Add product\r\n  const addProduct = async (values) => {\r\n    setDisableButton(true)\r\n    const CategoryId = categoryArr.find(category => category.name === values.category).id\r\n    const res = await fetch('/product',{ method: 'POST',\r\n    headers: {\r\n        'Content-Type':'application/json'\r\n    },\r\n    body: JSON.stringify({ ...values,imageName, CategoryId })\r\n})\r\n    const { product } = await res.json()\r\n   console.log(product)\r\n    if(`/products/${CategoryId}` === location.pathname) {\r\n      const cartProductsArr = products\r\n      cartProductsArr.push({ ...product, quanity:1 })\r\n      dispatch(setProductsState(cartProductsArr))\r\n      successToast('Product Added! 😀')\r\n      setDisableButton(false)\r\n\r\n    }\r\n  }\r\n\r\n  // Change the form from update to add\r\n  const changeStatetoAdd = () => {\r\n    dispatch(setProductToUpdate({}))\r\n    setInitialValues({name:'', price: '', image: '', category: ''})\r\n    setImageName('')\r\n  }\r\n\r\n  // Set the initial values to the update form\r\n  useEffect(() => {\r\n    if(productToUpdate.name) {\r\n    const { name, price, image, Category, imageName } = productToUpdate\r\n    setInitialValues({ name, price, image, category: Category.name })\r\n    setImageName(imageName)\r\n    setSelectedCategory(Category.name)\r\n    }\r\n  }, [productToUpdate])\r\n\r\n\r\n  useEffect(() => {\r\n    if(isAdmin) {\r\n      getCategories() \r\n    } else {\r\n      getProducts()\r\n    }\r\n  }, [isAdmin])\r\n\r\n  // Breakpoints\r\n  \r\n  // useEffect(() => {\r\n  //   const setResponsiveness = () => window.innerWidth < 900 ? setMobileView(true) : setMobileView(false)\r\n    \r\n  //   setResponsiveness();\r\n  //   window.addEventListener(\"resize\", () => setResponsiveness());\r\n  // }, []);\r\n\r\n\r\n  // disable the delete product option on the payment page\r\n  useEffect(() => {\r\n    location.pathname === '/payment' ? setIsDelete(false) : setIsDelete(true)\r\n  }, [location.pathname])\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {/* Top navbar */}\r\n      <AppBar position=\"fixed\" className={clsx(classes.appBar, {[classes.appBarShift]: isOpen})}>\r\n        <Toolbar>\r\n         \r\n          <Navbar bg=\"white\" expand=\"xl\" className=\"navbar\">\r\n              <Navbar.Brand className=\"navbar_brand\">\r\n              <IconButton color=\"inherit\" onClick={handleDrawerOpen} edge=\"start\" className={clsx(classes.menuButton, isOpen && classes.hide)}>\r\n            <ShoppingCartIcon />\r\n          </IconButton>\r\n                <Link to=\"/products/1\" style={{ textDecoration: 'none'}}>\r\n                  <Typography className={classes.title} variant=\"h6\" noWrap> ShoppingApp </Typography>\r\n                </Link>\r\n              </Navbar.Brand>\r\n              <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n              <Navbar.Collapse className=\"navbar_collapse\">\r\n                <Nav className=\"mr-auto w-100 d-flex justify-content-around\">\r\n                 \r\n                            <Link to=\"/products/1\" style={{ textDecoration: 'none', color:'black', marginTop:'7px' }}>\r\n                              <IconButton color=\"inherit\">\r\n                              <span className={ isOpen ? \"link_desc_small\" :\"link_desc\"}>Dairy and eggs</span>\r\n                              </IconButton>\r\n                            </Link>\r\n                       \r\n                            <Link to=\"/products/2\" style={{ textDecoration: 'none', color:'black', marginTop:'7px' }} id=\"stepFive\">\r\n                              <IconButton color=\"inherit\">\r\n                              <span  className={ isOpen ? \"link_desc_small\" :\"link_desc\"}>Meat</span>\r\n                              </IconButton>\r\n                            </Link>\r\n                 \r\n                            <Link to=\"/products/3\" style={{ textDecoration: 'none', color:'black', marginTop:'7px'}}>\r\n                              <IconButton color=\"inherit\">\r\n                              <span className={ isOpen ? \"link_desc_small\" :\"link_desc\"}>Fruits And Vegetables</span>\r\n                              </IconButton>\r\n                            </Link>\r\n                      \r\n                            <Link to=\"/products/4\" style={{ textDecoration: 'none', color:'black', marginTop:'7px'}}>\r\n                              <IconButton color=\"inherit\">\r\n                              <span className={ isOpen ? \"link_desc_small\" :\"link_desc\"}>Drinks and alcohol</span>\r\n                              </IconButton>\r\n                            </Link>\r\n                       \r\n                       {!isOpen && <div className={classes.searchLink}> <Search/> </div> }\r\n                   \r\n                          <Link to=\"/logout\" style={{ textDecoration: 'none', color:'black', marginTop:'7px' }}>\r\n                              <IconButton color=\"inherit\">\r\n                                <ExitToAppIcon/> <span className={ isOpen ? \"link_desc_small\" :\"link_desc\"}>Logout</span>\r\n                              </IconButton>\r\n                          </Link>\r\n                  \r\n                    </Nav>\r\n              </Navbar.Collapse>\r\n          </Navbar>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      {/* Side bar */}\r\n  \r\n      <Drawer className={classes.drawer} variant=\"persistent\" anchor=\"left\" open={isOpen}  classes={{ paper: classes.drawerPaper }}>\r\n        {!isAdmin ? \r\n        <>\r\n        <div className={classes.drawerHeader}>\r\n          <h3 className=\"cart_header\" id=\"stepThree\">Your Cart</h3>\r\n          <div>\r\n            <IconButton title=\"close sidebar\" onClick={handleDrawerClose}>\r\n              <ChevronLeftIcon/>\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n        <Divider />\r\n        <div className=\"summary_card\">\r\n          {cartProducts.map(product => (\r\n            <div className=\"card_item\" key={product.id}>\r\n              <div>\r\n                <Image className=\"product_img\"  cloudName=\"malachcloud\" src={product.image} width=\"70\" height=\"40\" crop=\"scale\" />\r\n              </div>\r\n              <div className=\"product_info\">\r\n                <h6>{product.name}</h6>\r\n                <h6>quanity: {product.amount}</h6>\r\n                <h6>total price: {product.totalPrice}$</h6>\r\n              </div>\r\n              <div>\r\n                { isDelete && <IconButton onClick={() => removeFromCart(product.id)}> <CloseIcon/> </IconButton> }\r\n              </div>\r\n            </div>\r\n            ))}\r\n          </div>\r\n\r\n          {totalPrice === 0 ?\r\n            <h5 className=\"m-2\">Your cart is empty</h5>\r\n           :\r\n            <h5 className=\"ml-2\"><span className=\"total_price_span\"> Total price: </span> ${totalPrice}</h5>\r\n          }\r\n    \r\n          <div className=\"btn-group\">\r\n          <Link to=\"/payment\" style={{ textDecoration: 'none', pointerEvents: totalPrice === 0 || !isDelete ? 'none' : ''}}>\r\n            <Button variant=\"outlined\" color=\"primary\" className=\"m-2\" disabled={totalPrice === 0 || !isDelete} id=\"stepSix\"> Payment page </Button>\r\n          </Link> \r\n            <Button variant=\"outlined\" color=\"secondary\" onClick={clearCart}  className=\"m-2\" disabled={totalPrice === 0 || !isDelete}> Clear cart </Button>\r\n          </div>\r\n          </>\r\n          : \r\n          <>\r\n          <div className=\"admin_panel_header\">\r\n          <h4 className=\"admin_panel_h1\">Admin panel</h4>  \r\n          <div>\r\n          <IconButton title=\"add product\" onClick={() => changeStatetoAdd() }>  <AddIcon/> </IconButton>\r\n         <IconButton title=\"close sidebar\" onClick={handleDrawerClose}>\r\n              <ChevronLeftIcon/>\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n          <>\r\n          <h5 className=\"action_header\">{ productToUpdate.name ? 'Update product' : 'Add product' }</h5>\r\n            <Formik\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n              enableReinitialize={true}>\r\n              {(props) => (\r\n                <form style={{textAlign:'center', margin:'10px'}} onSubmit={props.handleSubmit} autoComplete=\"off\">\r\n                  <div>\r\n                    <TextField name=\"name\" margin=\"normal\" label=\"name\" variant=\"outlined\" fullWidth \r\n                    {...props.getFieldProps('name')} {...errorHelper(props,'name')}/>\r\n\r\n                    <TextField name=\"price\" margin=\"normal\" label=\"price\" variant=\"outlined\" fullWidth \r\n                    {...props.getFieldProps('price')} {...errorHelper(props,'price')}/>\r\n\r\n                    <Select defaultValue = \"\" value={selectedCategory} onChange={e => setSelectedCategory(e.target.value)}  name=\"category\" fullWidth  {...props.getFieldProps('category')}\r\n                    {...errorHelper(props,'category')}>\r\n                      {categoryArr.map(category => (\r\n                        <MenuItem key={category.id} value={category.name}>{category.name}</MenuItem>\r\n                      ))}\r\n                    </Select>\r\n\r\n                  <Input id=\"file\" type=\"file\" name=\"image\" onChange={(e) => handleChangeImage(e,props.setFieldValue )} hidden/> \r\n                    <Button style={{display:'block', margin:'10px 0px'}} color='primary'  variant=\"outlined\"><ImageIcon className=\"\"/><label htmlFor=\"file\">{imageName ? `${imageName} UPLOADED` : ' Product image'} </label></Button>\r\n                   {props.errors.image && props.touched.image ?  <div className=\"error\">{props.errors.image}</div>  : null} \r\n                </div>\r\n      \r\n                  <Button\r\n                  disabled={props.values.name && props.values.price && props.values.image && props.values.category && !disableButton ? false : true} \r\n                  className=\"my-3\" variant=\"contained\" color=\"primary\" \r\n                  onClick={productToUpdate.name ? () => updateProduct(props.values) : () => addProduct(props.values)} \r\n                  size=\"large\" fullWidth> { productToUpdate.name ? 'Update product' : 'Add product' } </Button>\r\n              </form> )}\r\n            </Formik>  \r\n            </>\r\n          </> }\r\n\r\n      </Drawer>\r\n      <main\r\n        className={clsx(classes.content, {\r\n          [classes.contentShift]: isOpen,\r\n        })}\r\n      >\r\n        <div className={classes.drawerHeader} />\r\n      </main>\r\n\r\n       {/* ToastContainer */}\r\n       <ToastContainer  draggable={false} /> \r\n    </div>\r\n    \r\n    \r\n  );\r\n}\r\n\r\nexport default SideBarCart\r\n"]},"metadata":{},"sourceType":"module"}