{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC\\\\Desktop\\\\ShoppingProject\\\\client\\\\src\\\\hoc\\\\Auth.js\";\nimport React, { useState, useEffect } from 'react'; // imrse\n\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const authGaurd = (ComposedComponent, setIsAuthenticate) => {\n  var _s = $RefreshSig$();\n\n  const AuthenticationCheck = props => {\n    _s();\n\n    const history = useHistory();\n    const [isAuth, setIsAuth] = useState(false);\n\n    const isUserAuthenticate = async () => {\n      const user = JSON.parse(localStorage.getItem('user'));\n\n      if (user) {\n        console.log('true');\n        setIsAuthenticate(true);\n        setIsAuth(true);\n\n        if (props.match.path === '/chart') {\n          if (user.admin) {\n            console.log('auth as admin');\n          } else {\n            console.log('not auth as admin');\n            history.push('/');\n          }\n        }\n      } else {\n        setIsAuthenticate(false);\n        setIsAuth(false);\n        console.log('not auth');\n        history.push('/signin');\n      }\n    };\n\n    useEffect(() => {\n      isUserAuthenticate();\n    }, []);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: isAuth ? /*#__PURE__*/_jsxDEV(ComposedComponent, { ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 14\n      }, this) : null\n    }, void 0, false);\n  };\n\n  _s(AuthenticationCheck, \"XJV1jaAtvasANK6Yj8iYk6hcUT0=\", false, function () {\n    return [useHistory];\n  });\n\n  return AuthenticationCheck;\n};","map":{"version":3,"sources":["C:/Users/מלאך גל/Desktop/ShoppingProject/client/src/hoc/Auth.js"],"names":["React","useState","useEffect","useHistory","authGaurd","ComposedComponent","setIsAuthenticate","AuthenticationCheck","props","history","isAuth","setIsAuth","isUserAuthenticate","user","JSON","parse","localStorage","getItem","console","log","match","path","admin","push"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C,C,CAAmD;;AACnD,SAASC,UAAT,QAA2B,kBAA3B;;;AAEA,OAAO,MAAMC,SAAS,GAAG,CAACC,iBAAD,EAAoBC,iBAApB,KAA0C;AAAA;;AAC/D,QAAMC,mBAAmB,GAAIC,KAAD,IAAW;AAAA;;AACnC,UAAMC,OAAO,GAAGN,UAAU,EAA1B;AACA,UAAM,CAACO,MAAD,EAASC,SAAT,IAAsBV,QAAQ,CAAC,KAAD,CAApC;;AAEA,UAAMW,kBAAkB,GAAG,YAAY;AACrC,YAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;;AACA,UAAIJ,IAAJ,EAAU;AACRK,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAb,QAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAK,QAAAA,SAAS,CAAC,IAAD,CAAT;;AACA,YAAGH,KAAK,CAACY,KAAN,CAAYC,IAAZ,KAAqB,QAAxB,EAAkC;AAChC,cAAGR,IAAI,CAACS,KAAR,EAAe;AACbJ,YAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACD,WAFD,MAEO;AACLD,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAV,YAAAA,OAAO,CAACc,IAAR,CAAa,GAAb;AACD;AACF;AACF,OAZD,MAaK;AACHjB,QAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAK,QAAAA,SAAS,CAAC,KAAD,CAAT;AACAO,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAV,QAAAA,OAAO,CAACc,IAAR,CAAa,SAAb;AACD;AACF,KArBD;;AAsBArB,IAAAA,SAAS,CAAC,MAAM;AACbU,MAAAA,kBAAkB;AACpB,KAFQ,EAEN,EAFM,CAAT;AAIE,wBACE;AAAA,gBACEF,MAAM,gBACP,QAAC,iBAAD,OAAuBF;AAAvB;AAAA;AAAA;AAAA;AAAA,cADO,GAEN;AAHF,qBADF;AAOD,GArCL;;AAD+D,KACzDD,mBADyD;AAAA,YAE3CJ,UAF2C;AAAA;;AAuC/D,SAAOI,mBAAP;AACH,CAxCM","sourcesContent":["import React, { useState, useEffect } from 'react' // imrse\r\nimport { useHistory } from \"react-router-dom\"\r\n        \r\nexport const authGaurd = (ComposedComponent, setIsAuthenticate) => {\r\n    const AuthenticationCheck = (props) => {\r\n        const history = useHistory()\r\n        const [isAuth, setIsAuth] = useState(false)\r\n\r\n        const isUserAuthenticate = async () => {\r\n          const user = JSON.parse(localStorage.getItem('user'))\r\n          if (user) {\r\n            console.log('true');\r\n            setIsAuthenticate(true)\r\n            setIsAuth(true) \r\n            if(props.match.path === '/chart') {\r\n              if(user.admin) {\r\n                console.log('auth as admin')\r\n              } else {\r\n                console.log('not auth as admin')\r\n                history.push('/')\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            setIsAuthenticate(false)\r\n            setIsAuth(false)\r\n            console.log('not auth')\r\n            history.push('/signin')\r\n          } \r\n        }     \r\n        useEffect(() => {\r\n           isUserAuthenticate()\r\n        }, [])\r\n        \r\n          return(\r\n            <>\r\n            { isAuth ?\r\n             <ComposedComponent {...props} /> \r\n            : null}\r\n            </>\r\n            )\r\n        }\r\n    return AuthenticationCheck\r\n}\r\n    \r\n\r\n\r\n\r\n        "]},"metadata":{},"sourceType":"module"}