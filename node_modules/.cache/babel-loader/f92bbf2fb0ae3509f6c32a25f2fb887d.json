{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC\\\\Desktop\\\\ShoppingProject\\\\client\\\\src\\\\components\\\\home\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react'; // Redux\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setIsAdmin, setProductsState, setDrawerState } from '../../store/actions'; // Components\n\nimport NewUserModal from './newUserModal/NewUserModal';\nimport ProductCard from '../productCard/ProductCard'; // Material ui components\n\nimport { Grid, Fab, Grow } from '@material-ui/core';\nimport { makeStyles, StylesProvider } from '@material-ui/core/styles'; // Material ui icons\n\nimport AddIcon from '@material-ui/icons/Add'; // React toastify \n\nimport { ToastContainer, toast, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css'; // Intro js\n\nimport { Steps } from 'intro.js-react';\nimport 'intro.js/introjs.css'; // Css\n\nimport './style.css'; // material ui style\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n    margin: '30px'\n  },\n  previewcard: {\n    width: '300px',\n    height: '340px',\n    margin: 'auto'\n  },\n  media: {\n    height: '400px',\n    width: '550px',\n    paddingTop: '56.25%'\n  },\n  previewmedia: {\n    width: '300px',\n    height: '200px'\n  },\n  fab: {\n    position: 'fixed',\n    bottom: '10px',\n    left: '75%',\n    whiteSpace: 'nowrap',\n    zIndex: '50px',\n    borderRadius: '20px',\n    backgroundColor: 'lightblue'\n  },\n  follow: {\n    textAlign: 'right'\n  },\n  card: {\n    backgroundImage: 'linear-gradient(#e6ecff, #99b3ff, #ffcccc)'\n  },\n  title: {\n    fontWeight: '600',\n    fontSize: '16px'\n  },\n  divider: {\n    margin: '15px 0px'\n  }\n}));\n\nconst Home = props => {\n  _s();\n\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('user'));\n  const cart = JSON.parse(localStorage.getItem('availableCart'));\n  const dispatch = useDispatch();\n  const products = useSelector(state => state.products.data);\n  const cartProducts = useSelector(state => state.products.cartProducts);\n  const isAdmin = useSelector(state => state.users.isAdmin); // const [isAdmin, setIsAdmin] = useState(user ? user.admin : null)\n\n  const [editModalOpen, setEditModalOpen] = useState(false);\n  const [vacationToEdit, setVacationToEdit] = useState('');\n  const [addVacationModalOpen, setAddVacationModalOpen] = useState(false);\n  const [deleteVacationModalOpen, setDeleteVacationModalOpen] = useState(false);\n  const [vacationToDelete, setVacationToDelete] = useState('');\n  const [vacationToDeleteId, setVacationToDeleteId] = useState(''); // Intro js states\n\n  const [firstEntry, setFirstEntry] = useState(false);\n  const [stepsEnabled, setStepsEnabled] = useState(false);\n  const [initialStep, setInitialStep] = useState(0);\n  const [steps, setSteps] = useState([{\n    element: '#stepOne',\n    intro: 'Here you can add new products to the cart ü•≥',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: '#stepTwo',\n    intro: 'In each card you are able to see all the details about the vacation ü•≥',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: '#stepThree',\n    intro: 'Start following vacations to get them on top of your page üòé',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: '#stepFour',\n    intro: 'Try to serach for your dreamy vacation, use the \"search by\" tab to take more specific search üîç',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }]); // Get all the vacations\n\n  const getProducts = async () => {\n    try {\n      const id = props.match.params.id;\n      const res = await fetch(`/product/${id}`);\n      const {\n        products\n      } = await res.json();\n      const response = await fetch(`/cart/${cart.id}`);\n      const data = await response.json();\n      const productsArr = [];\n      products.forEach(product => {\n        const productObj = { ...product\n        };\n        const isInCart = data.cart.CartItems.find(item => item.ProductId === product.id);\n\n        if (isInCart) {\n          productObj.quantity = isInCart.amount;\n          productObj.isInCart = true;\n        } else {\n          productObj.quantity = 1;\n        }\n\n        productsArr.push(productObj);\n      });\n      dispatch(setProductsState(productsArr));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const reduceQuantity = id => {\n    const productsArr = products;\n    const product = productsArr.find(product => product.id === id);\n    product.quantity -= 1;\n    dispatch(setProductsState(productsArr));\n  };\n\n  const addQuantity = id => {\n    const productsArr = products;\n    const product = productsArr.find(product => product.id === id);\n    product.quantity += 1;\n    dispatch(setProductsState(productsArr));\n  }; // intro js functions\n\n\n  const onExit = () => {\n    setStepsEnabled(false);\n    setFirstEntry(false);\n  }; // Trigger on component load\n\n\n  useEffect(() => {\n    getProducts();\n  }, [props.match.params.id]);\n  useEffect(() => {\n    getProducts();\n\n    if (user.newUser) {\n      // setFirstEntry(true)\n      setDrawerState(true); // delete user['newUser']\n      // localStorage.setItem('user', JSON.stringify(user))\n    }\n  }, []);\n  useEffect(() => {\n    user.admin ? dispatch(setIsAdmin(true)) : dispatch(setIsAdmin(false));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [firstEntry ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(NewUserModal, {\n        stepsEnabled: stepsEnabled,\n        setStepsEnabled: setStepsEnabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Steps, {\n        enabled: stepsEnabled,\n        steps: steps,\n        initialStep: initialStep,\n        onExit: onExit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true) : null, /*#__PURE__*/_jsxDEV(StylesProvider, {\n      injectFirst: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [products ? products.length !== 0 ? products.map(product => /*#__PURE__*/_jsxDEV(Grow, {\n            in: true,\n            timeout: 700,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 11,\n              lg: 5,\n              className: classes.root,\n              children: /*#__PURE__*/_jsxDEV(ProductCard, {\n                product: product,\n                reduceQuantity: reduceQuantity,\n                addQuantity: addQuantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this)\n          }, product.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }, this)) : null : null, /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Home, \"C4YVQo8SISpQBpdaI0O5mFJ11aA=\", false, function () {\n  return [useStyles, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/◊û◊ú◊ê◊ö ◊í◊ú/Desktop/ShoppingProject/client/src/components/home/Home.js"],"names":["React","useEffect","useState","useDispatch","useSelector","setIsAdmin","setProductsState","setDrawerState","NewUserModal","ProductCard","Grid","Fab","Grow","makeStyles","StylesProvider","AddIcon","ToastContainer","toast","Zoom","Steps","useStyles","theme","root","display","justifyContent","margin","previewcard","width","height","media","paddingTop","previewmedia","fab","position","bottom","left","whiteSpace","zIndex","borderRadius","backgroundColor","follow","textAlign","card","backgroundImage","title","fontWeight","fontSize","divider","Home","props","classes","user","JSON","parse","localStorage","getItem","cart","dispatch","products","state","data","cartProducts","isAdmin","users","editModalOpen","setEditModalOpen","vacationToEdit","setVacationToEdit","addVacationModalOpen","setAddVacationModalOpen","deleteVacationModalOpen","setDeleteVacationModalOpen","vacationToDelete","setVacationToDelete","vacationToDeleteId","setVacationToDeleteId","firstEntry","setFirstEntry","stepsEnabled","setStepsEnabled","initialStep","setInitialStep","steps","setSteps","element","intro","tooltipClass","getProducts","id","match","params","res","fetch","json","response","productsArr","forEach","product","productObj","isInCart","CartItems","find","item","ProductId","quantity","amount","push","err","console","log","reduceQuantity","addQuantity","onExit","newUser","admin","length","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\n// Redux\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setIsAdmin, setProductsState, setDrawerState } from '../../store/actions'\r\n// Components\r\nimport NewUserModal from './newUserModal/NewUserModal'\r\nimport ProductCard from '../productCard/ProductCard'\r\n// Material ui components\r\nimport { Grid, Fab, Grow } from '@material-ui/core'\r\nimport { makeStyles, StylesProvider } from '@material-ui/core/styles'\r\n// Material ui icons\r\nimport AddIcon  from '@material-ui/icons/Add'\r\n// React toastify \r\nimport { ToastContainer, toast, Zoom } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n// Intro js\r\nimport { Steps } from 'intro.js-react'\r\nimport 'intro.js/introjs.css'\r\n// Css\r\nimport './style.css'\r\n\r\n\r\n// material ui style\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display:'flex',\r\n    justifyContent:'center',\r\n    margin:'30px'\r\n  },\r\n  previewcard:{\r\n    width:'300px',\r\n    height:'340px',\r\n    margin:'auto'\r\n  },\r\n  media: {\r\n    height: '400px',\r\n    width:'550px',\r\n    paddingTop: '56.25%',\r\n  },\r\n  previewmedia: {\r\n    width:'300px',\r\n    height:'200px'\r\n  },\r\n  fab: {\r\n    position:'fixed',\r\n    bottom: '10px',\r\n    left: '75%',\r\n    whiteSpace: 'nowrap',\r\n    zIndex: '50px',\r\n    borderRadius:'20px',\r\n    backgroundColor:'lightblue'\r\n  },\r\n  follow:{\r\n    textAlign:'right'\r\n  },\r\n  card: {\r\n    backgroundImage:'linear-gradient(#e6ecff, #99b3ff, #ffcccc)'\r\n  },\r\n  title: { \r\n    fontWeight:'600',\r\n    fontSize:'16px'\r\n  },\r\n  divider: {\r\n    margin:'15px 0px'\r\n  },\r\n}))\r\n\r\n const Home = (props) => {\r\n  const classes = useStyles()\r\n  const user = JSON.parse(localStorage.getItem('user'))\r\n  const cart = JSON.parse(localStorage.getItem('availableCart'))\r\n  const dispatch = useDispatch()\r\n  const products = useSelector(state => state.products.data)\r\n  const cartProducts = useSelector(state => state.products.cartProducts)\r\n\r\n  const isAdmin = useSelector(state => state.users.isAdmin)\r\n  // const [isAdmin, setIsAdmin] = useState(user ? user.admin : null)\r\n  const [editModalOpen, setEditModalOpen] = useState(false)\r\n  const [vacationToEdit, setVacationToEdit] = useState('')\r\n  const [addVacationModalOpen, setAddVacationModalOpen] = useState(false)\r\n  const [deleteVacationModalOpen, setDeleteVacationModalOpen] = useState(false)\r\n  const [vacationToDelete, setVacationToDelete] = useState('')\r\n  const [vacationToDeleteId, setVacationToDeleteId] = useState('')\r\n  // Intro js states\r\n  const [firstEntry, setFirstEntry] = useState(false)\r\n  const [stepsEnabled, setStepsEnabled] = useState(false)\r\n  const [initialStep, setInitialStep] = useState(0)\r\n  const [steps, setSteps] = useState([\r\n      { element:'#stepOne', intro: 'Here you can add new products to the cart ü•≥', position: 'left', tooltipClass: 'myTooltipClass' },\r\n      { element:'#stepTwo', intro: 'In each card you are able to see all the details about the vacation ü•≥', position: 'left', tooltipClass: 'myTooltipClass' },\r\n      { element:'#stepThree', intro:'Start following vacations to get them on top of your page üòé', position: 'left', tooltipClass: 'myTooltipClass' },\r\n      { element:'#stepFour', intro: 'Try to serach for your dreamy vacation, use the \"search by\" tab to take more specific search üîç', position: 'left', tooltipClass: 'myTooltipClass' },\r\n  ])\r\n\r\n\r\n  // Get all the vacations\r\n  const getProducts = async () => {\r\n    try {\r\n\r\n      const id = props.match.params.id\r\n      const res = await fetch(`/product/${id}`)\r\n      const { products } = await res.json()\r\n      const response = await fetch(`/cart/${cart.id}`)\r\n      const data  = await response.json()\r\n      const productsArr = []\r\n      products.forEach(product => {\r\n        const productObj = {\r\n          ...product,\r\n        }\r\n        const isInCart = data.cart.CartItems.find(item => item.ProductId === product.id)\r\n        if(isInCart) {\r\n          productObj.quantity = isInCart.amount\r\n          productObj.isInCart = true\r\n        } else {\r\n          productObj.quantity = 1\r\n        }\r\n        productsArr.push(productObj)\r\n      })\r\n      dispatch(setProductsState(productsArr))\r\n    } catch(err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  const reduceQuantity = (id) => {\r\n    const productsArr = products\r\n    const product = productsArr.find(product => product.id === id)\r\n    product.quantity -= 1\r\n    dispatch(setProductsState(productsArr))\r\n\r\n\r\n  }\r\n\r\n  const addQuantity = (id) => {\r\n    const productsArr = products\r\n    const product = productsArr.find(product => product.id === id)\r\n    product.quantity += 1\r\n    dispatch(setProductsState(productsArr))\r\n\r\n  }\r\n \r\n  // intro js functions\r\n  const onExit = () => {\r\n    setStepsEnabled(false)\r\n    setFirstEntry(false)\r\n  }\r\n\r\n  // Trigger on component load\r\n  useEffect(() => {\r\n    getProducts()\r\n  }, [props.match.params.id])\r\n\r\n  useEffect(() => {\r\n    getProducts()\r\n   if (user.newUser) {\r\n    // setFirstEntry(true)\r\n    setDrawerState(true)\r\n    // delete user['newUser']\r\n    // localStorage.setItem('user', JSON.stringify(user))\r\n   }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    user.admin ? dispatch(setIsAdmin(true)) : dispatch(setIsAdmin(false))\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n \r\n      {firstEntry ? \r\n      <>\r\n      <NewUserModal stepsEnabled={stepsEnabled} setStepsEnabled={setStepsEnabled}/>\r\n      <Steps enabled={stepsEnabled} steps={steps} initialStep={initialStep} onExit={onExit}/>\r\n     </>\r\n      : null}\r\n      <StylesProvider injectFirst>\r\n        <div className=\"container\">\r\n          <Grid container>\r\n              {products ? \r\n                products.length !== 0 ?  products.map(product => (\r\n                <Grow in={true}  timeout={700} key={product.id}>\r\n                <Grid item xs={11} lg={5}  className={classes.root}  >\r\n                  <ProductCard product={product} reduceQuantity={reduceQuantity} addQuantity={addQuantity} />\r\n                </Grid> \r\n                </Grow>\r\n              )): null :  null  }\r\n            \r\n          \r\n           \r\n         \r\n            {/* ToastContainer */}\r\n            <ToastContainer /> \r\n         \r\n          </Grid>\r\n        </div>\r\n    </StylesProvider>\r\n  </>\r\n  )\r\n}\r\nexport default Home\r\n"]},"metadata":{},"sourceType":"module"}