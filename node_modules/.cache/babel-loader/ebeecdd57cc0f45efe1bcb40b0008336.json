{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC\\\\Desktop\\\\ShoppingProject\\\\client\\\\src\\\\components\\\\search\\\\Search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react'; // Redux\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setProductsState } from '../../store/actions'; // Material ui\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, InputBase, IconButton } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ClearIcon from '@material-ui/icons/Clear'; // Dates\n\nimport 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers'; // Css\n\nimport './style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  search: {\n    display: 'flex',\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: 'whitesmoke',\n    marginRight: theme.spacing(2),\n    marginLeft: theme.spacing(2),\n    width: '348px !important',\n    // width: 'auto',\n    color: 'black',\n    margin: '10px 0px',\n    [theme.breakpoints.up('md')]: {\n      width: 'auto !important'\n    }\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'right'\n  },\n  inputRoot: {\n    color: 'inherit',\n    fontSize: '13px'\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('md')]: {\n      width: '20ch'\n    }\n  },\n  sortBtn: {\n    padding: '0px 8px 8px'\n  }\n}));\n\nconst Search = () => {\n  _s();\n\n  const [searchValue, setSearchValue] = useState('');\n  const [searchBy, setSearchBy] = useState('General');\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [selectedStartDate, setSelectedStartDate] = useState(new Date());\n  const [selectedEndDate, setSelectedEndDate] = useState(new Date());\n  const user = JSON.parse(localStorage.getItem('user'));\n  const dispatch = useDispatch();\n  const vacations = useSelector(state => state.products);\n  const classes = useStyles();\n  const open = Boolean(anchorEl);\n\n  const handleClick = e => open ? setAnchorEl(null) : setAnchorEl(e.currentTarget);\n\n  const handleStartDateChange = date => setSelectedStartDate(date);\n\n  const handleEndDateChange = date => setSelectedEndDate(date);\n\n  const clearInput = () => {\n    setSearchValue('');\n\n    if (searchBy === 'Dates') {\n      setSelectedStartDate(new Date());\n      setSelectedEndDate(new Date());\n      bringAllVacation();\n    }\n  };\n\n  const bringAllVacation = async () => {\n    const res = await fetch(`https://vacationweb.herokuapp.com/vacation`);\n    const {\n      vacations\n    } = await res.json();\n    vacations.forEach(vacation => Boolean(vacation.Follows.find(follow => Number(follow.UserId) === Number(user.id))) ? vacation.isFollow = true : vacation.isFollow = false);\n    vacations.sort((x, y) => x.isFollow - y.isFollow).reverse();\n    dispatch(setProductsState(vacations));\n  };\n\n  const findVacations = async () => {// let value = ''\n    // if(searchBy === 'Dates') value = { startDate:selectedStartDate, endDate: selectedEndDate }\n    // else value = searchValue\n    // const searchObj = { value, type:searchBy }\n    // const res = await fetch(`https://vacationweb.herokuapp.com/vacation/search/${JSON.stringify(searchObj)}`)\n    // const { vacations } = await res.json()\n    // vacations.forEach(vacation => Boolean(vacation.Follows.find(follow => Number(follow.UserId) === Number(user.id))) ? vacation.isFollow = true : vacation.isFollow = false)\n    // vacations.sort((x, y) => {\n    //   if (x.isFollow === y.isFollow) return 0\n    //   if (x.isFollow)  return -1\n    //   if (y.isFollow) return 1\n    //   return 0\n    // })\n    // dispatch(setProductsState(vacations))\n  };\n\n  useEffect(() => {}, [searchValue]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.search,\n      id: \"stepFour\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.searchIcon,\n        children: [\" \", /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 50\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(InputBase, {\n        type: \"text\",\n        value: searchValue,\n        onChange: e => setSearchValue(e.target.value),\n        placeholder: \"Search\\u2026\",\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: () => clearInput(),\n        children: [\" \", /*#__PURE__*/_jsxDEV(ClearIcon, {\n          fontSize: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 55\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 12\n    }, this)\n  }, void 0, false);\n};\n\n_s(Search, \"oB0tef0Sv13+xufASwF8zK8YycI=\", false, function () {\n  return [useDispatch, useSelector, useStyles];\n});\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["C:/Users/מלאך גל/Desktop/ShoppingProject/client/src/components/search/Search.js"],"names":["React","useState","useEffect","useDispatch","useSelector","setProductsState","makeStyles","Button","InputBase","IconButton","SearchIcon","ClearIcon","DateFnsUtils","MuiPickersUtilsProvider","KeyboardDatePicker","useStyles","theme","search","display","position","borderRadius","shape","backgroundColor","marginRight","spacing","marginLeft","width","color","margin","breakpoints","up","searchIcon","padding","height","pointerEvents","alignItems","justifyContent","inputRoot","fontSize","inputInput","paddingLeft","transition","transitions","create","sortBtn","Search","searchValue","setSearchValue","searchBy","setSearchBy","anchorEl","setAnchorEl","selectedStartDate","setSelectedStartDate","Date","selectedEndDate","setSelectedEndDate","user","JSON","parse","localStorage","getItem","dispatch","vacations","state","products","classes","open","Boolean","handleClick","e","currentTarget","handleStartDateChange","date","handleEndDateChange","clearInput","bringAllVacation","res","fetch","json","forEach","vacation","Follows","find","follow","Number","UserId","id","isFollow","sort","x","y","reverse","findVacations","target","value","root","input"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\n// Redux\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setProductsState } from '../../store/actions'\r\n// Material ui\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { Button, InputBase, IconButton } from '@material-ui/core'\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport ClearIcon from '@material-ui/icons/Clear'\r\n// Dates\r\nimport 'date-fns';\r\nimport DateFnsUtils from '@date-io/date-fns'\r\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers'\r\n// Css\r\nimport './style.css'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    search: {\r\n      display: 'flex',\r\n      position: 'relative',\r\n      borderRadius: theme.shape.borderRadius,\r\n      backgroundColor: 'whitesmoke',\r\n      marginRight: theme.spacing(2),\r\n      marginLeft: theme.spacing(2),\r\n      width: '348px !important',\r\n      // width: 'auto',\r\n      color:'black',\r\n      margin: '10px 0px',\r\n      [theme.breakpoints.up('md')]: {\r\n        width: 'auto !important',\r\n      },\r\n    },\r\n    searchIcon: {\r\n      padding: theme.spacing(0, 2),\r\n      height: '100%',\r\n      position: 'absolute',\r\n      pointerEvents: 'none',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'right',\r\n    },\r\n    inputRoot: {\r\n      color: 'inherit',\r\n      fontSize: '13px'\r\n    },\r\n    inputInput: {\r\n      padding: theme.spacing(1, 1, 1, 0),\r\n      paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n      transition: theme.transitions.create('width'),\r\n      width: '100%',\r\n      [theme.breakpoints.up('md')]: {\r\n        width: '20ch',\r\n      },\r\n    },\r\n    sortBtn: {\r\n      padding:'0px 8px 8px'\r\n    }\r\n   \r\n    \r\n  }))\r\n\r\nconst Search = () => {\r\n    const [searchValue, setSearchValue] = useState('')\r\n    const [searchBy, setSearchBy] = useState('General')\r\n    const [anchorEl, setAnchorEl] = useState(null)\r\n    const [selectedStartDate, setSelectedStartDate] = useState(new Date())\r\n    const [selectedEndDate, setSelectedEndDate] = useState(new Date())\r\n    const user = JSON.parse(localStorage.getItem('user'))\r\n    const dispatch = useDispatch()\r\n    const vacations = useSelector(state => state.products)\r\n    const classes = useStyles()\r\n    const open = Boolean(anchorEl)\r\n  \r\n    const handleClick = (e) => open ? setAnchorEl(null) : setAnchorEl(e.currentTarget)\r\n    const handleStartDateChange = (date) => setSelectedStartDate(date)\r\n    const handleEndDateChange = (date) => setSelectedEndDate(date)\r\n    const clearInput = () => {\r\n      setSearchValue('')\r\n      if(searchBy === 'Dates') {\r\n        setSelectedStartDate(new Date())\r\n        setSelectedEndDate(new Date())\r\n        bringAllVacation()\r\n    }\r\n  }\r\n\r\n    const bringAllVacation = async () => {\r\n      const res = await fetch(`https://vacationweb.herokuapp.com/vacation`)\r\n      const { vacations } = await res.json()\r\n      vacations.forEach(vacation => Boolean(vacation.Follows.find(follow => Number(follow.UserId) === Number(user.id))) ? vacation.isFollow = true : vacation.isFollow = false)\r\n      vacations.sort((x, y) =>  x.isFollow - y.isFollow).reverse()\r\n      dispatch(setProductsState(vacations))\r\n    }\r\n\r\n    const findVacations = async () => {\r\n      // let value = ''\r\n      // if(searchBy === 'Dates') value = { startDate:selectedStartDate, endDate: selectedEndDate }\r\n      // else value = searchValue\r\n      // const searchObj = { value, type:searchBy }\r\n      // const res = await fetch(`https://vacationweb.herokuapp.com/vacation/search/${JSON.stringify(searchObj)}`)\r\n      // const { vacations } = await res.json()\r\n      // vacations.forEach(vacation => Boolean(vacation.Follows.find(follow => Number(follow.UserId) === Number(user.id))) ? vacation.isFollow = true : vacation.isFollow = false)\r\n      // vacations.sort((x, y) => {\r\n      //   if (x.isFollow === y.isFollow) return 0\r\n      //   if (x.isFollow)  return -1\r\n      //   if (y.isFollow) return 1\r\n      //   return 0\r\n      // })\r\n      // dispatch(setProductsState(vacations))\r\n    }\r\n \r\n    useEffect(() => {\r\n      \r\n    }, [searchValue])\r\n\r\n\r\n    return (\r\n        <>\r\n           <div className={classes.search} id='stepFour'>\r\n            <div className={classes.searchIcon}> <SearchIcon/> </div>\r\n        \r\n            <InputBase\r\n              type='text'\r\n              value={searchValue}\r\n              onChange={e =>  setSearchValue(e.target.value)}\r\n              placeholder=\"Search…\"\r\n              classes={{\r\n                root: classes.inputRoot,\r\n                input: classes.inputInput,\r\n              }}\r\n            />\r\n            \r\n  \r\n           <IconButton onClick={() => clearInput() }> <ClearIcon fontSize=\"small\"/> </IconButton> \r\n           \r\n          </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Search\r\n"]},"metadata":{},"sourceType":"module"}