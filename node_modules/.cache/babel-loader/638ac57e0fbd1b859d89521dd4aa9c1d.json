{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC\\\\Desktop\\\\ShoppingProject\\\\client\\\\src\\\\components\\\\sideBarCart\\\\SideBarCart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom'; // Redux\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setCartProducts, updateTotalPrice, resetTotalPrice, setProductsState, setDrawerState, setProductToUpdate } from '../../store/actions';\nimport clsx from 'clsx';\nimport './style.css'; // formik\n\nimport { Formik } from 'formik';\nimport * as Yup from 'yup'; // Cloudinary\n\nimport { Image } from 'cloudinary-react'; // Components\n\nimport Search from '../search/Search';\nimport { Link } from 'react-router-dom';\nimport { Grid, TextField, Button, Collapse, Divider, Select, MenuItem } from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport Drawer from '@material-ui/core/Drawer';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { AppBar, Input } from '@material-ui/core';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ImageIcon from '@material-ui/icons/Image';\nimport AddIcon from '@material-ui/icons/Add'; // React toastify \n\nimport { ToastContainer, toast, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Nav, Navbar } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst drawerWidth = 300;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    fontFamily: 'roboto'\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    backgroundColor: 'white',\n    color: 'black'\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  title: {\n    color: 'black'\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  hide: {\n    display: 'none'\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    width: drawerWidth\n  },\n  drawerHeader: {\n    display: 'flex',\n    justifyContent: 'space-around',\n    marginTop: '10px'\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    marginLeft: -drawerWidth\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginLeft: 0\n  }\n}));\n\nconst SideBarCart = props => {\n  _s();\n\n  const cart = JSON.parse(localStorage.getItem('availableCart'));\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = useState(false);\n  const [isDelete, setIsDelete] = useState(true);\n  const [imageName, setImageName] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [disableButton, setDisableButton] = useState(false);\n  const [categoryArr, setCategoryArr] = useState([]);\n  const [initialValues, setInitialValues] = useState({\n    name: '',\n    price: '',\n    image: '',\n    category: ''\n  });\n  const cartProducts = useSelector(state => state.products.cartProducts);\n  const totalPrice = useSelector(state => state.products.totalPrice);\n  const isAdmin = useSelector(state => state.users.isAdmin);\n  const productToUpdate = useSelector(state => state.products.productToUpdate);\n  const products = useSelector(state => state.products.data);\n  const isOpen = useSelector(state => state.drawer.isOpen);\n  const dispatch = useDispatch();\n  const location = useLocation(); // Form validation\n\n  const validationSchema = Yup.object().shape({\n    name: Yup.string().required('name is required!'),\n    price: Yup.string().required('price is required!'),\n    image: Yup.string().required('image is required!'),\n    category: Yup.string().required('category is required!')\n  });\n\n  const errorHelper = (formik, values) => ({\n    error: formik.errors[values] && formik.touched[values] ? true : false,\n    helperText: formik.errors[values] && formik.touched[values] ? formik.errors[values] : null\n  });\n\n  const handleDrawerOpen = () => {\n    dispatch(setDrawerState(true));\n  };\n\n  const handleDrawerClose = () => {\n    dispatch(setDrawerState(false));\n  }; // Toastify\n\n\n  const successToast = message => {\n    toast(message, {\n      draggable: true,\n      position: toast.POSITION.BOTTOM_RIGHT,\n      transition: Zoom,\n      autoClose: 2000\n    });\n  };\n\n  const clearCart = async () => {\n    const res = await fetch('/cart_item/cart', {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: cart.id\n      })\n    });\n    const {\n      success\n    } = await res.json();\n\n    if (success) {\n      dispatch(setCartProducts([]));\n      dispatch(resetTotalPrice());\n    }\n  };\n\n  const removeFromCart = async id => {\n    const res = await fetch('/cart_item', {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        CartId: cart.id,\n        ProductId: id\n      })\n    });\n    const {\n      success\n    } = await res.json();\n\n    if (success) {\n      const productsArr = products;\n      const deletedItemInProducts = productsArr.find(item => item.id === id);\n      deletedItemInProducts.isInCart = false;\n      deletedItemInProducts.amount = 1;\n      dispatch(setProductsState(productsArr));\n      const deletedItemInCart = cartProducts.find(item => item.id === id);\n      const cartProductsArr = cartProducts.filter(item => item.id !== id);\n      dispatch(setCartProducts(cartProductsArr));\n      dispatch(updateTotalPrice(-deletedItemInCart.totalPrice));\n    }\n  };\n\n  const updateProduct = async values => {\n    setDisableButton(true);\n    const CategoryId = categoryArr.find(category => category.name === values.category).id;\n    const res = await fetch('/product', {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ ...values,\n        imageName,\n        CategoryId,\n        id: productToUpdate.id\n      })\n    });\n    const {\n      product\n    } = await res.json();\n    const productsArr = products;\n    const findIndex = productsArr.findIndex(item => item.id === product.id);\n    productsArr[findIndex] = product;\n    dispatch(setProductsState(productsArr));\n    successToast('Product Updated! 😀');\n    setDisableButton(false);\n  };\n\n  const getProducts = async () => {\n    console.log('get products');\n    const res = await fetch(`/cart/${cart.id}`);\n    const data = await res.json();\n    console.log(data);\n    const itemsArr = [];\n    let count = 0;\n    data.cart.CartItems.forEach(item => {\n      const cartItem = {\n        id: item.ProductId,\n        name: item.Product.name,\n        singlePrice: item.Product.price,\n        totalPrice: item.amount * item.Product.price,\n        amount: item.amount,\n        image: item.Product.image\n      };\n      count += cartItem.totalPrice;\n      itemsArr.push(cartItem);\n    });\n\n    if (count !== totalPrice) {\n      dispatch(updateTotalPrice(count));\n    }\n\n    dispatch(setCartProducts(itemsArr));\n  }; // Handle image change  \n\n\n  const handleChangeImage = (e, setFieldValue) => {\n    const reader = new FileReader();\n    setFieldValue('image', e.target.files[0]);\n\n    if (e.target.files.length === 0) {\n      setImageName('');\n      setFieldValue('image', '');\n    } else {\n      reader.readAsDataURL(e.target.files[0]);\n\n      reader.onloadend = () => {\n        setFieldValue('image', reader.result);\n      };\n\n      setImageName(e.target.files[0].name);\n    }\n  };\n\n  const addProduct = async values => {\n    setDisableButton(true);\n    const CategoryId = categoryArr.find(category => category.name === values.category).id;\n    const res = await fetch('/product', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ ...values,\n        imageName,\n        CategoryId\n      })\n    });\n    const {\n      product\n    } = await res.json();\n    console.log(product);\n\n    if (`/products/${CategoryId}` === location.pathname) {\n      const cartProductsArr = products;\n      cartProductsArr.push({ ...product,\n        quanity: 1\n      });\n      dispatch(setProductsState(cartProductsArr));\n      successToast('Product Added! 😀');\n      setDisableButton(false);\n    }\n  };\n\n  const getCategories = async () => {\n    const res = await fetch('/category');\n    const {\n      categories\n    } = await res.json();\n    const categoryArr = [];\n    categories.forEach(category => categoryArr.push({\n      name: category.name,\n      id: category.id\n    }));\n    setCategoryArr(categoryArr);\n  };\n\n  useEffect(() => {\n    console.log('im here');\n\n    if (isAdmin) {\n      getCategories();\n    } else {\n      getProducts();\n    }\n  }, [isAdmin]);\n\n  const changeStatetoAdd = () => {\n    dispatch(setProductToUpdate({}));\n    setInitialValues({\n      name: '',\n      price: '',\n      image: '',\n      category: ''\n    });\n    setImageName('');\n  };\n\n  useEffect(() => {\n    if (productToUpdate.name) {\n      const {\n        name,\n        price,\n        image,\n        Category,\n        imageName\n      } = productToUpdate;\n      setInitialValues({\n        name,\n        price,\n        image,\n        category: Category.name\n      });\n      setImageName(imageName);\n      setSelectedCategory(Category.name);\n    }\n  }, [productToUpdate]); // disable the delete product option on the payment page\n\n  useEffect(() => {\n    location.pathname === '/payment' ? setIsDelete(false) : setIsDelete(true);\n  }, [location.pathname]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"fixed\",\n      className: clsx(classes.appBar, {\n        [classes.appBarShift]: open\n      }),\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          color: \"inherit\",\n          onClick: handleDrawerOpen,\n          edge: \"start\",\n          className: clsx(classes.menuButton, open && classes.hide),\n          children: /*#__PURE__*/_jsxDEV(ShoppingCartIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Navbar, {\n          bg: \"white\",\n          expand: \"md\",\n          className: \"navbar\",\n          children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n            style: {\n              height: '40px'\n            },\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/products/1\",\n              style: {\n                textDecoration: 'none',\n                marginRight: '25%'\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.title,\n                variant: \"h6\",\n                noWrap: true,\n                children: \" ShoppingApp \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n            className: \"navbar_collapse\",\n            children: /*#__PURE__*/_jsxDEV(Nav, {\n              className: \"mr-auto\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products/1\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"link_desc\",\n                    children: \"Dairy and eggs\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products/2\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"link_desc\",\n                    children: \"Meat\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products/3\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"link_desc\",\n                    children: \"Fruits And Vegetables\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products/4\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"link_desc\",\n                    children: \"Drinks and alcohol\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 350,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products/5\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"link_desc\",\n                    children: \"Baking and canning cooking\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.searchLink,\n                children: [\" \", /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 62\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/logout\",\n                style: {\n                  textDecoration: 'none',\n                  color: 'black',\n                  marginTop: '7px'\n                },\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"inherit\",\n                  children: [/*#__PURE__*/_jsxDEV(ExitToAppIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 31\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"link_desc\",\n                    children: \"Logout\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 48\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 31\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n      className: classes.drawer,\n      variant: \"persistent\",\n      anchor: \"left\",\n      open: isOpen,\n      classes: {\n        paper: classes.drawerPaper\n      },\n      children: !isAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.drawerHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"cart_header\",\n            children: \"Your Cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              title: \"close sidebar\",\n              onClick: handleDrawerClose,\n              children: /*#__PURE__*/_jsxDEV(ChevronLeftIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary_card\",\n          children: cartProducts.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card_item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Image, {\n                className: \"product_img\",\n                cloudName: \"malachcloud\",\n                src: product.image,\n                width: \"70\",\n                height: \"40\",\n                crop: \"scale\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product_info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: [\"quanity: \", product.amount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: [\"total price: \", product.totalPrice, \"$\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: isDelete && /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: () => removeFromCart(product.id),\n                children: [\" \", /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 87\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 31\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 15\n            }, this)]\n          }, product.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 9\n        }, this), totalPrice === 0 ? /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"m-2\",\n          children: \"Your cart is empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"ml-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"total_price_span\",\n            children: \" Total price: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 34\n          }, this), \" $\", totalPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-group\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/payment\",\n            style: {\n              textDecoration: 'none',\n              pointerEvents: totalPrice === 0 || !isDelete ? 'none' : ''\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"primary\",\n              className: \"m-2\",\n              disabled: totalPrice === 0 || !isDelete,\n              children: \" Payment page \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"secondary\",\n            onClick: clearCart,\n            className: \"m-2\",\n            disabled: totalPrice === 0 || !isDelete,\n            children: \" Clear cart \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin_panel_header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"admin_panel_h1\",\n            children: \"Admin panel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              title: \"add product\",\n              onClick: () => changeStatetoAdd(),\n              children: [\"  \", /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 81\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              title: \"close sidebar\",\n              onClick: handleDrawerClose,\n              children: /*#__PURE__*/_jsxDEV(ChevronLeftIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"action_header\",\n            children: productToUpdate.name ? 'Update product' : 'Add product'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Formik, {\n            initialValues: initialValues,\n            validationSchema: validationSchema,\n            enableReinitialize: true,\n            children: props => /*#__PURE__*/_jsxDEV(\"form\", {\n              style: {\n                textAlign: 'center',\n                margin: '10px'\n              },\n              onSubmit: props.handleSubmit,\n              autoComplete: \"off\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(TextField, {\n                  name: \"name\",\n                  margin: \"normal\",\n                  label: \"name\",\n                  variant: \"outlined\",\n                  fullWidth: true,\n                  ...props.getFieldProps('name'),\n                  ...errorHelper(props, 'name')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  name: \"price\",\n                  margin: \"normal\",\n                  label: \"price\",\n                  variant: \"outlined\",\n                  fullWidth: true,\n                  ...props.getFieldProps('price'),\n                  ...errorHelper(props, 'price')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  defaultValue: \"\",\n                  value: selectedCategory,\n                  onChange: e => setSelectedCategory(e.target.value),\n                  name: \"category\",\n                  fullWidth: true,\n                  ...props.getFieldProps('category'),\n                  ...errorHelper(props, 'category'),\n                  children: categoryArr.map(category => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: category.name,\n                    children: category.name\n                  }, category.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 452,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  id: \"file\",\n                  type: \"file\",\n                  name: \"image\",\n                  onChange: e => handleChangeImage(e, props.setFieldValue),\n                  hidden: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  style: {\n                    display: 'block',\n                    margin: '10px 0px'\n                  },\n                  color: \"primary\",\n                  variant: \"outlined\",\n                  children: [/*#__PURE__*/_jsxDEV(ImageIcon, {\n                    className: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 110\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"file\",\n                    children: [imageName ? `${imageName} UPLOADED` : ' Product image', \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 135\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 21\n                }, this), props.errors.image && props.touched.image ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"error\",\n                  children: props.errors.image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 66\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                disabled: props.values.name && props.values.price && props.values.image && props.values.category && !disableButton ? false : true,\n                className: \"my-3\",\n                variant: \"contained\",\n                color: \"primary\",\n                onClick: productToUpdate.name ? () => updateProduct(props.values) : () => addProduct(props.values),\n                size: \"large\",\n                fullWidth: true,\n                children: [\" \", productToUpdate.name ? 'Update product' : 'Add product', \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: clsx(classes.content, {\n        [classes.contentShift]: open\n      }),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.drawerHeader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      draggable: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 314,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SideBarCart, \"66ZTDVrnMwzeFzdaSxey6TcBRRY=\", false, function () {\n  return [useStyles, useTheme, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useDispatch, useLocation];\n});\n\n_c = SideBarCart;\nexport default SideBarCart;\n\nvar _c;\n\n$RefreshReg$(_c, \"SideBarCart\");","map":{"version":3,"sources":["C:/Users/מלאך גל/Desktop/ShoppingProject/client/src/components/sideBarCart/SideBarCart.js"],"names":["React","useState","useEffect","useLocation","useDispatch","useSelector","setCartProducts","updateTotalPrice","resetTotalPrice","setProductsState","setDrawerState","setProductToUpdate","clsx","Formik","Yup","Image","Search","Link","Grid","TextField","Button","Collapse","Divider","Select","MenuItem","makeStyles","useTheme","IconButton","BarChartIcon","ExitToAppIcon","Drawer","CloseIcon","AppBar","Input","Toolbar","Typography","ShoppingCartIcon","ChevronLeftIcon","ImageIcon","AddIcon","ToastContainer","toast","Zoom","Nav","Navbar","drawerWidth","useStyles","theme","root","display","fontFamily","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","backgroundColor","color","appBarShift","width","marginLeft","easeOut","enteringScreen","title","menuButton","marginRight","spacing","hide","drawer","flexShrink","drawerPaper","drawerHeader","justifyContent","marginTop","content","flexGrow","padding","contentShift","SideBarCart","props","cart","JSON","parse","localStorage","getItem","classes","open","setOpen","isDelete","setIsDelete","imageName","setImageName","selectedCategory","setSelectedCategory","disableButton","setDisableButton","categoryArr","setCategoryArr","initialValues","setInitialValues","name","price","image","category","cartProducts","state","products","totalPrice","isAdmin","users","productToUpdate","data","isOpen","dispatch","location","validationSchema","object","shape","string","required","errorHelper","formik","values","error","errors","touched","helperText","handleDrawerOpen","handleDrawerClose","successToast","message","draggable","position","POSITION","BOTTOM_RIGHT","autoClose","clearCart","res","fetch","method","headers","body","stringify","id","success","json","removeFromCart","CartId","ProductId","productsArr","deletedItemInProducts","find","item","isInCart","amount","deletedItemInCart","cartProductsArr","filter","updateProduct","CategoryId","product","findIndex","getProducts","console","log","itemsArr","count","CartItems","forEach","cartItem","Product","singlePrice","push","handleChangeImage","e","setFieldValue","reader","FileReader","target","files","length","readAsDataURL","onloadend","result","addProduct","pathname","quanity","getCategories","categories","changeStatetoAdd","Category","height","textDecoration","searchLink","paper","map","pointerEvents","textAlign","margin","handleSubmit","getFieldProps","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\n// Redux\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setCartProducts, updateTotalPrice, resetTotalPrice, setProductsState, setDrawerState, setProductToUpdate } from '../../store/actions'\r\nimport clsx from 'clsx';\r\nimport './style.css'\r\n// formik\r\nimport { Formik } from 'formik'\r\nimport * as Yup from 'yup'\r\n// Cloudinary\r\nimport { Image } from 'cloudinary-react'\r\n// Components\r\nimport Search from '../search/Search'\r\nimport { Link } from 'react-router-dom'\r\nimport { Grid, TextField, Button, Collapse, Divider, Select, MenuItem  } from '@material-ui/core'\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport BarChartIcon from '@material-ui/icons/BarChart'\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { AppBar, Input } from '@material-ui/core';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ImageIcon from '@material-ui/icons/Image'\r\nimport AddIcon from '@material-ui/icons/Add';\r\n// React toastify \r\nimport { ToastContainer, toast, Zoom } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n\r\nimport { Nav, Navbar } from 'react-bootstrap'\r\n\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    fontFamily:'roboto'\r\n  },\r\n  appBar: {\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    backgroundColor: 'white',\r\n    color:'black'\r\n  },\r\n  appBarShift: {\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    marginLeft: drawerWidth,\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  title: {\r\n      color:'black'\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  drawerHeader: {\r\n    display: 'flex',\r\n    justifyContent: 'space-around',\r\n    marginTop:'10px'\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    marginLeft: -drawerWidth,\r\n  },\r\n  contentShift: {\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginLeft: 0,\r\n  },\r\n}));\r\n\r\nconst SideBarCart = (props) => {\r\n  const cart = JSON.parse(localStorage.getItem('availableCart'))\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [open, setOpen] = useState(false)\r\n  const [isDelete, setIsDelete] = useState(true)\r\n  const [imageName, setImageName] = useState('')\r\n  const [selectedCategory, setSelectedCategory] = useState('')\r\n  const [disableButton, setDisableButton] = useState(false)\r\n  const [categoryArr, setCategoryArr] = useState([])\r\n  const [initialValues, setInitialValues] = useState({name:'', price: '', image: '', category: ''})\r\n  const cartProducts = useSelector(state => state.products.cartProducts)\r\n  const totalPrice = useSelector(state => state.products.totalPrice)\r\n  const isAdmin = useSelector(state => state.users.isAdmin)\r\n  const productToUpdate = useSelector(state => state.products.productToUpdate)\r\n  const products = useSelector(state => state.products.data)\r\n  const isOpen = useSelector(state => state.drawer.isOpen)\r\n  const dispatch = useDispatch()\r\n  const location = useLocation()\r\n \r\n  \r\n  // Form validation\r\n  const validationSchema = Yup.object().shape({\r\n    name:Yup.string()\r\n    .required('name is required!'),\r\n    price:Yup.string()\r\n    .required('price is required!'),\r\n    image:Yup.string()\r\n    .required('image is required!'),\r\n    category: Yup.string()\r\n    .required('category is required!'),\r\n    })\r\n\r\n  const errorHelper = (formik,values) => ({\r\n      error: formik.errors[values] && formik.touched[values] ? true : false,\r\n      helperText: formik.errors[values] && formik.touched[values] ? formik.errors[values]:null\r\n  })\r\n  const handleDrawerOpen = () => {\r\n    dispatch(setDrawerState(true))\r\n  }\r\n\r\n  const handleDrawerClose = () => {\r\n    dispatch(setDrawerState(false))\r\n  }\r\n\r\n    // Toastify\r\n    const successToast = (message) => {\r\n      toast(message, { \r\n       draggable: true, \r\n       position: toast.POSITION.BOTTOM_RIGHT,\r\n       transition: Zoom,\r\n       autoClose: 2000\r\n      })\r\n    }\r\n\r\n  const clearCart = async () => {\r\n    const res = await fetch('/cart_item/cart', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type':'application/json'\r\n      },\r\n      body: JSON.stringify({ id: cart.id })\r\n      })\r\n    const { success } = await res.json()\r\n    if(success) {\r\n     dispatch(setCartProducts([]))\r\n     dispatch(resetTotalPrice())\r\n\r\n   }\r\n  }\r\n\r\n  const removeFromCart = async (id) => {\r\n    const res = await fetch('/cart_item', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type':'application/json'\r\n      },\r\n      body: JSON.stringify({ CartId: cart.id, ProductId: id })\r\n      })\r\n    const { success } = await res.json()\r\n    if(success) {\r\n     const productsArr = products\r\n     const deletedItemInProducts = productsArr.find(item => item.id === id)\r\n     deletedItemInProducts.isInCart = false\r\n     deletedItemInProducts.amount = 1\r\n     dispatch(setProductsState(productsArr))\r\n     const deletedItemInCart = cartProducts.find(item => item.id === id)\r\n     const cartProductsArr = cartProducts.filter(item => item.id !== id)\r\n     dispatch(setCartProducts(cartProductsArr))\r\n     dispatch(updateTotalPrice(-deletedItemInCart.totalPrice))\r\n   }\r\n  }\r\n\r\n  const updateProduct = async (values) => {\r\n    setDisableButton(true)\r\n\r\n    const CategoryId = categoryArr.find(category => category.name === values.category).id\r\n    const res = await fetch('/product',{ method: 'PATCH',\r\n    headers: {\r\n        'Content-Type':'application/json'\r\n    },\r\n    body: JSON.stringify({ ...values, imageName, CategoryId, id: productToUpdate.id })\r\n})\r\n    const { product } = await res.json()\r\n    const productsArr = products\r\n    const findIndex = productsArr.findIndex(item => item.id === product.id) \r\n    productsArr[findIndex] = product \r\n    dispatch(setProductsState(productsArr))\r\n    successToast('Product Updated! 😀')\r\n    setDisableButton(false)\r\n\r\n    \r\n  }\r\n\r\n  const getProducts =  async () => {\r\n    console.log('get products');\r\n    const res = await fetch(`/cart/${cart.id}`)\r\n    const data  = await res.json()\r\n    console.log(data);\r\n    const itemsArr = []\r\n    let count = 0\r\n    data.cart.CartItems.forEach(item => {\r\n      const cartItem = {\r\n        id: item.ProductId,\r\n        name: item.Product.name,\r\n        singlePrice: item.Product.price,\r\n        totalPrice: item.amount * item.Product.price,\r\n        amount: item.amount,\r\n        image: item.Product.image\r\n      }\r\n      count += cartItem.totalPrice\r\n      itemsArr.push(cartItem)\r\n    })\r\n    if(count !== totalPrice) {\r\n      dispatch(updateTotalPrice(count))\r\n    }\r\n    dispatch(setCartProducts(itemsArr))   \r\n  }\r\n       \r\n    // Handle image change  \r\n    const handleChangeImage = (e,setFieldValue) => {\r\n      const reader = new FileReader()\r\n      setFieldValue('image', e.target.files[0])\r\n      if(e.target.files.length === 0) {\r\n      setImageName('')\r\n      setFieldValue('image','')\r\n      } \r\n      else {\r\n        reader.readAsDataURL(e.target.files[0])\r\n        reader.onloadend = () => {\r\n        setFieldValue('image',reader.result)\r\n        }\r\n        setImageName(e.target.files[0].name)\r\n      }\r\n  }\r\n\r\n  const addProduct = async (values) => {\r\n    setDisableButton(true)\r\n    const CategoryId = categoryArr.find(category => category.name === values.category).id\r\n    const res = await fetch('/product',{ method: 'POST',\r\n    headers: {\r\n        'Content-Type':'application/json'\r\n    },\r\n    body: JSON.stringify({ ...values,imageName, CategoryId })\r\n})\r\n    const { product } = await res.json()\r\n   console.log(product)\r\n    if(`/products/${CategoryId}` === location.pathname) {\r\n      const cartProductsArr = products\r\n      cartProductsArr.push({ ...product, quanity:1 })\r\n      dispatch(setProductsState(cartProductsArr))\r\n      successToast('Product Added! 😀')\r\n      setDisableButton(false)\r\n\r\n    }\r\n  }\r\n\r\n  const getCategories = async () => {\r\n    const res = await fetch('/category')\r\n    const { categories } = await res.json()\r\n    const categoryArr = []\r\n    categories.forEach(category => categoryArr.push({ name: category.name, id: category.id }))\r\n    setCategoryArr(categoryArr)\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log('im here');\r\n    if(isAdmin) {\r\n      getCategories() \r\n    } else {\r\n      getProducts()\r\n    }\r\n  }, [isAdmin])\r\n\r\n  const changeStatetoAdd = () => {\r\n    dispatch(setProductToUpdate({}))\r\n    setInitialValues({name:'', price: '', image: '', category: ''})\r\n    setImageName('')\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(productToUpdate.name) {\r\n    const { name, price, image, Category, imageName } = productToUpdate\r\n    setInitialValues({ name, price, image, category: Category.name })\r\n    setImageName(imageName)\r\n    setSelectedCategory(Category.name)\r\n    }\r\n  }, [productToUpdate]);\r\n\r\n  // disable the delete product option on the payment page\r\n  useEffect(() => {\r\n    location.pathname === '/payment' ? setIsDelete(false) : setIsDelete(true)\r\n  }, [location.pathname])\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {/* Top navbar */}\r\n      <AppBar position=\"fixed\" className={clsx(classes.appBar, {[classes.appBarShift]: open})}>\r\n        <Toolbar>\r\n          <IconButton color=\"inherit\" onClick={handleDrawerOpen} edge=\"start\" className={clsx(classes.menuButton, open && classes.hide)}>\r\n            <ShoppingCartIcon />\r\n          </IconButton>\r\n          <Navbar bg=\"white\" expand=\"md\" className=\"navbar\">\r\n              <Navbar.Brand style={{height:'40px'}}>\r\n                <Link to=\"/products/1\" style={{ textDecoration: 'none', marginRight:'25%'}}>\r\n                  <Typography className={classes.title} variant=\"h6\" noWrap> ShoppingApp </Typography>\r\n                </Link>\r\n              </Navbar.Brand>\r\n              <Navbar.Collapse className=\"navbar_collapse\">\r\n                <Nav className=\"mr-auto\">\r\n                 \r\n                            <Link to=\"/products/1\" style={{ textDecoration: 'none', color:'black', marginTop:'7px' }}>\r\n                            <IconButton color=\"inherit\">\r\n                            <span className=\"link_desc\">Dairy and eggs</span>\r\n                            </IconButton>\r\n                            </Link>\r\n                       \r\n                            <Link to=\"/products/2\" style={{ textDecoration: 'none', color:'black', marginTop:'7px' }}>\r\n                            <IconButton color=\"inherit\">\r\n                            <span className=\"link_desc\">Meat</span>\r\n                            </IconButton>\r\n                            </Link>\r\n                 \r\n                            <Link to=\"/products/3\" style={{ textDecoration: 'none', color:'black', marginTop:'7px'}}>\r\n                            <IconButton color=\"inherit\">\r\n                            <span className=\"link_desc\">Fruits And Vegetables</span>\r\n                            </IconButton>\r\n                            </Link>\r\n                      \r\n                            <Link to=\"/products/4\" style={{ textDecoration: 'none', color:'black', marginTop:'7px'}}>\r\n                            <IconButton color=\"inherit\">\r\n                            <span className=\"link_desc\">Drinks and alcohol</span>\r\n                            </IconButton>\r\n                            </Link>\r\n                        \r\n                \r\n                            <Link to=\"/products/5\" style={{ textDecoration: 'none', color:'black', marginTop:'7px'}}>\r\n                            <IconButton color=\"inherit\">\r\n                            <span className=\"link_desc\">Baking and canning cooking</span>\r\n                            </IconButton>\r\n                            </Link>\r\n                       \r\n                        <div className={classes.searchLink}> <Search/> </div>\r\n                   \r\n                          <Link to=\"/logout\" style={{ textDecoration: 'none', color:'black', marginTop:'7px' }}>\r\n                              <IconButton color=\"inherit\">\r\n                              <ExitToAppIcon/> <span className=\"link_desc\">Logout</span>\r\n                              </IconButton>\r\n                          </Link>\r\n                      \r\n                    </Nav>\r\n              </Navbar.Collapse>\r\n          </Navbar>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      {/* Side bar */}\r\n  \r\n      <Drawer className={classes.drawer} variant=\"persistent\" anchor=\"left\" open={isOpen}  classes={{ paper: classes.drawerPaper }}>\r\n        {!isAdmin ? \r\n        <>\r\n        <div className={classes.drawerHeader}>\r\n          <h3 className=\"cart_header\">Your Cart</h3>\r\n          <div>\r\n            <IconButton title=\"close sidebar\" onClick={handleDrawerClose}>\r\n              <ChevronLeftIcon/>\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n        <Divider />\r\n        <div className=\"summary_card\">\r\n          {cartProducts.map(product => (\r\n            <div className=\"card_item\" key={product.id}>\r\n              <div>\r\n                <Image className=\"product_img\"  cloudName=\"malachcloud\" src={product.image} width=\"70\" height=\"40\" crop=\"scale\" />\r\n              </div>\r\n              <div className=\"product_info\">\r\n                <h6>{product.name}</h6>\r\n                <h6>quanity: {product.amount}</h6>\r\n                <h6>total price: {product.totalPrice}$</h6>\r\n              </div>\r\n              <div>\r\n                { isDelete && <IconButton onClick={() => removeFromCart(product.id)}> <CloseIcon/> </IconButton> }\r\n              </div>\r\n            </div>\r\n            ))}\r\n          </div>\r\n\r\n          {totalPrice === 0 ?\r\n            <h5 className=\"m-2\">Your cart is empty</h5>\r\n           :\r\n            <h5 className=\"ml-2\"><span className=\"total_price_span\"> Total price: </span> ${totalPrice}</h5>\r\n          }\r\n    \r\n          <div className=\"btn-group\">\r\n          <Link to=\"/payment\" style={{ textDecoration: 'none', pointerEvents: totalPrice === 0 || !isDelete ? 'none' : ''}}>\r\n            <Button variant=\"outlined\" color=\"primary\" className=\"m-2\" disabled={totalPrice === 0 || !isDelete}> Payment page </Button>\r\n          </Link> \r\n            <Button variant=\"outlined\" color=\"secondary\" onClick={clearCart}  className=\"m-2\" disabled={totalPrice === 0 || !isDelete}> Clear cart </Button>\r\n          </div>\r\n          </>\r\n          : \r\n          <>\r\n          <div className=\"admin_panel_header\">\r\n          <h4 className=\"admin_panel_h1\">Admin panel</h4>  \r\n          <div>\r\n          <IconButton title=\"add product\" onClick={() => changeStatetoAdd() }>  <AddIcon/> </IconButton>\r\n         <IconButton title=\"close sidebar\" onClick={handleDrawerClose}>\r\n              <ChevronLeftIcon/>\r\n            </IconButton>\r\n          </div>\r\n      \r\n          </div>\r\n         \r\n          \r\n          <>\r\n          <h5 className=\"action_header\">{ productToUpdate.name ? 'Update product' : 'Add product' }</h5>\r\n            <Formik\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n              enableReinitialize={true}>\r\n              {(props) => (\r\n                <form style={{textAlign:'center', margin:'10px'}} onSubmit={props.handleSubmit} autoComplete=\"off\">\r\n                  <div>\r\n                    <TextField name=\"name\" margin=\"normal\" label=\"name\" variant=\"outlined\" fullWidth \r\n                    {...props.getFieldProps('name')} {...errorHelper(props,'name')}/>\r\n\r\n                    <TextField name=\"price\" margin=\"normal\" label=\"price\" variant=\"outlined\" fullWidth \r\n                    {...props.getFieldProps('price')} {...errorHelper(props,'price')}/>\r\n\r\n                  <Select defaultValue = \"\" value={selectedCategory} onChange={ e => setSelectedCategory(e.target.value)}  name=\"category\" fullWidth  {...props.getFieldProps('category')}\r\n                   {...errorHelper(props,'category')}>\r\n                    {categoryArr.map(category => (\r\n                      <MenuItem key={category.id} value={category.name}>{category.name}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n\r\n                  <Input id=\"file\" type=\"file\" name=\"image\" onChange={(e) => handleChangeImage(e,props.setFieldValue )} hidden/> \r\n                    <Button style={{display:'block', margin:'10px 0px'}} color='primary'  variant=\"outlined\"><ImageIcon className=\"\"/><label htmlFor=\"file\">{imageName ? `${imageName} UPLOADED` : ' Product image'} </label></Button>\r\n                   {props.errors.image && props.touched.image ?  <div className=\"error\">{props.errors.image}</div>  : null} \r\n\r\n                    \r\n                  </div>\r\n              \r\n                          \r\n                 \r\n                                \r\n                 \r\n                                      \r\n                \r\n\r\n                  {/* Alert error */}\r\n                  {/* <Collapse in={openAlert}>\r\n                    <Alert\r\n                      severity=\"error\"\r\n                      action={ <IconButton color=\"inherit\" size=\"small\" onClick={() => setOpenAlert(false) }> <CloseIcon fontSize=\"inherit\" /> </IconButton>}>\r\n                      {message}\r\n                    </Alert>\r\n                  </Collapse> */}\r\n\r\n                  <Button\r\n                  disabled={props.values.name && props.values.price && props.values.image && props.values.category && !disableButton ? false : true} \r\n                  className=\"my-3\" variant=\"contained\" color=\"primary\" \r\n                  onClick={productToUpdate.name ? () => updateProduct(props.values) : () => addProduct(props.values)} \r\n                  size=\"large\" fullWidth> { productToUpdate.name ? 'Update product' : 'Add product' } </Button>\r\n                 \r\n                </form> )}\r\n            </Formik>  \r\n            </>\r\n      \r\n          \r\n          </>\r\n        }\r\n        \r\n       \r\n        \r\n      \r\n      </Drawer>\r\n      <main\r\n        className={clsx(classes.content, {\r\n          [classes.contentShift]: open,\r\n        })}\r\n      >\r\n        <div className={classes.drawerHeader} />\r\n       \r\n      </main>\r\n       {/* ToastContainer */}\r\n       <ToastContainer  draggable={false} /> \r\n    </div>\r\n    \r\n    \r\n  );\r\n}\r\n\r\nexport default SideBarCart\r\n"]},"metadata":{},"sourceType":"module"}