{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC\\\\Desktop\\\\ShoppingProject\\\\client\\\\src\\\\components\\\\home\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react'; // Redux\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setProductsState } from '../../store/actions'; // Components\n\nimport NewUserModal from './newUserModal/NewUserModal';\nimport EditModal from './editModal/EditModal';\nimport AddVacationModal from './addVacationModal/AddVacationModal';\nimport DeleteVacationModal from './deletevacation/DeleteVacationModal';\nimport ProductCard from '../productCard/ProductCard'; // Material ui components\n\nimport { Grid, Fab, Grow, InputBase } from '@material-ui/core';\nimport { makeStyles, StylesProvider } from '@material-ui/core/styles'; // Material ui icons\n\nimport AddIcon from '@material-ui/icons/Add'; // React toastify \n\nimport { ToastContainer, toast, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css'; // Intro js\n\nimport { Steps } from 'intro.js-react';\nimport 'intro.js/introjs.css'; // Css\n\nimport './style.css'; // material ui style\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n    margin: '30px'\n  },\n  previewcard: {\n    width: '300px',\n    height: '340px',\n    margin: 'auto'\n  },\n  media: {\n    height: '400px',\n    width: '550px',\n    paddingTop: '56.25%'\n  },\n  previewmedia: {\n    width: '300px',\n    height: '200px'\n  },\n  fab: {\n    position: 'fixed',\n    bottom: '10px',\n    left: '75%',\n    whiteSpace: 'nowrap',\n    zIndex: '50px',\n    borderRadius: '20px',\n    backgroundColor: 'lightblue'\n  },\n  follow: {\n    textAlign: 'right'\n  },\n  card: {\n    backgroundImage: 'linear-gradient(#e6ecff, #99b3ff, #ffcccc)'\n  },\n  title: {\n    fontWeight: '600',\n    fontSize: '16px'\n  },\n  divider: {\n    margin: '15px 0px'\n  }\n}));\n\nconst Home = props => {\n  _s();\n\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('user'));\n  const dispatch = useDispatch();\n  const products = useSelector(state => state.products.data);\n  const [isAdmin, setIsAdmin] = useState(user ? user.admin : null);\n  const [followSets, setfollowSets] = useState(false);\n  const [editModalOpen, setEditModalOpen] = useState(false);\n  const [vacationToEdit, setVacationToEdit] = useState('');\n  const [addVacationModalOpen, setAddVacationModalOpen] = useState(false);\n  const [deleteVacationModalOpen, setDeleteVacationModalOpen] = useState(false);\n  const [vacationToDelete, setVacationToDelete] = useState('');\n  const [vacationToDeleteId, setVacationToDeleteId] = useState(''); // Intro js states\n\n  const [firstEntry, setFirstEntry] = useState(false);\n  const [stepsEnabled, setStepsEnabled] = useState(false);\n  const [initialStep, setInitialStep] = useState(0);\n  const [steps, setSteps] = useState([{\n    element: '#stepOne',\n    intro: 'Take a look on the vacation we offer ðŸ¥³',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: '#stepTwo',\n    intro: 'In each card you are able to see all the details about the vacation ðŸ¥³',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: '#stepThree',\n    intro: 'Start following vacations to get them on top of your page ðŸ˜Ž',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: '#stepFour',\n    intro: 'Try to serach for your dreamy vacation, use the \"search by\" tab to take more specific search ðŸ”',\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }]); // Get all the vacations\n\n  const getProducts = async () => {\n    try {\n      const id = props.match.params.id;\n      const res = await fetch(`/product/${id}`);\n      const {\n        products\n      } = await res.json();\n      const productsArr = [];\n      products.forEach(product => {\n        const productObj = { ...product,\n          quantity: 1\n        };\n        productsArr.push(productObj);\n      });\n      dispatch(setProductsState(productsArr));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const reduceQuantity = id => {\n    const product = products.find(product => product.id === id);\n    console.log(product);\n  };\n\n  const addQuantity = id => {\n    const product = products.find(product => product.id === id);\n    console.log(product);\n  }; // Edit vacation\n\n\n  const editVacation = id => {\n    setVacationToEdit(id);\n    setEditModalOpen(true);\n  }; // intro js functions\n\n\n  const onExit = () => {\n    setStepsEnabled(false);\n    setFirstEntry(false);\n  }; // Trigger on component load\n\n\n  useEffect(() => {\n    getProducts();\n\n    if (user.newUser) {\n      setFirstEntry(true);\n      delete user['newUser'];\n      localStorage.setItem('user', JSON.stringify(user));\n    }\n  }, [props.match.params.id]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [firstEntry ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(NewUserModal, {\n        stepsEnabled: stepsEnabled,\n        setStepsEnabled: setStepsEnabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Steps, {\n        enabled: stepsEnabled,\n        steps: steps,\n        initialStep: initialStep,\n        onExit: onExit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true) : null, /*#__PURE__*/_jsxDEV(StylesProvider, {\n      injectFirst: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [products ? products.length !== 0 ? products.map(product => /*#__PURE__*/_jsxDEV(Grow, {\n            in: true,\n            timeout: 700,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 11,\n              lg: 5,\n              className: classes.root,\n              children: /*#__PURE__*/_jsxDEV(ProductCard, {\n                product: product,\n                reduceQuantity: reduceQuantity,\n                addQuantity: addQuantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this)\n          }, product.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this)) : null : null, user.admin && /*#__PURE__*/_jsxDEV(Fab, {\n            color: \"primary\",\n            className: classes.fab,\n            onClick: () => setAddVacationModalOpen(true),\n            title: \"Add new vacation\",\n            children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 28\n          }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), addVacationModalOpen && /*#__PURE__*/_jsxDEV(AddVacationModal, {\n            addVacationModalOpen: addVacationModalOpen,\n            setAddVacationModalOpen: setAddVacationModalOpen\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 39\n          }, this), vacationToEdit && /*#__PURE__*/_jsxDEV(EditModal, {\n            setEditModalOpen: setEditModalOpen,\n            editModalOpen: editModalOpen,\n            vacationToEdit: vacationToEdit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 33\n          }, this), deleteVacationModalOpen && /*#__PURE__*/_jsxDEV(DeleteVacationModal, {\n            deleteVacationModalOpen: deleteVacationModalOpen,\n            setDeleteVacationModalOpen: setDeleteVacationModalOpen,\n            vacationName: vacationToDelete,\n            id: vacationToDeleteId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 42\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Home, \"FzYsWBBuobGcMpZaa7EN9FA3pAA=\", false, function () {\n  return [useStyles, useDispatch, useSelector];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/×ž×œ××š ×’×œ/Desktop/ShoppingProject/client/src/components/home/Home.js"],"names":["React","useEffect","useState","useDispatch","useSelector","setProductsState","NewUserModal","EditModal","AddVacationModal","DeleteVacationModal","ProductCard","Grid","Fab","Grow","InputBase","makeStyles","StylesProvider","AddIcon","ToastContainer","toast","Zoom","Steps","useStyles","theme","root","display","justifyContent","margin","previewcard","width","height","media","paddingTop","previewmedia","fab","position","bottom","left","whiteSpace","zIndex","borderRadius","backgroundColor","follow","textAlign","card","backgroundImage","title","fontWeight","fontSize","divider","Home","props","classes","user","JSON","parse","localStorage","getItem","dispatch","products","state","data","isAdmin","setIsAdmin","admin","followSets","setfollowSets","editModalOpen","setEditModalOpen","vacationToEdit","setVacationToEdit","addVacationModalOpen","setAddVacationModalOpen","deleteVacationModalOpen","setDeleteVacationModalOpen","vacationToDelete","setVacationToDelete","vacationToDeleteId","setVacationToDeleteId","firstEntry","setFirstEntry","stepsEnabled","setStepsEnabled","initialStep","setInitialStep","steps","setSteps","element","intro","tooltipClass","getProducts","id","match","params","res","fetch","json","productsArr","forEach","product","productObj","quantity","push","err","console","log","reduceQuantity","find","addQuantity","editVacation","onExit","newUser","setItem","stringify","length","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\n// Redux\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setProductsState } from '../../store/actions'\r\n// Components\r\nimport NewUserModal from './newUserModal/NewUserModal'\r\nimport EditModal from './editModal/EditModal'\r\nimport AddVacationModal from './addVacationModal/AddVacationModal'\r\nimport DeleteVacationModal from './deletevacation/DeleteVacationModal'\r\nimport ProductCard from '../productCard/ProductCard'\r\n// Material ui components\r\nimport { Grid, Fab, Grow, InputBase } from '@material-ui/core'\r\nimport { makeStyles, StylesProvider } from '@material-ui/core/styles'\r\n// Material ui icons\r\nimport AddIcon  from '@material-ui/icons/Add'\r\n// React toastify \r\nimport { ToastContainer, toast, Zoom } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n// Intro js\r\nimport { Steps } from 'intro.js-react'\r\nimport 'intro.js/introjs.css'\r\n// Css\r\nimport './style.css'\r\n\r\n// material ui style\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display:'flex',\r\n    justifyContent:'center',\r\n    margin:'30px'\r\n  },\r\n  previewcard:{\r\n    width:'300px',\r\n    height:'340px',\r\n    margin:'auto'\r\n  },\r\n  media: {\r\n    height: '400px',\r\n    width:'550px',\r\n    paddingTop: '56.25%',\r\n  },\r\n  previewmedia: {\r\n    width:'300px',\r\n    height:'200px'\r\n  },\r\n  fab: {\r\n    position:'fixed',\r\n    bottom: '10px',\r\n    left: '75%',\r\n    whiteSpace: 'nowrap',\r\n    zIndex: '50px',\r\n    borderRadius:'20px',\r\n    backgroundColor:'lightblue'\r\n  },\r\n  follow:{\r\n    textAlign:'right'\r\n  },\r\n  card: {\r\n    backgroundImage:'linear-gradient(#e6ecff, #99b3ff, #ffcccc)'\r\n  },\r\n  title: { \r\n    fontWeight:'600',\r\n    fontSize:'16px'\r\n  },\r\n  divider: {\r\n    margin:'15px 0px'\r\n  },\r\n}))\r\n\r\n const Home = (props) => {\r\n  const classes = useStyles()\r\n  const user = JSON.parse(localStorage.getItem('user'))\r\n  const dispatch = useDispatch()\r\n  const products = useSelector(state => state.products.data)\r\n  const [isAdmin, setIsAdmin] = useState(user ? user.admin : null)\r\n  const [followSets, setfollowSets] = useState(false)\r\n  const [editModalOpen, setEditModalOpen] = useState(false)\r\n  const [vacationToEdit, setVacationToEdit] = useState('')\r\n  const [addVacationModalOpen, setAddVacationModalOpen] = useState(false)\r\n  const [deleteVacationModalOpen, setDeleteVacationModalOpen] = useState(false)\r\n  const [vacationToDelete, setVacationToDelete] = useState('')\r\n  const [vacationToDeleteId, setVacationToDeleteId] = useState('')\r\n  // Intro js states\r\n  const [firstEntry, setFirstEntry] = useState(false)\r\n  const [stepsEnabled, setStepsEnabled] = useState(false)\r\n  const [initialStep, setInitialStep] = useState(0)\r\n  const [steps, setSteps] = useState([\r\n      { element:'#stepOne', intro: 'Take a look on the vacation we offer ðŸ¥³', position: 'left', tooltipClass: 'myTooltipClass' },\r\n      { element:'#stepTwo', intro: 'In each card you are able to see all the details about the vacation ðŸ¥³', position: 'left', tooltipClass: 'myTooltipClass' },\r\n      { element:'#stepThree', intro:'Start following vacations to get them on top of your page ðŸ˜Ž', position: 'left', tooltipClass: 'myTooltipClass' },\r\n      { element:'#stepFour', intro: 'Try to serach for your dreamy vacation, use the \"search by\" tab to take more specific search ðŸ”', position: 'left', tooltipClass: 'myTooltipClass' },\r\n  ])\r\n\r\n\r\n  // Get all the vacations\r\n  const getProducts = async () => {\r\n    try {\r\n      const id = props.match.params.id\r\n      const res = await fetch(`/product/${id}`)\r\n      const { products } = await res.json()\r\n      const productsArr = []\r\n      products.forEach(product => {\r\n        const productObj = {\r\n          ...product,\r\n          quantity:1,\r\n        }\r\n        productsArr.push(productObj)\r\n      })\r\n      dispatch(setProductsState(productsArr))\r\n    } catch(err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  const reduceQuantity = (id) => {\r\n    const product = products.find(product => product.id === id)\r\n    console.log(product);\r\n\r\n  }\r\n\r\n  const addQuantity = (id) => {\r\n    const product = products.find(product => product.id === id)\r\n    console.log(product);\r\n\r\n  }\r\n\r\n\r\n  // Edit vacation\r\n  const editVacation = (id) => {\r\n    setVacationToEdit(id)\r\n    setEditModalOpen(true)\r\n  }\r\n \r\n  // intro js functions\r\n  const onExit = () => {\r\n    setStepsEnabled(false)\r\n    setFirstEntry(false)\r\n  }\r\n\r\n  // Trigger on component load\r\n  useEffect(() => {\r\n    getProducts()\r\n   if (user.newUser) {\r\n    setFirstEntry(true)\r\n    delete user['newUser']\r\n    localStorage.setItem('user', JSON.stringify(user))\r\n   }\r\n  }, [props.match.params.id])\r\n\r\n  return (\r\n    <>\r\n \r\n      {firstEntry ? \r\n      <>\r\n      <NewUserModal stepsEnabled={stepsEnabled} setStepsEnabled={setStepsEnabled}/>\r\n      <Steps enabled={stepsEnabled} steps={steps} initialStep={initialStep} onExit={onExit}/>\r\n     </>\r\n      : null}\r\n      <StylesProvider injectFirst>\r\n        <div className=\"container\">\r\n          <Grid container>\r\n              {products ? \r\n                products.length !== 0 ?  products.map(product => (\r\n                <Grow in={true}  timeout={700} key={product.id}>\r\n                <Grid item xs={11} lg={5}  className={classes.root}  >\r\n                  <ProductCard product={product} reduceQuantity={reduceQuantity} addQuantity={addQuantity} />\r\n                </Grid> \r\n                </Grow>\r\n              )): null :  null  }\r\n            \r\n          \r\n            {/* Fab */}\r\n            {user.admin && <Fab color=\"primary\"  className={classes.fab} onClick={() => setAddVacationModalOpen(true)} title=\"Add new vacation\"> \r\n                <AddIcon />\r\n              </Fab> } \r\n            {/* ToastContainer */}\r\n            <ToastContainer /> \r\n            {/* Modals */}\r\n            { addVacationModalOpen && <AddVacationModal addVacationModalOpen={addVacationModalOpen} setAddVacationModalOpen={setAddVacationModalOpen} />}\r\n            { vacationToEdit && <EditModal setEditModalOpen={setEditModalOpen} editModalOpen={editModalOpen} vacationToEdit={vacationToEdit}/> }\r\n            { deleteVacationModalOpen && <DeleteVacationModal deleteVacationModalOpen={deleteVacationModalOpen} setDeleteVacationModalOpen={setDeleteVacationModalOpen} vacationName={vacationToDelete} id={vacationToDeleteId}/> }\r\n          </Grid>\r\n        </div>\r\n    </StylesProvider>\r\n  </>\r\n  )\r\n}\r\nexport default Home\r\n"]},"metadata":{},"sourceType":"module"}